{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"React\"","webpack:///./node_modules/@stripe/react-stripe-js/dist/react-stripe.umd.js","webpack:///./includes/frontend/js/src/tip-jar-wp-list-view.js","webpack:///./includes/frontend/js/src/edit/editing-functions.js","webpack:///./includes/frontend/js/src/edit/edit-button.js","webpack:///./includes/frontend/js/src/tip-jar-wp-top-media.js","webpack:///./includes/frontend/js/src/tip-jar-wp-functions.js","webpack:///./includes/frontend/js/src/tip-jar-wp-file-download.js","webpack:///./includes/frontend/js/src/tip-jar-wp-file-download-completion.js","webpack:///./includes/frontend/js/src/tip-jar-wp-react.js","webpack:///./includes/frontend/js/src/tip-jar-wp-card-icons.js","webpack:///./includes/frontend/js/src/edit/edit-file-button.js","webpack:///./includes/frontend/js/src/edit/edit-file.js","webpack:///./includes/frontend/js/src/edit/edit-text-field.js","webpack:///./includes/frontend/js/src/edit/edit-text-field-as-child.js","webpack:///./includes/frontend/js/src/edit/edit-file-download.js","webpack:///./includes/frontend/js/src/edit/edit-parents/edit-currency-switcher.js","webpack:///./includes/frontend/js/src/edit/edit-parents/edit-recurring-options.js","webpack:///./includes/frontend/js/src/edit/edit-open-style.js","webpack:///./includes/frontend/js/src/tip-jar-wp-react-email-field.js","webpack:///./includes/frontend/js/src/tip-jar-wp-react-input-field.js","webpack:///./includes/frontend/js/src/tip-jar-wp-react-radio-field.js","webpack:///./includes/frontend/js/src/tip-jar-wp-react-stripe-all-in-one.js","webpack:///./includes/frontend/js/src/tip-jar-wp-react-terms-field.js","webpack:///./includes/frontend/js/src/tip-jar-wp-react-textarea-field.js","webpack:///./includes/frontend/js/src/tip-jar-wp-confirmation.js","webpack:///./node_modules/@stripe/stripe-js/dist/stripe.esm.js","webpack:///./includes/frontend/js/src/tip-jar-wp-payment-box.js","webpack:///./includes/frontend/js/src/tip-jar-wp-manage-payments.js","webpack:///./includes/frontend/js/src/tip-jar-wp-manage-payments-nav.js","webpack:///./includes/frontend/js/src/tip-jar-wp-login.js","webpack:///./includes/frontend/js/src/tip-jar-wp-transactions.js","webpack:///./includes/frontend/js/src/tip-jar-wp-arrangements.js","webpack:///./includes/frontend/js/src/tip-jar-wp-arrangement.js","webpack:///./includes/frontend/js/src/tip-jar-wp-spinner.js","webpack:///./includes/frontend/js/src/tip-jar-wp-checkmark.js","webpack:///./includes/frontend/js/src/tip-jar-wp-lightbox.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","React","_typeof","obj","iterator","constructor","_objectWithoutProperties","source","excluded","target","sourceKeys","keys","length","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_slicedToArray","arr","Array","isArray","_arrayWithHoles","toString","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","_iterableToArrayLimit","TypeError","_nonIterableRest","ReactPropTypesSecret_1","emptyFunction","emptyFunctionWithReset","resetWarningCache","propTypes","shim","props","propName","componentName","location","propFullName","secret","Error","getShim","isRequired","ReactPropTypes","array","bool","func","number","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","factoryWithThrowingShims","fn","isUnknownObject","raw","isEqual","left","right","leftArray","rightArray","leftPlainObject","rightPlainObject","leftKeys","rightKeys","keySet","allKeys","every","usePrevious","ref","useRef","useEffect","current","validateStripe","maybeStripe","elements","createToken","createPaymentMethod","confirmCardPayment","parseStripeProp","then","isPromise","tag","stripePromise","Promise","resolve","stripe","ElementsContext","createContext","displayName","Elements","_ref","rawStripeProp","options","children","_final","isMounted","parsed","useMemo","_React$useState","useState","_React$useState2","ctx","setContext","prevStripe","prevOptions","console","warn","anyStripe","_registerWrapper","version","createElement","Provider","useElementsContextWithUseCase","useCaseMessage","useContext","useCase","concat","parseElementsContext","ElementsConsumer","_ref2","useCallbackReference","cb","apply","arguments","extractUpdateableOptions","paymentRequest","rest","noop","createElementComponent","type","isServer","str","charAt","toUpperCase","slice","Element","id","className","_ref$options","_ref$onBlur","onBlur","_ref$onFocus","onFocus","_ref$onReady","onReady","_ref$onChange","onChange","_ref$onEscape","onEscape","_ref$onClick","onClick","elementRef","domNode","callOnReady","callOnBlur","callOnFocus","callOnClick","callOnChange","callOnEscape","useLayoutEffect","mount","on","updateableOptions","update","destroy","__elementType","window","AuBankAccountElement","CardElement","CardNumberElement","CardExpiryElement","CardCvcElement","FpxBankElement","IbanElement","IdealBankElement","PaymentRequestButtonElement","useElements","useStripe","factory","tip_jar_wp_vars","tip_jar_wp_js_vars","tip_form_vars","Tip_Jar_WP_List_View","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","state","current_page","items_per_page","search_term","render_rows","_assertThisInitialized","total_items","Math","ceil","event","setState","rows","columns","get_rows_and_columns","_this2","input_delay","clearTimeout","setTimeout","mapper","scope","_this3","td_mapper","first","row","eval","on_row_click","main_component","unique_settings","strings","uppercase_search","handle_search_change","uppercase_items","lowercase_per","lowercase_page","min","handle_items_per_page_change","uppercase_page","max","get_total_pages","handle_page_number_change","lowercase_of","_this4","Fragment","render_columns","current_visual_state","render_search","render_list_table","render_pagination","render_list_view","Component","tip_jar_wp_pass_value_to_block","editing_keys_arg","new_value","use_typing_delay","reject","editing_keys","split","recreated_unique_settings","_objectSpread","editing_parent_component","onChangeHandler","TipJarWPEditButton","_React$Component","_inherits","_createClass","maybe_render_editing_lightbox","EditingComponent","component","Tip_Jar_WP_Modal","slug","editing_key","modal_contents","editing_mode","handle_visual_state_change_click_event","_defineProperty","tip_jar_wp_editing_strings","edit","maybe_render_edit_button","Tip_Jar_WP_Top_Media","top_media_type","is_focused","featured_embed","fetched_oembed_html","fetching_oembed","get_oembed","postData","FormData","append","decodeURI","frontend_nonces","get_oembed_nonce","fetch","ajaxurl","method","credentials","body","response","status","log","json","data","success","oembed_html","catch","tthis","should_be_focused","context","preventDefault","top_media_editor_focused","_this5","_this6","encodeURI","_this7","set_focus","view","render_edit_and_done_buttons","Tip_Jar_WP_Spinner","open_style","entries","modal_visual_state","embed_attributes","width","height","src","use_padding_ratio","includes","forEach","attribute","parseInt","padding_top","style","position","margin","padding","allow","allowFullScreen","featured_image_url","backgroundImage","handle_featured_embed_change","TipJarWPEditFileButton","editing_string","choose_image","media_above_payment_form","description_top_media_type","handle_top_media_type_change","maybe_render_featured_image_selector","maybe_render_featured_embed_input","render_editing_focused_mode","render_none","render_featured_image","render_featured_embed","tip_jar_wp_format_date","date_string","date","Date","replace","toLocaleDateString","tip_jar_wp_format_time","toLocaleTimeString","navigator","language","timeZoneName","tip_jar_wp_format_date_and_time","toLocaleString","tip_jar_wp_list_view_format_date","tip_jar_wp_format_money","cents","currency","is_zero_decimal_currency","string_after","formatted_amount","Number","Intl","NumberFormat","format","tip_jar_wp_list_view_format_money","tip_jar_wp_get_current_view_class","views_in_question","at_least_one_in_view","tip_jar_wp_string_to_bool","the_string","tip_jar_wp_validate_email","email","test","String","toLowerCase","tip_jar_wp_get_decimal_character_for_locale","mock_price","decimal_character","tip_jar_wp_set_visual_state_of_component","settings","all_current_visual_states","map_of_visual_states","new_map_of_visual_states","tip_jar_wp_get_default_map_of_visual_states","default_visual_state","previous_level","level","temp","parent_component_is_in_view","visual_state_should_become","tip_jar_wp_visual_state_should_become","default_visual_states","parent_in_view","parent_not_in_view","name_of_visual_state_variable","Tip_Jar_WP_File_Download_Button","modify_state","card_form","validate_file_download_form","set_all_current_visual_states","payment","free_file_download_completion","current_payment_state","all_fields_validate","email_validated","input_field_instructions","privacy_policy","terms_body","privacy_policy_validated","form_validation_attempted","form_has_any_error","file_download_attachment_data","file_download_mode_enabled","handleSubmit","download_file_button_text","Tip_Jar_WP_File_Download_Completion","delivery_mode","instructions_title","instructions_description","get_file_download","platform","match","this_component","transaction_id","current_transaction_info","form_id","endpoint","session_id","user_id","file_download_nonce","form_email_value","single_page_app_base_url","message","success_code","details","url","handleFileDownloadClick","Tip_Jar_WP_Form","show_edit_display_mode","editing_lightbox_active","all_initial_visual_states","dynamic_settings","wordpress_permalink_only","dom_node","get_current_view_class","initial_modal_visual_state","history","scrollRestoration","addEventListener","e","on_web_history_change","maybe_refresh_parent_dom_node","history_state","tip_jar_wp_visual_state","tjwpmodal_visual_state","view_in_question","new_url_path","depth","prefix","component_visual_state","build_new_url_path","new_state","new_modal_state","in_initial_state","new_url_prefix","new_url","pushState","protocol","stripe_api_key","currency_code","tip_jar_wp_open_link","modal_array","tip_jar_wp_form","tjwp","form","link_text","render_top_media","get_featured_image_class","Tip_Jar_WP_Payment_Box","show_close_button","Tip_Jar_WP_Manage_Payments","TipJarWPEditOpenStyle","form_number","role","href","setup_link","tip_jar_wp_refresh_a_tipping_element","tip_jar_wp_element","getAttribute","unique_shortcode_settings","JSON","parse","document","getElementById","textContent","dynamic_shortcode_settings","all_default_visual_states","ReactDOM","render","tip_jar_wp_refresh_all_tipping_elements","querySelector","querySelectorAll","tip_jar_wp_set_modal_to_open","dynamic_shortcode_settings_container","stringify","element_holding_settings","innerHTML","Tip_Jar_WP_Card_Icon","viewBox","xmlns","fill","fillRule","brand","render_visa","render_mastercard","render_amex","edit_file_button_classCallCheck","edit_file_button_possibleConstructorReturn","edit_file_button_getPrototypeOf","edit_file_button_inherits","mp_core_file_frame","wp","media","title","select_an_item_for_upload","button","text","use_uploaded_item","multiple","map","attachment","toJSON","pop","handleChange","open","wp_open_media_dialog","TipJarWPEditFile","edit_file_classCallCheck","edit_file_possibleConstructorReturn","edit_file_getPrototypeOf","current_attachment_data","input_value","textInput","createRef","edit_file_inherits","attachment_data","handle_change","remove","HtmlTag","html_tag","render_edit_and_delete_buttons","html_tag_attributes","html_tag_contents","TipJarWPContentEditable","edit_text_field_classCallCheck","edit_text_field_possibleConstructorReturn","edit_text_field_getPrototypeOf","edit_text_field_inherits","get_in_focus_class","_extends","handleBlur","instructional_html_tag_contents","TipJarWPContentEditableAsChild","edit_text_field_as_child_classCallCheck","edit_text_field_as_child_possibleConstructorReturn","edit_text_field_as_child_getPrototypeOf","edit_text_field_as_child_inherits","editing_textarea_container_classname","dangerouslySetInnerHTML","edit_text_field_as_child_extends","TipJarWPEditFileDownload","edit_file_download_classCallCheck","edit_file_download_possibleConstructorReturn","edit_file_download_getPrototypeOf","edit_file_download_inherits","choose_file_to_be_delivered","attachment_id","attachment_filename","filename","handle_file_change","email_required","enable_file_download_mode","handle_remove_click","disable_file_download_mode","render_enable_button","render_disable_button","deliverable_file_title","deliverable_file_description","require_users_email_title","require_users_email_description","toggle_email_required","checked","email_not_required","instructions_to_user_title","instructions_to_user_description","handle_instructions_title","handle_instructions_description","render_file_select_option","render_email_required_option","render_file_instructions_option","file_download_mode_description","render_area_header","render_body","TipJarWPEditDefaultAmountAndCurrency","_useState2","set_is_focused","_useState4","payment_box","get_visual_amount_for_input_field","input_amount","set_input_amount","handleAmountChange","amount_editing_key","tip_amount","render_amount_and_currency_fields","external_React_default","a","Tip_Jar_WP_Input_Field_Instruction","current_instruction","input_fields_tip_amount_current_instruction","instruction_codes","is_edit_child","currency_search_visible","verified_currency_symbol","disabled","get_disabled_status","step","get_amount_field_step_format","placeholder","placeholder_text","render_currency_switcher","edit_currency_is_focused","TipJarWPEditRecurringOptions","edit_recurring_options_classCallCheck","edit_recurring_options_possibleConstructorReturn","edit_recurring_options_getPrototypeOf","currency_input_value","amount_input_value","edit_recurring_options_inherits","recurring_options_enabled","toggle_recurring_options_enabled","disable_recurring_options","enable_recurring_options","Tip_Jar_WP_Radio_Field","state_validation_variable_name","state_value_variable_name","set_validation_and_value_of_field","is_validated","recurring_validated","validate_form","recurring","radio_buttons","recurring_options","class_name","render_edit_and_hide_buttons","render_recurring_options_and_instructions","edit_open_style_classCallCheck","edit_open_style_possibleConstructorReturn","edit_open_style_getPrototypeOf","form_mode","button_text","edit_open_style_inherits","tip_forms_display_style","how_should_the_tip_form_display","handle_form_mode_change","embed_in_place","start_as_a_button","start_as_a_text_link","with_the_text","handle_button_text_change","which","handle_open_style_change","opens_in_place","opens_in_modal","when_clicked","render_open_style_option","Tip_Jar_WP_Email_Field","tip_jar_wp_react_email_field_classCallCheck","tip_jar_wp_react_email_field_getPrototypeOf","get_input_field_class","tip_jar_wp_react_email_field_assertThisInitialized","get_input_instruction_class","get_input_instruction_message","tip_jar_wp_react_email_field_inherits","initial_value","initial_input_value","get_current_instruction_key","instruction_type","instruction_message","inputProps","handle_input_change","Tip_Jar_WP_Input_Field","tip_jar_wp_react_input_field_classCallCheck","tip_jar_wp_react_input_field_possibleConstructorReturn","tip_jar_wp_react_input_field_getPrototypeOf","tip_jar_wp_react_input_field_assertThisInitialized","tip_jar_wp_react_input_field_inherits","tip_jar_wp_react_input_field_createClass","output_before_field","after_before_field","_React$Component2","set_current_input_field_instruction","field_name","instruction_name","input_fields","tip_jar_wp_react_radio_field_classCallCheck","tip_jar_wp_react_radio_field_getPrototypeOf","tip_jar_wp_react_radio_field_assertThisInitialized","tip_jar_wp_react_radio_field_inherits","selected","tip_jar_wp_react_radio_field_extends","after_output","render_field_instructions","index","Tip_Jar_WP_Stripe_All_In_One_Field","tip_jar_wp_react_stripe_all_in_one_slicedToArray","current_stripe_element","set_current_stripe_element","stripe_card_error_code","set_stripe_card_error_code","_useState6","zip_code","set_zip_code","handle_cc_validation","card_element","getElement","card_number_element","cardElement","postal_code","stripe_elements_fields_complete","create_stripe_source","error","handle_zip_code_change","mobile_mode","focusable","transform","react_stripe_umd","base","fontSize","zip_code_placeholder","render_multi_field_cc_form","color","letterSpacing","fontFamily","::placeholder","invalid","Tip_Jar_WP_Terms_Field","tip_jar_wp_react_terms_field_classCallCheck","tip_jar_wp_react_terms_field_getPrototypeOf","terms_checked","terms_are_visible","is_edit_focused","tip_jar_wp_react_terms_field_assertThisInitialized","get_terms_visibility","tip_jar_wp_react_terms_field_inherits","__html","initial","handle_terms_change","defaultValue","tip_jar_wp_react_terms_field_extends","agreement_text","view_terms_button_text","toggle_full_terms","terms_show_text","hidden","terms_and_conditions_title","terms_title","terms_and_conditions_body","dangerously_set_terms_body","get_edit_in_focus_class","render_terms_title_and_description","render_terms_agree_field","Tip_Jar_WP_TextArea_Field","tip_jar_wp_react_textarea_field_classCallCheck","tip_jar_wp_react_textarea_field_getPrototypeOf","tip_jar_wp_react_textarea_field_assertThisInitialized","tip_jar_wp_react_textarea_field_inherits","Tip_Jar_WP_Payment_Confirmation","tip_jar_wp_confirmation_classCallCheck","tip_jar_wp_confirmation_getPrototypeOf","note_with_tip_value","note_with_tip_validated","time_since_last_keypress","after_payment_actions_completed","print_html","sending_email_receipt","email_receipt_success","note_with_tip_keypress_delay","render_refunded_output","tip_jar_wp_confirmation_assertThisInitialized","email_transaction_receipt","tip_jar_wp_confirmation_inherits","outerHTML","do_after_payment_actions","transaction_charged_amount","transaction_charged_currency","transaction_currency_is_zero_decimal","arrangement_info","amount","period_string","start_date","transaction_period_start_date","end_date","transaction_period_end_date","transaction_period","notify_admin_too","send_regardless_of_initial_emails_sent","tip_jar_wp_email_transaction_receipt_nonce","state_validation_variable","state_value_variable","state_value","_this$setState2","old_note_with_tip","note_with_tip","save_note_with_tip","note_with_tip_nonce","email_message","email_receipt_failed","email_receipt_sending","email_receipt","print","tip_jar_wp_print_div","receipt_title","print_receipt","show_manage_payments","manage_payments","manage_payments_button_text","transaction_type","refund_id","thank_you_message","transaction_note_with_tip","recurring_status","arrangement_id_title","arrangement_amount_title","get_arrangement_visual_amount","maybe_render_the_period_this_transaction_covers","render_things_before_receipt","refund_payer","receipt_payee","payee_name","receipt_transaction_id","receipt_date","transaction_date_created","receipt_transaction_amount","get_transaction_visual_amount","receipt_statement_descriptor","statement_descriptor","maybe_render_plan_details","email_value","render_email_button","render_print_button","render_manage_payments_button","html_to_print","page_title_to_use","css_stylesheet_id","head_tag","mywindow","write","focus","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","loadScript","params","Stripe","script","scripts","findScript","queryString","advancedFraudSignals","headOrBody","head","appendChild","injectScript","stripePromise$1","loadCalled","loadStripe","_len","args","_key","startTime","now","registerWrapper","initStripe","tip_jar_wp_payment_box_classCallCheck","tip_jar_wp_payment_box_possibleConstructorReturn","tip_jar_wp_payment_box_getPrototypeOf","variable","has_been_in_view","current_title_string","form_title","container_element","tip_jar_wp_payment_box_inherits","tip_jar_wp_payment_box_createClass","loading","form_subtitle","optional_subtitle_here","editing_html_tag","header_media","controls","optional_header_media_here","aria-label","close_button_url","get_current_title","get_current_subtitle","render_current_media","maybe_render_close_button","offsetWidth","tip_jar_wp_payment_box_CardForm","Tip_Jar_WP_Card_Form","stripe_is_set","canDoPaymentRequest","default_payment_mode","payment_mode","payment_method_name","payment_request_button_name","user_typed_currency","verified_currency","currency_symbol","verified_currency_type","currency_type","stripe_error_message","stripe_payment_method","default_amount","name_value","name_validated","recurring_value","input_fields_stripe_all_in_one_current_instruction","currency_text_input","check_for_payment_request_availability","tip_jar_wp_payment_box_assertThisInitialized","validate_tip_amount","handleCreditCardSubmit","set_payment_mode","get_currency_flag_class","create_stripe_payment_method","current_arrangement_info","country_code","stripe_account_country_code","country","total","label","payment_request_label","requestPayerEmail","canMakePayment","result","country_supports_payment_request_button","complete","paymentMethod","payerEmail","methodName","do_ajax_stripe_transaction","dispatchEvent","Event","format_decimals","visual_tip_amount","toFixed","step_format","payment_modes","card","billing_details","address","code","validate_currency","note_value","note_name_value","payment_intent_nonce","confirmPaymentIntent","client_secret","save_payment_method","payment_intent_result","paymentIntent","transaction_info","confirmation","handleCardPayment","general_server_error","stripe_tip_amount","_this8","tip_jar_wp_payment_box_defineProperty","_this9","_this9$setState2","payment_field_to_render","array_of_visible_states","get_view_class","substring","_this10","currency_typing_frozen","currency_to_confirm","success_type","validated_currency","validated_currency_symbol","validated_currency_type","_this11","confirm_currency_exists","_this12","_this13","blank_flag_url","flag_sprite_url","color_mode","input","handle_currency_typing","handle_currency_enter","handle_currency_leave","currency_search_text","autoComplete","toggle_currency_search","terms_hide_text","current_user_email","current_user_name","stripe_all_in_one","form_has_an_error","paymentRequestButton","theme","_React$createElement","currency_for_button","payment_verb","get_visual_amount","render_recurring_text_on_payment_button","handlePaymentRequestValidateButton","render_complete_payment_button_field","button_class","Tip_Jar_WP_Checkmark","complete_payment_button_error_text","other_payment_option","_this14","render_payment_field","render_payment_mode_toggler_field","render_card_form","CardForm","tip_jar_wp_payment_box_Tip_Jar_WP_Card_Form","tip_jar_wp_manage_payments_classCallCheck","tip_jar_wp_manage_payments_getPrototypeOf","check_if_user_is_logged_in","tip_jar_wp_manage_payments_assertThisInitialized","tip_jar_wp_manage_payments_inherits","user_logged_in","transactions_title","transaction_title","arrangements_title","arrangement_title","login","get_current_title_string","Tip_Jar_WP_Manage_Payments_Nav","Tip_Jar_WP_Transactions","Tip_Jar_WP_Arrangements","Tip_Jar_WP_Arrangement","Tip_Jar_WP_Login","tip_jar_wp_manage_payments_nav_classCallCheck","tip_jar_wp_manage_payments_nav_possibleConstructorReturn","tip_jar_wp_manage_payments_nav_getPrototypeOf","tip_jar_wp_manage_payments_nav_inherits","transactions","arrangements","button_in_question","get_current_button_class","set_view_to_arrangements","set_view_to_transactions","tip_jar_wp_login_classCallCheck","tip_jar_wp_login_getPrototypeOf","login_error_message","login_code_digit_1","login_code_digit_2","login_code_digit_3","login_code_digit_4","login_code_digit_5","login_code_digit_6","handle_login_form_submit","tip_jar_wp_login_assertThisInitialized","tip_jar_wp_login_inherits","prior_all_current_visual_states","email_login_nonce","login_code","login_nonce","reload","tip_jar_wp_login_defineProperty","request_login_email","digit","handle_login_form_digit_change","onKeyUp","handle_login_form_digit_backspace","handle_login_form_digit_focus","render_login_code_field","all_characters","isInteger","after_login_code_digit_set","multiple_characters_entered","next_digit","attempt_to_login","keyCode","previous_digit","activeElement","email_for_login_code","login_form_has_an_error","login_button_text","onSubmit","render_login_field","render_login_code_fields","tip_jar_wp_transactions_classCallCheck","tip_jar_wp_transactions_possibleConstructorReturn","tip_jar_wp_transactions_getPrototypeOf","tip_jar_wp_transactions_inherits","get_transactions","second_slug","third_slug","get_transaction","get_transactions_nonce","get_transaction_nonce","transaction","tip_jar_wp_transactions_defineProperty","tip_jar_wp_list_view","tip_jar_wp_arrangements_classCallCheck","tip_jar_wp_arrangements_possibleConstructorReturn","tip_jar_wp_arrangements_getPrototypeOf","current_arrangement_payment_method","fetching_arrangements","fetching_arrangement","tip_jar_wp_arrangements_inherits","get_arrangements","reload_arrangements","get_arrangement","get_arrangements_nonce","arrangement_id","get_arrangement_nonce","get_arrangement_payment_method","get_arrangement_payment_method_nonce","payment_method_data","arrangement","tip_jar_wp_arrangements_defineProperty","tip_jar_wp_arrangement_classCallCheck","tip_jar_wp_arrangement_possibleConstructorReturn","tip_jar_wp_arrangement_getPrototypeOf","arrangement_cancel_intention_count","card_form_visible","sca_authentication_status","tip_jar_wp_arrangement_inherits","tip_jar_wp_arrangement_createClass","cancel_arrangement_nonce","error_code","tip_jar_wp_arrangement_TipJarWPAuthenticatePaymentButton","webhook_succeeded","arrangement_action_cancel","arrangement_action_cancel_double","arrangement_failed_to_cancel","arrangement_cancelling","arrangement_cancelled","cancel_arrangement","arrangement_action_cant_cancel","arrangement_renewal_title","renewal_date","arrangement_payment_method_title","last4","toggle_card_form_visibility","update_payment_method_verb","tip_jar_wp_arrangement_TipJarWPUpdateCardForm","handle_back_to_plans_click","back_to_plans","arrangement_details","recurring_status_visible","format_amount","render_renewal_date","render_payment_method","render_payment_method_update_form","render_authenticate_sca_button","render_cancel_button","Tip_Jar_WP_Authenticate_Payment_Button","pending_invoice","payment_intent","payment_method","sca_auth_description","attempt_payment_intent_confirmation","sca_auth_failed","sca_authing_verb","invoice","sca_auth_verb","sca_authed_verb","Tip_Jar_WP_Update_Card_Form","status_of_payment_method_updating","update_arrangement_nonce","update_payment_method_for_arrangement","_this11$setState2","tip_jar_wp_arrangement_defineProperty","innerWidth","TipJarWPUpdateCardForm","TipJarWPAuthenticatePaymentButton","tip_jar_wp_spinner_classCallCheck","tip_jar_wp_spinner_possibleConstructorReturn","tip_jar_wp_spinner_getPrototypeOf","tip_jar_wp_spinner_inherits","get_color_mode_class","tip_jar_wp_checkmark_classCallCheck","tip_jar_wp_checkmark_possibleConstructorReturn","tip_jar_wp_checkmark_getPrototypeOf","tip_jar_wp_checkmark_inherits","cx","cy","stroke","points","tip_jar_wp_lightbox_classCallCheck","tip_jar_wp_lightbox_getPrototypeOf","has_mounted","modal_open","handle_key_press","tip_jar_wp_lightbox_assertThisInitialized","toggle_modal","tip_jar_wp_lightbox_inherits","handle_open_status_based_on_url","removeEventListener","get_modal_visible_class"],"mappings":"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","file":"includes/frontend/js/build/tip-jar-wp-frontend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = React;","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) :\n  (global = global || self, factory(global.ReactStripe = {}, global.React));\n}(this, (function (exports, React) { 'use strict';\n\n  React = React && React.hasOwnProperty('default') ? React['default'] : React;\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n      return;\n    }\n\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }\n\n  function createCommonjsModule(fn, module) {\n  \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n  }\n\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n\n  var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n  var ReactPropTypesSecret_1 = ReactPropTypesSecret;\n\n  function emptyFunction() {}\n\n  function emptyFunctionWithReset() {}\n\n  emptyFunctionWithReset.resetWarningCache = emptyFunction;\n\n  var factoryWithThrowingShims = function () {\n    function shim(props, propName, componentName, location, propFullName, secret) {\n      if (secret === ReactPropTypesSecret_1) {\n        // It is still safe when called from React.\n        return;\n      }\n\n      var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n      err.name = 'Invariant Violation';\n      throw err;\n    }\n    shim.isRequired = shim;\n\n    function getShim() {\n      return shim;\n    }\n    // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\n    var ReactPropTypes = {\n      array: shim,\n      bool: shim,\n      func: shim,\n      number: shim,\n      object: shim,\n      string: shim,\n      symbol: shim,\n      any: shim,\n      arrayOf: getShim,\n      element: shim,\n      elementType: shim,\n      instanceOf: getShim,\n      node: shim,\n      objectOf: getShim,\n      oneOf: getShim,\n      oneOfType: getShim,\n      shape: getShim,\n      exact: getShim,\n      checkPropTypes: emptyFunctionWithReset,\n      resetWarningCache: emptyFunction\n    };\n    ReactPropTypes.PropTypes = ReactPropTypes;\n    return ReactPropTypes;\n  };\n\n  var propTypes = createCommonjsModule(function (module) {\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n  {\n    // By explicitly using `prop-types` you are opting into new production behavior.\n    // http://fb.me/prop-types-in-prod\n    module.exports = factoryWithThrowingShims();\n  }\n  });\n\n  var isUnknownObject = function isUnknownObject(raw) {\n    return raw !== null && _typeof(raw) === 'object';\n  };\n  var isPromise = function isPromise(raw) {\n    return isUnknownObject(raw) && typeof raw.then === 'function';\n  }; // We are using types to enforce the `stripe` prop in this lib,\n  // but in an untyped integration `stripe` could be anything, so we need\n  // to do some sanity validation to prevent type errors.\n\n  var isStripe = function isStripe(raw) {\n    return isUnknownObject(raw) && typeof raw.elements === 'function' && typeof raw.createToken === 'function' && typeof raw.createPaymentMethod === 'function' && typeof raw.confirmCardPayment === 'function';\n  };\n\n  var PLAIN_OBJECT_STR = '[object Object]';\n  var isEqual = function isEqual(left, right) {\n    if (!isUnknownObject(left) || !isUnknownObject(right)) {\n      return left === right;\n    }\n\n    var leftArray = Array.isArray(left);\n    var rightArray = Array.isArray(right);\n    if (leftArray !== rightArray) return false;\n    var leftPlainObject = Object.prototype.toString.call(left) === PLAIN_OBJECT_STR;\n    var rightPlainObject = Object.prototype.toString.call(right) === PLAIN_OBJECT_STR;\n    if (leftPlainObject !== rightPlainObject) return false;\n    if (!leftPlainObject && !leftArray) return false;\n    var leftKeys = Object.keys(left);\n    var rightKeys = Object.keys(right);\n    if (leftKeys.length !== rightKeys.length) return false;\n    var keySet = {};\n\n    for (var i = 0; i < leftKeys.length; i += 1) {\n      keySet[leftKeys[i]] = true;\n    }\n\n    for (var _i = 0; _i < rightKeys.length; _i += 1) {\n      keySet[rightKeys[_i]] = true;\n    }\n\n    var allKeys = Object.keys(keySet);\n\n    if (allKeys.length !== leftKeys.length) {\n      return false;\n    }\n\n    var l = left;\n    var r = right;\n\n    var pred = function pred(key) {\n      return isEqual(l[key], r[key]);\n    };\n\n    return allKeys.every(pred);\n  };\n\n  var usePrevious = function usePrevious(value) {\n    var ref = React.useRef(value);\n    React.useEffect(function () {\n      ref.current = value;\n    }, [value]);\n    return ref.current;\n  };\n\n  var INVALID_STRIPE_ERROR = 'Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.'; // We are using types to enforce the `stripe` prop in this lib, but in a real\n  // integration `stripe` could be anything, so we need to do some sanity\n  // validation to prevent type errors.\n\n  var validateStripe = function validateStripe(maybeStripe) {\n    if (maybeStripe === null || isStripe(maybeStripe)) {\n      return maybeStripe;\n    }\n\n    throw new Error(INVALID_STRIPE_ERROR);\n  };\n\n  var parseStripeProp = function parseStripeProp(raw) {\n    if (isPromise(raw)) {\n      return {\n        tag: 'async',\n        stripePromise: Promise.resolve(raw).then(validateStripe)\n      };\n    }\n\n    var stripe = validateStripe(raw);\n\n    if (stripe === null) {\n      return {\n        tag: 'empty'\n      };\n    }\n\n    return {\n      tag: 'sync',\n      stripe: stripe\n    };\n  };\n\n  var ElementsContext = React.createContext(null);\n  ElementsContext.displayName = 'ElementsContext';\n  var parseElementsContext = function parseElementsContext(ctx, useCase) {\n    if (!ctx) {\n      throw new Error(\"Could not find Elements context; You need to wrap the part of your app that \".concat(useCase, \" in an <Elements> provider.\"));\n    }\n\n    return ctx;\n  };\n  /**\n   * The `Elements` provider allows you to use [Element components](https://stripe.com/docs/stripe-js/react#element-components) and access the [Stripe object](https://stripe.com/docs/js/initializing) in any nested component.\n   * Render an `Elements` provider at the root of your React app so that it is available everywhere you need it.\n   *\n   * To use the `Elements` provider, call `loadStripe` from `@stripe/stripe-js` with your publishable key.\n   * The `loadStripe` function will asynchronously load the Stripe.js script and initialize a `Stripe` object.\n   * Pass the returned `Promise` to `Elements`.\n   *\n   * @docs https://stripe.com/docs/stripe-js/react#elements-provider\n   */\n\n  var Elements = function Elements(_ref) {\n    var rawStripeProp = _ref.stripe,\n        options = _ref.options,\n        children = _ref.children;\n\n    var _final = React.useRef(false);\n\n    var isMounted = React.useRef(true);\n    var parsed = React.useMemo(function () {\n      return parseStripeProp(rawStripeProp);\n    }, [rawStripeProp]);\n\n    var _React$useState = React.useState(function () {\n      return {\n        stripe: null,\n        elements: null\n      };\n    }),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        ctx = _React$useState2[0],\n        setContext = _React$useState2[1];\n\n    var prevStripe = usePrevious(rawStripeProp);\n    var prevOptions = usePrevious(options);\n\n    if (prevStripe !== null) {\n      if (prevStripe !== rawStripeProp) {\n        console.warn('Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.');\n      }\n\n      if (!isEqual(options, prevOptions)) {\n        console.warn('Unsupported prop change on Elements: You cannot change the `options` prop after setting the `stripe` prop.');\n      }\n    }\n\n    if (!_final.current) {\n      if (parsed.tag === 'sync') {\n        _final.current = true;\n        setContext({\n          stripe: parsed.stripe,\n          elements: parsed.stripe.elements(options)\n        });\n      }\n\n      if (parsed.tag === 'async') {\n        _final.current = true;\n        parsed.stripePromise.then(function (stripe) {\n          if (stripe && isMounted.current) {\n            // Only update Elements context if the component is still mounted\n            // and stripe is not null. We allow stripe to be null to make\n            // handling SSR easier.\n            setContext({\n              stripe: stripe,\n              elements: stripe.elements(options)\n            });\n          }\n        });\n      }\n    }\n\n    React.useEffect(function () {\n      return function () {\n        isMounted.current = false;\n      };\n    }, []);\n    React.useEffect(function () {\n      var anyStripe = ctx.stripe;\n\n      if (!anyStripe || !anyStripe._registerWrapper) {\n        return;\n      }\n\n      anyStripe._registerWrapper({\n        name: 'react-stripe-js',\n        version: \"1.1.2\"\n      });\n    }, [ctx.stripe]);\n    return React.createElement(ElementsContext.Provider, {\n      value: ctx\n    }, children);\n  };\n  Elements.propTypes = {\n    stripe: propTypes.any,\n    options: propTypes.object\n  };\n  var useElementsContextWithUseCase = function useElementsContextWithUseCase(useCaseMessage) {\n    var ctx = React.useContext(ElementsContext);\n    return parseElementsContext(ctx, useCaseMessage);\n  };\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#useelements-hook\n   */\n\n  var useElements = function useElements() {\n    var _useElementsContextWi = useElementsContextWithUseCase('calls useElements()'),\n        elements = _useElementsContextWi.elements;\n\n    return elements;\n  };\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#usestripe-hook\n   */\n\n  var useStripe = function useStripe() {\n    var _useElementsContextWi2 = useElementsContextWithUseCase('calls useStripe()'),\n        stripe = _useElementsContextWi2.stripe;\n\n    return stripe;\n  };\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#elements-consumer\n   */\n\n  var ElementsConsumer = function ElementsConsumer(_ref2) {\n    var children = _ref2.children;\n    var ctx = useElementsContextWithUseCase('mounts <ElementsConsumer>'); // Assert to satisfy the busted React.FC return type (it should be ReactNode)\n\n    return children(ctx);\n  };\n  ElementsConsumer.propTypes = {\n    children: propTypes.func.isRequired\n  };\n\n  var useCallbackReference = function useCallbackReference(cb) {\n    var ref = React.useRef(cb);\n    React.useEffect(function () {\n      ref.current = cb;\n    }, [cb]);\n    return function () {\n      if (ref.current) {\n        ref.current.apply(ref, arguments);\n      }\n    };\n  };\n\n  var extractUpdateableOptions = function extractUpdateableOptions(options) {\n    if (!isUnknownObject(options)) {\n      return {};\n    }\n\n    var _ = options.paymentRequest,\n        rest = _objectWithoutProperties(options, [\"paymentRequest\"]);\n\n    return rest;\n  };\n\n  var noop = function noop() {};\n\n  var capitalized = function capitalized(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  };\n\n  var createElementComponent = function createElementComponent(type, isServer) {\n    var displayName = \"\".concat(capitalized(type), \"Element\");\n\n    var ClientElement = function ClientElement(_ref) {\n      var id = _ref.id,\n          className = _ref.className,\n          _ref$options = _ref.options,\n          options = _ref$options === void 0 ? {} : _ref$options,\n          _ref$onBlur = _ref.onBlur,\n          onBlur = _ref$onBlur === void 0 ? noop : _ref$onBlur,\n          _ref$onFocus = _ref.onFocus,\n          onFocus = _ref$onFocus === void 0 ? noop : _ref$onFocus,\n          _ref$onReady = _ref.onReady,\n          onReady = _ref$onReady === void 0 ? noop : _ref$onReady,\n          _ref$onChange = _ref.onChange,\n          onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n          _ref$onEscape = _ref.onEscape,\n          onEscape = _ref$onEscape === void 0 ? noop : _ref$onEscape,\n          _ref$onClick = _ref.onClick,\n          onClick = _ref$onClick === void 0 ? noop : _ref$onClick;\n\n      var _useElementsContextWi = useElementsContextWithUseCase(\"mounts <\".concat(displayName, \">\")),\n          elements = _useElementsContextWi.elements;\n\n      var elementRef = React.useRef(null);\n      var domNode = React.useRef(null);\n      var callOnReady = useCallbackReference(onReady);\n      var callOnBlur = useCallbackReference(onBlur);\n      var callOnFocus = useCallbackReference(onFocus);\n      var callOnClick = useCallbackReference(onClick);\n      var callOnChange = useCallbackReference(onChange);\n      var callOnEscape = useCallbackReference(onEscape);\n      React.useLayoutEffect(function () {\n        if (elementRef.current == null && elements && domNode.current != null) {\n          var element = elements.create(type, options);\n          elementRef.current = element;\n          element.mount(domNode.current);\n          element.on('ready', function () {\n            return callOnReady(element);\n          });\n          element.on('change', callOnChange);\n          element.on('blur', callOnBlur);\n          element.on('focus', callOnFocus);\n          element.on('escape', callOnEscape); // Users can pass an an onClick prop on any Element component\n          // just as they could listen for the `click` event on any Element,\n          // but only the PaymentRequestButton will actually trigger the event.\n\n          element.on('click', callOnClick);\n        }\n      });\n      var prevOptions = React.useRef(options);\n      React.useEffect(function () {\n        if (prevOptions.current && prevOptions.current.paymentRequest !== options.paymentRequest) {\n          console.warn('Unsupported prop change: options.paymentRequest is not a customizable property.');\n        }\n\n        var updateableOptions = extractUpdateableOptions(options);\n\n        if (Object.keys(updateableOptions).length !== 0 && !isEqual(updateableOptions, extractUpdateableOptions(prevOptions.current))) {\n          if (elementRef.current) {\n            elementRef.current.update(updateableOptions);\n            prevOptions.current = options;\n          }\n        }\n      }, [options]);\n      React.useEffect(function () {\n        return function () {\n          if (elementRef.current) {\n            elementRef.current.destroy();\n          }\n        };\n      }, []);\n      return React.createElement(\"div\", {\n        id: id,\n        className: className,\n        ref: domNode\n      });\n    }; // Only render the Element wrapper in a server environment.\n\n\n    var ServerElement = function ServerElement(props) {\n      // Validate that we are in the right context by calling useElementsContextWithUseCase.\n      useElementsContextWithUseCase(\"mounts <\".concat(displayName, \">\"));\n      var id = props.id,\n          className = props.className;\n      return React.createElement(\"div\", {\n        id: id,\n        className: className\n      });\n    };\n\n    var Element = isServer ? ServerElement : ClientElement;\n    Element.propTypes = {\n      id: propTypes.string,\n      className: propTypes.string,\n      onChange: propTypes.func,\n      onBlur: propTypes.func,\n      onFocus: propTypes.func,\n      onReady: propTypes.func,\n      onClick: propTypes.func,\n      options: propTypes.object\n    };\n    Element.displayName = displayName;\n    Element.__elementType = type;\n    return Element;\n  };\n\n  var isServer = typeof window === 'undefined';\n  /**\n   * Requires beta access:\n   * Contact [Stripe support](https://support.stripe.com/) for more information.\n   *\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var AuBankAccountElement = createElementComponent('auBankAccount', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var CardElement = createElementComponent('card', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var CardNumberElement = createElementComponent('cardNumber', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var CardExpiryElement = createElementComponent('cardExpiry', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var CardCvcElement = createElementComponent('cardCvc', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var FpxBankElement = createElementComponent('fpxBank', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var IbanElement = createElementComponent('iban', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var IdealBankElement = createElementComponent('idealBank', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var PaymentRequestButtonElement = createElementComponent('paymentRequestButton', isServer);\n\n  exports.AuBankAccountElement = AuBankAccountElement;\n  exports.CardCvcElement = CardCvcElement;\n  exports.CardElement = CardElement;\n  exports.CardExpiryElement = CardExpiryElement;\n  exports.CardNumberElement = CardNumberElement;\n  exports.Elements = Elements;\n  exports.ElementsConsumer = ElementsConsumer;\n  exports.FpxBankElement = FpxBankElement;\n  exports.IbanElement = IbanElement;\n  exports.IdealBankElement = IdealBankElement;\n  exports.PaymentRequestButtonElement = PaymentRequestButtonElement;\n  exports.useElements = useElements;\n  exports.useStripe = useStripe;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","var tip_jar_wp_vars = tip_jar_wp_js_vars.tip_form_vars;\n\nclass Tip_Jar_WP_List_View extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrent_page: 1,\n\t\t\titems_per_page: 10,\n\t\t\tsearch_term: '',\n\t\t};\n\n\t\tthis.render_rows = this.render_rows.bind( this );\n\n\t}\n\n\tget_total_pages() {\n\t\tif ( ! this.props.total_items ) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\treturn Math.ceil( this.props.total_items / this.state.items_per_page );\n\t\t}\n\t}\n\n\thandle_page_number_change( event ) {\n\n\t\tthis.setState( {\n\t\t\tcurrent_page: event.target.value,\n\t\t\trows: null,\n\t\t\tcolumns: null,\n\t\t}, function() {\n\t\t\tthis.props.get_rows_and_columns( this.state.current_page, this.state.items_per_page, this.state.search_term )\n\t\t} );\n\n\t}\n\n\thandle_items_per_page_change( event ) {\n\n\t\tthis.setState( {\n\t\t\tcurrent_page: 1,\n\t\t\titems_per_page: event.target.value,\n\t\t}, function() {\n\t\t\tthis.props.get_rows_and_columns( this.state.current_page, this.state.items_per_page, this.state.search_term )\n\t\t} );\n\n\t}\n\n\thandle_search_change( event ) {\n\n\t\tthis.setState( {\n\t\t\tsearch_term: event.target.value,\n\t\t}, () => {\n\n\t\t\t// Set up a delay which waits to save the tip until .5 seconds after they stop typing.\n\t\t\tif( this.input_delay ) {\n\t\t\t\t\t// Clear the keypress delay if the user just typed\n\t\t\t\t\tclearTimeout( this.input_delay );\n\t\t\t\t\tthis.input_delay = null;\n\t\t\t}\n\n\t\t\tvar this_component = this;\n\n\t\t\t// (Re)-Set up the save to fire in 500ms\n\t\t\tthis.input_delay = setTimeout( () => {\n\t\t\t\t\tclearTimeout( this.input_delay );\n\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tcurrent_page: 1,\n\t\t\t\t\t\trows: null,\n\t\t\t\t\t\tcolumns: null,\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\tthis.props.get_rows_and_columns( this.state.current_page, this.state.items_per_page, this.state.search_term )\n\t\t\t\t\t} );\n\n\t\t\t}, 50);\n\n\t\t} );\n\n\t}\n\n\trender_columns( columns ) {\n\n\t\tif ( ! columns ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar mapper = [];\n\n\t\t// Loop through each column\n\t\tfor (var key in columns) {\n\t\t\tmapper.push(\n\t\t\t\t<div key={ key } scope=\"col\" className=\"tip-jar-wp-list-view-column\">\n\t\t\t\t\t<span>{ columns[key] }</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn mapper;\n\t}\n\n\trender_rows( rows, columns ) {\n\n\t\tvar mapper = [];\n\t\tvar td_mapper = [];\n\t\tvar value;\n\n\t\tif ( ! rows || 0 == this.props.total_items ) {\n\n\t\t\tvar first = true;\n\n\t\t\tfor (var key in columns) {\n\t\t\t\ttd_mapper.push(\n\n\t\t\t\t\t// Render the contents of this table cell\n\t\t\t\t\t(() => {\n\n\t\t\t\t\t\t// If this is the first item in the row.\n\t\t\t\t\t\tif ( first ) {\n\n\t\t\t\t\t\t\tfirst = false;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={ key } className=\"tip-jar-wp-list-view-cell\">\n\t\t\t\t\t\t\t\t\t{ 'None Found' }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfirst = false;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={ key } className=\"tip-jar-wp-list-view-cell\">\n\t\t\t\t\t\t\t\t\t{ '' }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t})()\n\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Add all of that combined data to the main mapper array\n\t\t\tmapper.push(\n\t\t\t\t<div key={ 'none_found' } className=\"tip-jar-wp-list-view-row\">\n\t\t\t\t{ td_mapper }\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\treturn mapper;\n\t\t}\n\n\t\t// Loop through each row\n\t\tfor (var row in rows) {\n\n\t\t\t// Combine all of the table data (cells in this row)\n\t\t\tfor (var key in columns) {\n\t\t\t//for (var key in rows[row]) {\n\t\t\t\ttd_mapper.push(\n\n\t\t\t\t\t// Render the contents of this table cell\n\t\t\t\t\t(() => {\n\n\t\t\t\t\t\t// If we should show this peice of data in the list view\n\t\t\t\t\t\tif ( rows[row][key]['show_in_list_view'] ) {\n\n\t\t\t\t\t\t\t// Format the value according to it's format function (if one was included)\n\t\t\t\t\t\t\tif ( rows[row][key]['value_format_function'] ) {\n\t\t\t\t\t\t\t\tvalue = eval( rows[row][key]['value_format_function'] )( rows[row][key] )\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalue = rows[row][key]['value']\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={ key } className=\"tip-jar-wp-list-view-cell\">\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"tip-jar-wp-text-button\" onClick={ this.props.on_row_click.bind( this, rows[row] ) }>{ value }</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t})()\n\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Add all of that combined data to the main mapper array\n\t\t\tmapper.push(\n\t\t\t\t<div key={ row } className=\"tip-jar-wp-list-view-row\">\n\t\t\t\t{ td_mapper }\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\t// Get the row data array ready for a new row\n\t\t\ttd_mapper = [];\n\t\t}\n\n\t\treturn mapper;\n\n\t}\n\n\trender_search() {\n\n\t\treturn (\n\t\t\t<div className=\"tip-jar-wp-list-view-search\">\n\t\t\t\t<span>{ this.props.main_component.state.unique_settings.strings.uppercase_search }</span>\n\t\t\t\t<input type=\"text\" value={ this.state.search_term } onChange={ this.handle_search_change.bind( this ) } />\n\t\t\t</div>\n\t\t)\n\n\t}\n\n\trender_pagination() {\n\n\t\treturn (\n\t\t\t<div className=\"tip-jar-wp-list-view-pagination-controls\">\n\t\t\t\t<div className=\"tip-jar-wp-list-view-items-per-page\">\n\t\t\t\t\t<span>{ this.props.main_component.state.unique_settings.strings.uppercase_items  + ' ' + this.props.main_component.state.unique_settings.strings.lowercase_per + ' ' + this.props.main_component.state.unique_settings.strings.lowercase_page }</span>\n\t\t\t\t\t<input type=\"number\" min={ 1 } onChange={ this.handle_items_per_page_change.bind( this ) } value={ this.state.items_per_page } />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-list-view-pagination\">\n\t\t\t\t\t<span>{ this.props.main_component.state.unique_settings.strings.uppercase_page }</span>\n\t\t\t\t\t<input type=\"number\" min={ 1 } max={ this.get_total_pages() } onChange={ this.handle_page_number_change.bind( this ) } value={ this.state.current_page } />\n\t\t\t\t\t<span>{ ' ' + this.props.main_component.state.unique_settings.strings.lowercase_of + ' ' + this.get_total_pages() }</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\n\t}\n\n\trender_list_table() {\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"tip-jar-wp-list-view-table\">\n\t\t\t\t\t<div className=\"tip-jar-wp-list-view-table-header\">\n\t\t\t\t\t\t<div className=\"tip-jar-wp-list-view-header-row\">\n\t\t\t\t\t\t\t{ this.render_columns( this.props.columns ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"tip-jar-wp-list-view-body\">\n\t\t\t\t\t\t{ this.render_rows( this.props.rows, this.props.columns ) }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\t( () => {\n\t\t\t\t\t\tif ( 'fetching_data' === this.props.current_visual_state ) {\n\t\t\t\t\t\t\t// return ( <Tip_Jar_WP_Spinner /> );\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t</React.Fragment>\n\t\t);\n\n\t}\n\n\trender_list_view() {\n\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-list-view\">\n\t\t\t\t<div className=\"tip-jar-wp-list-view-before-controls\">\n\t\t\t\t\t{ this.render_search() }\n\t\t\t\t</div>\n\t\t\t\t{ this.render_list_table() }\n\t\t\t\t<div className=\"tip-jar-wp-list-view-after-controls\">\n\t\t\t\t\t{ this.render_pagination() }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\n\t}\n\n\trender() {\n\n\t\treturn (\n\t\t\t<div className={ 'tip-jar-wp-list-view' }>\n\t\t\t<div className=\"tip-jar-wp-list-view-content-area\">\n\n\t\t\t{ this.render_list_view() }\n\n\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\nexport default Tip_Jar_WP_List_View;\n","window.tip_jar_wp_pass_value_to_block = function tip_jar_wp_pass_value_to_block( main_component, editing_keys_arg, new_value, use_typing_delay = false ){\n\n\treturn new Promise( (resolve, reject) => {\n\n\t\tvar editing_keys = editing_keys_arg.split(\"/\");\n\t\tvar recreated_unique_settings = {\n\t\t\t...main_component.state.unique_settings\n\t\t};\n\n\t\t// The string path is sent in separated by slashes like this: strings/input_field_instructions/tip_amount/yo\n\n\t\t// Loop through each level, in regards to the main javascript object\n\t\tfor (var i = 1; i <= editing_keys.length; i++) {\n\n\t\t\t// Re-create that level...\n\t\t\tif ( 1 === i ) {\n\t\t\t\t// If we are on the last item, the one we want to change here...\n\t\t\t\tif ( i === editing_keys.length ) {\n\t\t\t\t\trecreated_unique_settings[editing_keys[0]] = new_value\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( 2 === i ) {\n\t\t\t\t// If we are on the last item, the one we want to change here...\n\t\t\t\tif ( i === editing_keys.length ) {\n\t\t\t\t\trecreated_unique_settings[editing_keys[0]][editing_keys[1]] = new_value\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( 3 === i ) {\n\t\t\t\t// If we are on the last item, the one we want to change here...\n\t\t\t\tif ( i === editing_keys.length ) {\n\t\t\t\t\trecreated_unique_settings[editing_keys[0]][editing_keys[1]][editing_keys[2]] = new_value\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( 4 === i ) {\n\t\t\t\t// If we are on the last item, the one we want to change here...\n\t\t\t\tif ( i === editing_keys.length ) {\n\t\t\t\t\trecreated_unique_settings[editing_keys[0]][editing_keys[1]][editing_keys[2]][editing_keys[3]] = new_value\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( 5 === i ) {\n\t\t\t\t// If we are on the last item, the one we want to change here...\n\t\t\t\tif ( i === editing_keys.length ) {\n\t\t\t\t\trecreated_unique_settings[editing_keys[0]][editing_keys[1]][editing_keys[2]][editing_keys[3]][editing_keys[4]] = new_value\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( 6 === i ) {\n\t\t\t\t// If we are on the last item, the one we want to change here...\n\t\t\t\tif ( i === editing_keys.length ) {\n\t\t\t\t\trecreated_unique_settings[editing_keys[0]][editing_keys[1]][editing_keys[2]][editing_keys[3]][editing_keys[4]][editing_keys[5]] = new_value\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( 7 === i ) {\n\t\t\t\t// If we are on the last item, the one we want to change here...\n\t\t\t\tif ( i === editing_keys.length ) {\n\t\t\t\t\trecreated_unique_settings[editing_keys[0]][editing_keys[1]][editing_keys[2]][editing_keys[3]][editing_keys[4]][editing_keys[5]][editing_keys[6]] = new_value\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\t// Pass the new value up to the Gutenberg attribute state...\n\t\tmain_component.props.editing_parent_component.onChangeHandler( recreated_unique_settings, use_typing_delay ).then( () => {\n\t\t\tresolve();\n\t\t\treturn;\n\t\t});\n\n\t});\n\n}\n","window.TipJarWPEditButton = class TipJarWPEditButton extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t};\n\n\t}\n\n\tmaybe_render_editing_lightbox() {\n\n\t\tvar EditingComponent = eval( this.props.component );\n\n\t\treturn(\n\t\t\t<Tip_Jar_WP_Modal\n\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\tslug={ this.props.editing_key }\n\t\t\t\tmodal_contents={\n\t\t\t\t\t<EditingComponent\n\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\tediting_key={ this.props.editing_key }\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n\n\tmaybe_render_edit_button() {\n\t\tif ( this.props.main_component.state.editing_mode ) {\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className=\"tip-jar-wp-edit-button-container\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\t\t\tonClick={ this.props.main_component.handle_visual_state_change_click_event.bind( null, false, {\n\t\t\t\t\t\t\t\t[this.props.editing_key]: {}\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttip_jar_wp_editing_strings.edit\n\t\t\t\t\t\t}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ this.maybe_render_editing_lightbox() }\n\t\t\t\t</React.Fragment>\n\t\t\t)\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\tthis.maybe_render_edit_button()\n\t\t)\n\t}\n\n}\nexport default TipJarWPEditButton;\n","/*\n * Tip Jar WP\n * https://www.tipjarwp.com\n *\n * Licensed under the GPL license.\n *\n * Author: Tip Jar WP\n * Version: 1.0\n * Date: April 18, 2018\n */\n\nwindow.Tip_Jar_WP_Top_Media = class Tip_Jar_WP_Top_Media extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\ttop_media_type: 'featured_image', // none, featured_image, featured_embed\n\t\t\tis_focused: false,\n\t\t\tfeatured_embed: '',\n\t\t\tfetched_oembed_html: '',\n\t\t\tfetching_oembed: true,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\n\t\tif ( this.props.main_component.state.unique_settings.top_media_type ) {\n\t\t\tthis.setState( {\n\t\t\t\ttop_media_type: this.props.main_component.state.unique_settings.top_media_type\n\t\t\t} );\n\t\t}\n\n\t\tif ( this.props.main_component.state.unique_settings.featured_embed ) {\n\t\t\tthis.setState( {\n\t\t\t\tfeatured_embed: this.props.main_component.state.unique_settings.featured_embed,\n\t\t\t\tfetched_oembed_html: this.props.main_component.state.unique_settings.fetched_oembed_html,\n\t\t\t}, () => {\n\t\t\t\tif ( ! this.state.fetched_oembed_html ) {\n\t\t\t\t\tthis.get_oembed();\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tfetching_oembed: false\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tget_oembed() {\n\n\t\tthis.setState( {\n\t\t\tfetching_oembed: true,\n\t\t} );\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', 'tip_jar_wp_get_oembed' );\n\t\t\tpostData.append('tip_jar_wp_oembed_string_source', decodeURI( this.state.featured_embed ) );\n\t\t\tpostData.append('tip_jar_wp_get_oembed_nonce', this.props.main_component.state.frontend_nonces.get_oembed_nonce);\n\n\t\t\t// Get the arrangements defined by the paramaters in the state\n\t\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_get_oembed', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode: \"same-origin\",\n\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\tbody: postData\n\t\t\t} ).then(\n\t\t\t\t( response ) => {\n\t\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tfetched_oembed_html: null,\n\t\t\t\t\t\t\tfetching_oembed: false,\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then(\n\t\t\t\t\t\t( data ) => {\n\t\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\tfetched_oembed_html: data.oembed_html,\n\t\t\t\t\t\t\t\t\tfetching_oembed: false,\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\tfetched_oembed_html:'',\n\t\t\t\t\t\t\t\t\tfetching_oembed: false,\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t).catch(\n\t\t\t\t\t\t( err ) => {\n\t\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tfetched_oembed_html:'',\n\t\t\t\t\t\t\t\tfetching_oembed: false,\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\tfunction( err ) {\n\t\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t\t\ttthis.setState( {\n\t\t\t\t\t\tfetched_oembed_html:'',\n\t\t\t\t\t\tfetching_oembed: false,\n\t\t\t\t\t}, () => {\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t);\n\n\t\t});\n\n\t}\n\n\tset_focus( should_be_focused, context, event ) {\n\t\tevent.preventDefault();\n\t\tthis.setState( {\n\t\t\tis_focused: should_be_focused\n\t\t}, () => {\n\n\t\t\tif ( ! should_be_focused ) {\n\t\t\t\tthis.get_oembed().then( () => {\n\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\ttop_media_editor_focused: should_be_focused\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\ttop_media_editor_focused: should_be_focused\n\t\t\t\t} );\n\t\t\t}\n\n\t\t});\n\t}\n\n\thandle_top_media_type_change( event ) {\n\t\tthis.setState( {\n\t\t\ttop_media_type: event.target.value\n\t\t}, () => {\n\t\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, 'top_media_type', this.state.top_media_type, false );\n\t\t} );\n\t}\n\n\thandle_featured_embed_change( event ) {\n\t\tthis.setState( {\n\t\t\tfeatured_embed: encodeURI( event.target.value )\n\t\t}, () => {\n\t\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, 'featured_embed', this.state.featured_embed, false );\n\t\t} );\n\t}\n\n\trender_edit_and_done_buttons() {\n\t\tif ( ! this.props.main_component.state.editing_mode ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-edit-button-container tip-jar-wp-edit-button-container-absolute\">\n\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( ! this.state.is_focused ) {\n\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.set_focus.bind( this, true, 'edit' ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.edit\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( this.state.is_focused ) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-view-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.set_focus.bind( this, false, 'view' ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.view\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_none() {\n\t\tif ( this.props.main_component.state.editing_mode ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"tip-jar-wp-logo\">\n\t\t\t\t\t<div className=\"tip-jar-wp-header-logo-container\">\n\t\t\t\t\t\t<div className=\"tip-jar-wp-header-logo-inner-bevel\"></div>\n\t\t\t\t\t\t<div className=\"tip-jar-wp-header-logo-img\"></div>\n\t\t\t\t\t\t{ this.render_edit_and_done_buttons() }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\trender_featured_embed() {\n\n\t\tif ( this.state.fetching_oembed ) {\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<Tip_Jar_WP_Spinner />\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\n\t\tif ( ! this.state.featured_embed ) {\n\t\t\treturn this.render_edit_and_done_buttons();\n\t\t}\n\n\t\t// Close the embed if the modal is closed.\n\t\tif ( ! this.props.main_component.state.editing_mode ) {\n\t\t\tif ( 'form' !== this.props.main_component.state.unique_settings.mode && 'in_modal' === this.props.main_component.state.unique_settings.open_style ) {\n\t\t\t\tif ( 0 === Object.entries(this.props.main_component.state.modal_visual_state).length ) {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar embed_attributes;\n\t\tvar width;\n\t\tvar height;\n\t\tvar src;\n\t\tvar use_padding_ratio = true;\n\n\t\t// If we don't need to go to the server for this oembed, don't!\n\t\tembed_attributes = decodeURI( this.state.featured_embed ).split(\" \");\n\n\t\t// If we do need to go to the server to get the oembed, do!\n\t\tif ( ! embed_attributes[0].includes(\"iframe\") ) {\n\t\t\tembed_attributes = this.state.fetched_oembed_html.split(\" \");\n\t\t}\n\n\t\tif ( ! embed_attributes[0].includes(\"iframe\") ) {\n\t\t\treturn this.render_edit_and_done_buttons();\n\t\t}\n\n\t\tif ( embed_attributes[0].includes(\"iframe\") ) {\n\t\t\tembed_attributes.forEach((attribute) => {\n\n\t\t\t\t// If this is the width attribute, get its value.\n\t\t\t\tif ( attribute.includes(\"width=\") ) {\n\t\t\t\t\twidth = attribute.split( '\"' );\n\t\t\t\t\tif ( attribute.includes(\"%\") ) {\n\t\t\t\t\t\tuse_padding_ratio = false;\n\t\t\t\t\t\twidth = width[1] ? parseInt( width[1], 10 ) + '%' : false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidth = width[1] ? parseInt( width[1], 10 ) : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If this is the height attribute, get its value.\n\t\t\t\tif ( attribute.includes(\"height=\") ) {\n\t\t\t\t\theight = attribute.split( '\"' );\n\t\t\t\t\tif ( attribute.includes(\"%\") ) {\n\t\t\t\t\t\tuse_padding_ratio = false;\n\t\t\t\t\t\theight = height[1] ? parseInt( height[1], 10 ) + '%' : false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\theight = height[1] ? parseInt( height[1], 10 ) : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If this is the src attribute, get its value.\n\t\t\t\tif ( attribute.includes(\"src=\") ) {\n\t\t\t\t\tsrc = attribute.split( '\"' );\n\t\t\t\t\tsrc = src[1] ? src[1] : false;\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\n\t\tif ( ! src ) {\n\t\t\treturn this.render_edit_and_done_buttons();\n\t\t}\n\n\t\tif ( use_padding_ratio ) {\n\t\t\t// Get the width-to-height ratio of the embedded content.\n\t\t\tvar width_height_ratio = ( width && height ? height/width : .56 )  * 100; // Default to 16x9 (9/16 = .56. We then remove the decimal and set padding-top to 56%);\n\t\t\tvar padding_top = width_height_ratio.toString() + '%';\n\t\t\twidth = 'inherit';\n\t\t\theight = 'inherit';\n\t\t} else {\n\t\t\tvar padding_top = '0';\n\t\t\twidth = width;\n\t\t\theight = height;\n\t\t}\n\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t\t<div\n\t\t\t\t\tclassName={ 'tip-jar-wp-featured-media-container' }\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tposition: 'relative',\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\tmargin: '0px auto',\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ this.render_edit_and_done_buttons() }\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={ 'tip-jar-wp-featured-media' }\n\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\tpadding: padding_top + ' 0 0 0',\n\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<iframe\n\t\t\t\t\t\t\t\tsrc={ src + '?test&rel=0' }\n\t\t\t\t\t\t\t\tallow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n\t\t\t\t\t\t\t\tallowFullScreen\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\n\t}\n\n\trender_featured_image() {\n\n\t\tif ( this.props.main_component.state.unique_settings.featured_image_url ) {\n\t\t\treturn (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className=\"tip-jar-wp-logo\">\n\t\t\t\t\t\t<div className=\"tip-jar-wp-header-logo-container\">\n\t\t\t\t\t\t\t<div className=\"tip-jar-wp-header-logo-inner-bevel\"></div>\n\t\t\t\t\t\t\t<div className=\"tip-jar-wp-header-logo-img\" style={ {\n\t\t\t\t\t\t\t\tbackgroundImage: 'url(' + this.props.main_component.state.unique_settings.featured_image_url + ')',\n\t\t\t\t\t\t\t} }></div>\n\t\t\t\t\t\t\t{ this.render_edit_and_done_buttons() }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\t)\n\t\t} else {\n\t\t\tif ( this.props.main_component.state.editing_mode ) {\n\t\t\t\treturn(\n\t\t\t\t\t<div className=\"tip-jar-wp-logo\">\n\t\t\t\t\t\t<div className=\"tip-jar-wp-header-logo-container\">\n\t\t\t\t\t\t\t<div className=\"tip-jar-wp-header-logo-inner-bevel\"></div>\n\t\t\t\t\t\t\t<div className=\"tip-jar-wp-header-logo-img\" style={ {\n\t\t\t\t\t\t\t\tbackgroundImage: 'url(' + this.props.main_component.state.unique_settings.featured_image_url + ')',\n\t\t\t\t\t\t\t} }></div>\n\t\t\t\t\t\t\t{ this.render_edit_and_done_buttons() }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n\n\tmaybe_render_featured_embed_input() {\n\t\tif ( 'featured_embed' !== this.state.top_media_type ) {\n\t\t\treturn '';\n\t\t}\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-description\">\n\t\t\t\t\t\tCopy and paste the embed code below:\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea value={ decodeURI( this.state.featured_embed ) } onChange={ this.handle_featured_embed_change.bind( this ) } />\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\tmaybe_render_featured_image_selector() {\n\t\tif ( 'featured_image' !== this.state.top_media_type ) {\n\t\t\treturn '';\n\t\t}\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-logo\">\n\t\t\t\t<div className=\"tip-jar-wp-header-logo-container\">\n\t\t\t\t\t<div className=\"tip-jar-wp-header-logo-inner-bevel\"></div>\n\t\t\t\t\t<div className=\"tip-jar-wp-header-logo-img\" style={ {\n\t\t\t\t\t\tbackgroundImage: 'url(' + this.props.main_component.state.unique_settings.featured_image_url + ')',\n\t\t\t\t\t} }></div>\n\t\t\t\t</div>\n\t\t\t\t<TipJarWPEditFileButton\n\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\tediting_key='featured_image_url'\n\t\t\t\t\tediting_string={ tip_jar_wp_editing_strings.choose_image }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_editing_focused_mode() {\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only tip-jar-wp-top-media-type-editor\">\n\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-header\">\n\t\t\t\t\t<span className=\"tip-jar-wp-edit-container-admin-only-title\">{ tip_jar_wp_editing_strings.media_above_payment_form }</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-body\">\n\t\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting\">\n\t\t\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-description\">\n\t\t\t\t\t\t\t{ tip_jar_wp_editing_strings.description_top_media_type }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-value\">\n\t\t\t\t\t\t\t<select onChange={ this.handle_top_media_type_change.bind( this ) } value={ this.state.top_media_type }>\n\t\t\t\t\t\t\t\t<option value=\"featured_image\">A logo/image</option>\n\t\t\t\t\t\t\t\t<option value=\"featured_embed\">An embed (YouTube, Soundcloud, etc)</option>\n\t\t\t\t\t\t\t\t<option value=\"none\">Nothing</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t{ this.maybe_render_featured_image_selector() }\n\t\t\t\t\t\t\t{ this.maybe_render_featured_embed_input() }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting\">\n\t\t\t\t\t\t<button type=\"button\" className=\"button\" onClick={ this.set_focus.bind( this, false, 'view' ) }>{ tip_jar_wp_editing_strings.view }</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\n\t\tif ( this.state.is_focused ) {\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t{ this.render_editing_focused_mode() }\n\t\t\t\t</React.Fragment>\n\t\t\t)\n\t\t} else {\n\t\t\tif ( 'none' === this.state.top_media_type ) {\n\t\t\t\treturn this.render_none();\n\t\t\t}\n\n\t\t\tif ( 'featured_image' === this.state.top_media_type ) {\n\t\t\t\treturn(\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t{ this.render_featured_image() }\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif ( 'featured_embed' === this.state.top_media_type ) {\n\t\t\t\treturn(\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t{ this.render_featured_embed() }\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * Format a unix timestamp (UTC) into a date (Jan 1, 1970) in the user's local timezone and locale.\n *\n * @since    1.0.0\n * @param    string date_string\n * @return   string\n */\nwindow.tip_jar_wp_format_date = function tip_jar_wp_format_date( date_string ) {\n\tvar date = new Date( date_string.replace(/\\s/, 'T') + 'Z' );\n\n\tif ( 'Invalid Date' == date ) {\n\t\treturn date_string;\n\t}\n\n\treturn date.toLocaleDateString();\n}\n\n/**\n * Format a unix timestamp (UTC) into a time (00:00:00) in the user's local timezone and locale.\n *\n * @since    1.0.0\n * @param    string date_string\n * @return   string\n */\nwindow.tip_jar_wp_format_time = function tip_jar_wp_format_time( date_string ) {\n\tvar date = new Date( date_string.replace(/\\s/, 'T') + 'Z' );\n\n\tif ( 'Invalid Date' == date ) {\n\t\treturn date_string;\n\t}\n\n\treturn date.toLocaleTimeString() + ' (' + date.toLocaleTimeString( navigator.language,{timeZoneName:'short'}).split(' ')[2] + ')';\n}\n\n/**\n * Format a unix timestamp (UTC) into a date and time (Jan 1, 1970, 00:00:00) in the user's local timezone and locale.\n *\n * @since    1.0.0\n * @param    string date_string\n * @return   string\n */\nwindow.tip_jar_wp_format_date_and_time = function tip_jar_wp_format_date_and_time( date_string ) {\n\tvar date = new Date( date_string.replace(/\\s/, 'T') + 'Z' );\n\n\tif ( 'Invalid Date' == date ) {\n\t\treturn date_string;\n\t}\n\n\treturn date.toLocaleString() + ' (' + date.toLocaleTimeString( navigator.language,{timeZoneName:'short'}).split(' ')[2] + ')';\n}\n\n/**\n * Takes a date value array from a Tip Jar WP list view component, passes it to tip_jar_wp_format_date, and returns it.\n *\n * @since    1.0.0\n * @param    array data\n * @return   string\n */\nwindow.tip_jar_wp_list_view_format_date = function tip_jar_wp_list_view_format_date( data ) {\n\treturn tip_jar_wp_format_date( data['value'] );\n}\n\n/**\n * Format a money amount properly for the user's locale.\n *\n * @since    1.0.0\n * @param    int cents\n * @param    string currency\n * @param    bool is_zero_decimal_currency\n * @param    string string_after\n * @return   string\n */\nwindow.tip_jar_wp_format_money = function tip_jar_wp_format_money( cents, currency, is_zero_decimal_currency, string_after ) {\n\n\t\t// If this is a zero-decimal currency\n\t\tif ( is_zero_decimal_currency ) {\n\t\t\tvar formatted_amount = Number( cents );\n\t\t}\n\t\t// If this is not a zero decimal currency\n\t\telse {\n\t\t\tvar formatted_amount = Number( cents ) / 100;\n\t\t}\n\n\t\t// Format the currency based on the site's locale. This allows commas to be used as the decimal seperator, which is technically a translation.\n\t\tformatted_amount = new Intl.NumberFormat(navigator.language,{ style: 'currency', currency: currency }).format(formatted_amount);\n\n\t\treturn formatted_amount + string_after;\n}\n\n/**\n * Takes a value array from a Tip Jar WP list view component, passes it to tip_jar_wp_format_visual_amount, and returns it.\n *\n * @since    1.0.0\n * @param    array data\n * @return   string\n */\nwindow.tip_jar_wp_list_view_format_money = function tip_jar_wp_list_view_format_money( data ) {\n\treturn tip_jar_wp_format_money( data['cents'], data['currency'], data['is_zero_decimal_currency'], data['string_after'] );\n}\n\nwindow.tip_jar_wp_get_current_view_class = function tip_jar_wp_get_current_view_class( component, views_in_question ) {\n\n\tvar currently_in_view_class_name = 'tip-jar-wp-current-view';\n\tvar hidden_class_name = 'tip-jar-wp-hidden-view';\n\tvar at_least_one_in_view = false;\n\n\tfor (var i = 0; i < views_in_question.length; i++) {\n\t\t// If the current visual state matches the view we are getting the class for\n\t\tif( component.state.current_visual_state == views_in_question[i] ) {\n\n\t\t\tvar at_least_one_in_view = true;\n\n\t\t}\n\t}\n\n\tif ( at_least_one_in_view ) {\n\t\treturn ' ' + currently_in_view_class_name;\n\t} else {\n\t\treturn ' ' + hidden_class_name;\n\t}\n\n}\n\n// Convert a string to a bool\nwindow.tip_jar_wp_string_to_bool = function tip_jar_wp_string_to_bool( the_string ) {\n\n\t// Convert the local storage from string to bool so we can compare them\n\tif ( the_string == 'true' ){\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\n// Validate an email address is the expected format for an email address\nwindow.tip_jar_wp_validate_email = function tip_jar_wp_validate_email( email ) {\n\tvar re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn re.test(String(email).toLowerCase());\n}\n\n// Returns the character to use as a decimal separator when displaying money based on the user's browser's locale.\nwindow.tip_jar_wp_get_decimal_character_for_locale = function tip_jar_wp_get_decimal_character_for_locale() {\n\tvar mock_price = new Intl.NumberFormat({ style: 'currency', currency: 'USD' }).format(0);\n\n\tif ( mock_price.includes(\",\") ) {\n\t\tdecimal_character = ',';\n\t}\n\n\tif ( mock_price.includes(\".\") ) {\n\t\tdecimal_character = '.';\n\t}\n\n\treturn decimal_character;\n}\n\n// Accepts an all visual states object, a visual tree object acting as a map for the location of the component in question, and a boolean\n// It then recursively goes throguh the component tree object, checking if\nfunction tip_jar_wp_visual_state_should_become( all_current_visual_states, map_of_visual_states, visual_state_should_become, default_visual_state ) {\n\n\t// The component tree is a \"map\" that tells use where this component lives within the parent\n\tfor ( var level in map_of_visual_states ) {\n\t\t// If the current component's top-level parent is set in the current visual states object, great! Keep going.\n\t\tif ( all_current_visual_states[level] ) {\n\n\t\t\t// If there are other components ahead of this component in the tree\n\t\t\tif ( typeof map_of_visual_states[level] !== 'undefined' && typeof map_of_visual_states[level] === 'object' && Object.keys(map_of_visual_states[level]).length !== 0){\n\t\t\t\t// Recursively nest down into the next parent component to see if it is set in the current visual states object.\n\t\t\t\tvisual_state_should_become = tip_jar_wp_visual_state_should_become( all_current_visual_states[level], map_of_visual_states[level], visual_state_should_become, default_visual_state );\n\t\t\t} else {\n\n\t\t\t\t// If we are at the end of the component tree, and the component level is in the current visual states object, it's in view!\n\t\t\t\tvisual_state_should_become = level;\n\n\t\t\t}\n\t\t} else if ( 'variable' === level ) {\n\n\t\t\t// If we are at the end of the component tree, and the component level is variable, grab the value from the master view object at this level\n\t\t\tif ( Object.keys(all_current_visual_states)[0] ) {\n\t\t\t\tvisual_state_should_become = Object.keys(all_current_visual_states)[0];\n\t\t\t} else {\n\t\t\t\tvisual_state_should_become = default_visual_state;\n\t\t\t}\n\n\t\t} else {\n\t\t\tvisual_state_should_become = default_visual_state;\n\t\t}\n\n\t}\n\n\treturn visual_state_should_become;\n}\n\nwindow.tip_jar_wp_set_visual_state_of_component = function tip_jar_wp_set_visual_state_of_component( settings ) {\n\n\treturn new Promise( (resolve, reject) => {\n\n\t\t// If we don't have the variables we require, fail.\n\t\tif ( ! settings.component ) {\n\t\t\tthrow new Error( 'The function \"tip_jar_wp_set_visual_state_of_component\" is missing required variables' );\n\t\t}\n\n\t\tif ( ! settings.component.props.main_component.state.all_current_visual_states ) {\n\t\t\tthrow new Error( 'A visual states object is required.' );\n\t\t}\n\n\t\tif ( ! settings.component.state.map_of_visual_states ) {\n\t\t\tthrow new Error( 'The component must have a map of the view states stored in the state with the key \"map_of_visual_states\"' );\n\t\t}\n\n\t\tvar new_map_of_visual_states = tip_jar_wp_get_default_map_of_visual_states( settings.component.state.map_of_visual_states, settings.default_visual_state );\n\n\t\t// Figure out if the parent component is in view\n\t\tfor ( var level in settings.component.props.main_component.state.all_current_visual_states ) {\n\t\t\tif ( ! new_map_of_visual_states[level] ) {\n\t\t\t\tparent_component_is_in_view = false;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tparent_component_is_in_view = true;\n\t\t\t}\n\t\t}\n\n\t\t// If the parent component is in view, just set it to a default and do nothing else\n\t\tif ( ! parent_component_is_in_view ) {\n\t\t\tvar visual_state_should_become = settings.default_visual_states.parent_not_in_view;\n\t\t} else {\n\t\t\tvar visual_state_should_become = tip_jar_wp_visual_state_should_become( settings.component.props.main_component.state.all_current_visual_states, settings.component.state.map_of_visual_states, false, settings.default_visual_states.parent_in_view );\n\t\t}\n\n\t\t// If the state of the component is already the current state in the master visual states object, do nothing.\n\t\tif ( settings.component.state[settings.name_of_visual_state_variable] == visual_state_should_become ) {\n\n\t\t\tresolve( visual_state_should_become );\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\tif ( ! visual_state_should_become ) {\n\n\t\t\t\tsettings.component.setState( {\n\t\t\t\t\t[settings.name_of_visual_state_variable]: settings.default_visual_states.parent_not_in_view\n\t\t\t\t}, function() {\n\t\t\t\t\t//console.log( 'setting default state to: ' + settings.default_visual_states.parent_not_in_view + ' where default was ' + settings.default_visual_states.parent_in_view );\n\t\t\t\t\tresolve( settings.default_visual_states.parent_not_in_view );\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\tsettings.component.setState( {\n\t\t\t\t\t[settings.name_of_visual_state_variable]: visual_state_should_become\n\t\t\t\t}, function() {\n\t\t\t\t\t//console.log( 'setting visual state to: ' + visual_state_should_become + ' where default was ' + settings.default_visual_states.parent_in_view );\n\t\t\t\t\tresolve( visual_state_should_become );\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t});\n\n}\n\nfunction tip_jar_wp_get_default_map_of_visual_states( map_of_visual_states, default_visual_state, new_map_of_visual_states = {}, previous_level = false ) {\n\n\tfor ( var level in map_of_visual_states ) {\n\n\t\t// If there's another level, keep going\n\t\tif ( typeof map_of_visual_states[level] !== 'undefined' && typeof map_of_visual_states[level] === 'object' && Object.keys(map_of_visual_states[level]).length !== 0) {\n\n\t\t\t// If we at a level great than 1\n\t\t\tif ( previous_level ) {\n\t\t\t\tvar temp = {};\n\t\t\t\ttemp[level] = {};\n\t\t\t\tnew_map_of_visual_states[previous_level] = tip_jar_wp_get_default_map_of_visual_states( map_of_visual_states[level], default_visual_state, temp, level );\n\t\t\t}\n\t\t\t// If we are at the top level\n\t\t\telse {\n\t\t\t\tnew_map_of_visual_states[level] = {};\n\t\t\t\tnew_map_of_visual_states = tip_jar_wp_get_default_map_of_visual_states( map_of_visual_states[level], default_visual_state, new_map_of_visual_states, level );\n\t\t\t}\n\n\t\t\treturn new_map_of_visual_states;\n\t\t}\n\t\t// If the last level is reached and it's variable, or empty, set it to the default state and be done. No more nesting and looping.\n\t\telse if ( 'variable' === level || 0 === Object.keys(map_of_visual_states[level]).length) {\n\t\t\tnew_map_of_visual_states[previous_level][default_visual_state] = {};\n\t\t\treturn new_map_of_visual_states;\n\t\t}\n\t\t// If there's no more levels, and the last level isn't \"variable\", set it to the current level and be done. No more nesting and looping.\n\t\telse {\n\t\t\tnew_map_of_visual_states[previous_level][level] = {};\n\t\t\treturn new_map_of_visual_states;\n\t\t}\n\t}\n\n}\n","window.Tip_Jar_WP_File_Download_Button = class Tip_Jar_WP_File_Download_Button extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\n\t}\n\n\thandleSubmit( event ){\n\n\t\tvar modify_state;\n\n\t\tevent.preventDefault();\n\n\t\t// Should we modify the state of the Card Form?\n\t\tif ( this.props.card_form ) {\n\t\t\tmodify_state = true;\n\t\t} else {\n\t\t\tmodify_state = false;\n\t\t}\n\n\t\t// Validate any fields that are required (email, terms, etc)\n\t\tvar allow_form_to_be_submitted = this.validate_file_download_form( modify_state );\n\n\t\t// Prevent the form submission if a field didn't validate\n\t\tif ( ! allow_form_to_be_submitted ) {\n\n\t\t\tthis.setState( {\n\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t}, () => {\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\t// Set the visual state to be \"free_file_download_completion\"\n\t\t\tthis.props.main_component.set_all_current_visual_states(\n\t\t\t\t{\n\t\t\t\t\tpayment: {\n\t\t\t\t\t\tfree_file_download_completion: {}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\tvalidate_file_download_form( modify_state = true ) {\n\n\t\tvar all_fields_validate = true;\n\n\t\t// Email field\n\t\tif ( ! this.props.email_validated ) {\n\t\t\tall_fields_validate = false;\n\t\t}\n\n\t\t// Privacy Policy\n\t\tif ( this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_body ) {\n\t\t\tif ( ! this.props.privacy_policy_validated ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( modify_state ) {\n\n\t\t\tthis.props.card_form.setState( {\n\t\t\t\tform_validation_attempted: true\n\t\t\t} );\n\n\t\t\tif ( ! all_fields_validate ) {\n\n\t\t\t\tthis.props.card_form.setState( {\n\t\t\t\t\tform_has_any_error: true,\n\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.props.card_form.setState( {\n\t\t\t\t\tform_has_any_error: false,\n\t\t\t\t\tcurrent_payment_state: 'initial',\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\trender() {\n\n\t\tif (\n\t\t\t! this.props.main_component.state.unique_settings.file_download_attachment_data ||\n\t\t\t! this.props.main_component.state.unique_settings.file_download_attachment_data.file_download_mode_enabled\n\t\t) {\n\t\t\treturn '';\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={ this.handleSubmit.bind( this ) }\n\t\t\t\t\t\tclassName={ 'tip-jar-wp-pay-button' }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ this.props.main_component.state.unique_settings.strings.download_file_button_text }\n\t\t\t\t\t</button>\n\t\t\t)\n\t\t}\n\t}\n}\n","window.Tip_Jar_WP_File_Download_Completion = class Tip_Jar_WP_File_Download_Completion extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdelivery_mode: null, // check_your_email, download\n\t\t\tinstructions_title: null,\n\t\t\tinstructions_description: null,\n\t\t};\n\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.get_file_download();\n\t}\n\n\tget_file_download() {\n\n\t\tvar is_ios_Device = !!navigator.platform.match(/iPhone|iPod|iPad/);\n\n\t\tif ( is_ios_Device ) {\n\t\t\tthis.setState( {\n\t\t\t\tdelivery_mode: 'download_file',\n\t\t\t\tinstructions_title: 'Your device does not allow file downloads.',\n\t\t\t\tinstructions_description: 'File could not be downloaded on this device. Please try again on a device that allows downloading files.',\n\t\t\t} );\n\n\t\t\treturn false;\n\t\t}\n\n\t\tvar this_component = this;\n\t\tvar transaction_id = this.props.main_component.state.current_transaction_info ? this.props.main_component.state.current_transaction_info.transaction_id : null;\n\t\tvar form_id = transaction_id ? null : this_component.props.main_component.state.unique_settings.id;\n\t\tvar endpoint = null;\n\n\t\t// Transaction File Download Endpoint.\n\t\tif ( transaction_id ) {\n\n\t\t\tendpoint = 'tip_jar_wp_get_transaction_file_download_url';\n\n\t\t\t// Use ajax to do the stripe transaction on the server using this data.\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', endpoint );\n\t\t\tpostData.append('tip_jar_wp_transaction_id', transaction_id );\n\t\t\tpostData.append('tip_jar_wp_session_id', this.props.main_component.state.session_id ? this.props.main_component.state.session_id : 0);\n\t\t\tpostData.append('tip_jar_wp_user_id', this.props.main_component.state.user_id);\n\t\t\tpostData.append('tip_jar_wp_file_download_nonce', this_component.props.main_component.state.frontend_nonces.file_download_nonce);\n\n\t\t\t// Free File Download endpoint.\n\t\t} else {\n\n\t\t\tendpoint = 'tip_jar_wp_get_free_file_download_url';\n\n\t\t\t// Use ajax to do the stripe transaction on the server using this data.\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', endpoint );\n\t\t\tpostData.append('tip_jar_wp_email', this_component.props.main_component.state.form_email_value);\n\t\t\tpostData.append('tip_jar_wp_page_url', this_component.props.main_component.state.single_page_app_base_url);\n\t\t\tpostData.append('tip_jar_wp_form_id', form_id );\n\t\t\tpostData.append('tip_jar_wp_file_download_nonce', this_component.props.main_component.state.frontend_nonces.file_download_nonce);\n\t\t}\n\n\t\t// Do the file downnload on the server, and get the file URL in the fetched response.\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?' + endpoint, {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tdelivery_mode: 'failed',\n\t\t\t\t\t\tmessage: response.status\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\tif ( 'download_file' === data.success_code ) {\n\n\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\tdelivery_mode: 'download_file',\n\t\t\t\t\t\t\t\t\tinstructions_title: data.instructions_title,\n\t\t\t\t\t\t\t\t\tinstructions_description: data.instructions_description,\n\t\t\t\t\t\t\t\t\tmessage: data.details\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\t// Redirect the user to the file being downloaded.\n\t\t\t\t\t\t\t\t\twindow.location = data.url;\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( 'check_your_email' === data.success_code ) {\n\t\t\t\t\t\t\t\t// Redirect the user to the file being downloaded.\n\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\tdelivery_mode: 'check_your_email',\n\t\t\t\t\t\t\t\t\tinstructions_title: data.instructions_title,\n\t\t\t\t\t\t\t\t\tinstructions_description: data.instructions_description,\n\t\t\t\t\t\t\t\t\tmessage: data.details,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tdelivery_mode: 'failed',\n\t\t\t\t\t\t\t\tmessage: data.details\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\n\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\tdelivery_mode: 'failed',\n\t\t\t\t\t\t\tmessage: err\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tdelivery_mode: 'failed',\n\t\t\t\t\tmessage: err\n\t\t\t\t} );\n\n\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\thandleFileDownloadClick( event ){\n\n\t\tevent.preventDefault();\n\t\tthis.get_file_download();\n\n\t}\n\n\trender() {\n\n\t\tif ( ! this.state.delivery_mode ) {\n\t\t\treturn 'loading...';\n\t\t}\n\n\t\tif ( 'failed' === this.state.delivery_mode ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'tip-jar-wp-payment-box-view tip-jar-wp-payment-confirmation-view' }>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tNo download found.\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={ this.props.main_component.set_all_current_visual_states.bind( null, {\n\t\t\t\t\t\t\tpayment: {}\n\t\t\t\t\t\t}, false ) }\n\t\t\t\t\t>Back to payment form</button>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"tip-jar-wp-file-download-instructions-title\">\n\t\t\t\t\t{ this.state.instructions_title }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-file-download-instructions-description\">\n\t\t\t\t\t{ this.state.instructions_description }\n\t\t\t\t</div>\n\n\t\t\t\t{(() => {\n\t\t\t\t\tif ( 'check_your_email' === this.state.delivery_mode ) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{ this.state.message }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className='tip-jar-wp-receipt-action-button'>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.handleFileDownloadClick.bind( this ) }\n\t\t\t\t\t\t\t\t\tclassName={ 'tip-jar-wp-pay-button' }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ this.props.main_component.state.unique_settings.strings.download_file_button_text }\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t})()}\n\t\t\t</div>\n\t\t)\n\n\t\treturn this.state.mode;\n\t}\n}\n","/*\n * Tip Jar WP\n * https://www.tipjarwp.com\n *\n * Licensed under the GPL license.\n *\n * Author: Tip Jar WP\n * Version: 1.0\n * Date: April 18, 2018\n */\n\nwindow.Tip_Jar_WP_Form = class Tip_Jar_WP_Form extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tediting_mode: false,\n\t\t\tshow_edit_display_mode: true,\n\t\t\tediting_lightbox_active: false,\n\t\t\tall_initial_visual_states: {\n\t\t\t\tpayment: {}\n\t\t\t},\n\t\t\tall_current_visual_states: this.props.all_current_visual_states, // This is an object containing the entire visual state for the Single Page App\n\t\t\tmodal_visual_state: this.props.dynamic_settings.modal_visual_state,\n\t\t\tsingle_page_app_base_url: this.props.dynamic_settings.wordpress_permalink_only,\n\t\t\tdom_node: null,\n\n\t\t\tuser_id: null,\n\t\t\tfrontend_nonces: this.props.frontend_nonces\n\t\t};\n\n\t\tthis.get_current_view_class = this.get_current_view_class.bind( this );\n\t\tthis.set_all_current_visual_states = this.set_all_current_visual_states.bind( this );\n\t\tthis.handle_visual_state_change_click_event = this.handle_visual_state_change_click_event.bind( this );\n\n\t}\n\n\tcomponentDidMount() {\n\n\t\t// Set the initial view state based on the initialization props\n\t\tthis.setState( {\n\t\t\tediting_mode: this.props.editing_mode ? true : false,\n\t\t\tunique_settings: this.props.unique_settings,\n\t\t\tdynamic_settings: this.props.dynamic_settings,\n\t\t\tfrontend_nonces: this.props.frontend_nonces,\n\t\t\tall_initial_visual_states: this.props.all_current_visual_states,\n\t\t\tall_current_visual_states: this.props.all_current_visual_states,\n\t\t\tmodal_visual_state: this.props.dynamic_settings.modal_visual_state,\n\t\t\tinitial_modal_visual_state: this.props.dynamic_settings.modal_visual_state,\n\t\t\tshow_edit_display_mode: this.props.show_edit_display_mode,\n\t\t}, function() {\n\n\t\t\t// If the URL in the browser's address bar doesn't match what the initial state is for some reason, adjust the browser's history so it's right\n\t\t\t//this.set_all_current_visual_states( this.state.all_initial_visual_states );\n\n\t\t} );\n\n\t\t// Prevent scroll jumps upon back button clicks\n\t\tif ('scrollRestoration' in history) {\n\t\t\thistory.scrollRestoration = 'manual';\n\t\t}\n\n\t\t// Create an event listener to respond to back button clicks\n\t\twindow.addEventListener('popstate', (e) => {\n\t\t\tthis.on_web_history_change( e, this );\n\t\t});\n\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.maybe_refresh_parent_dom_node();\n\n\t\tif (\n\t\t\tthis.props.unique_settings !== this.state.unique_settings ||\n\t\t\tthis.props.dynamic_settings !== this.state.dynamic_settings ||\n\t\t\t( (false === this.props.editing_mode || true === this.props.editing_mode ) && this.props.editing_mode !== this.state.editing_mode )\n\t\t) {\n\t\t\tthis.setState( {\n\t\t\t\tediting_mode: this.props.editing_mode ? true : false,\n\t\t\t\tunique_settings: this.props.unique_settings,\n\t\t\t\tdynamic_settings: this.props.dynamic_settings,\n\t\t\t\tall_current_visual_states: this.props.all_current_visual_states,\n\t\t\t\tmodal_visual_state: this.props.dynamic_settings.modal_visual_state,\n\t\t\t}, () => {\n\t\t\t\tthis.set_all_current_visual_states( this.state.all_current_visual_states, this.state.modal_visual_state );\n\t\t\t} );\n\t\t}\n\t}\n\n\tmaybe_refresh_parent_dom_node() {\n\n\t\t/*\n\t\tif ( this.state.dom_node !== ReactDOM.findDOMNode(this).parentNode ) {\n\t\t\tthis.setState( {\n\t\t\t\tdom_node: ReactDOM.findDOMNode(this).parentNode\n\t\t\t} );\n\t\t}\n\t\t*/\n\n\t}\n\n\ton_web_history_change( e, this_component ) {\n\n\t\tvar history_state = e.state;\n\n\t\t// If there's no state in the back button, we're in the initial state.\n\t\tif (history_state == null) {\n\t\t\tthis_component.setState( {\n\t\t\t\t'all_current_visual_states': this_component.state.all_initial_visual_states,\n\t\t\t\t'modal_visual_state': this_component.state.initial_modal_visual_state\n\t\t\t} );\n\t\t}\n\t\t// If there is a state in the history, set the current state to that\n\t\telse {\n\t\t\tthis_component.setState( {\n\t\t\t\t'all_current_visual_states': history_state.tip_jar_wp_visual_state,\n\t\t\t\t'modal_visual_state': history_state.tjwpmodal_visual_state\n\t\t\t} );\n\t\t}\n\n\t}\n\n\tget_current_view_class( view_in_question ) {\n\n\t\tvar currently_in_view_class_name = 'tip-jar-wp-current-view';\n\t\tvar hidden_class_name = 'tip-jar-wp-hidden-view';\n\t\tvar current_visual_state = Object.keys(this.state.all_current_visual_states)[0]; // This grabs the name of the the first key, which is the visual state of this component\n\n\t\t// If the current visual state matches the view we are getting the class for\n\t\tif( current_visual_state == view_in_question ) {\n\n\t\t\treturn ' ' + currently_in_view_class_name;\n\n\t\t} else {\n\n\t\t\treturn ' ' + hidden_class_name;\n\n\t\t}\n\n\t}\n\n\tget_featured_image_class() {\n\n\t\tif (\n\t\t\t! this.state.top_media_editor_focused &&\n\t\t\t(\n\t\t\t\t// If there is a featured image url, AND there is NOT a top media type (like it was before top media types became a thing)\n\t\t\t\t( this.state.unique_settings.featured_image_url && ! this.state.unique_settings.top_media_type ) || // This is a legacy check for before featured media was added.\n\t\t\t\t'none' !== this.state.unique_settings.top_media_type\n\t\t\t)\n\t\t) {\n\n\t\t\treturn ' tip-jar-wp-has-featured-media';\n\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\n\t}\n\n\tbuild_new_url_path( obj, new_url_path, depth ) {\n\t\tdepth = depth + 1;\n\t\tvar prefix = 1 == depth ? 'tjwp' : '&tjwp';\n\t\tfor (var component_visual_state in obj) {\n\t\t\t\tnew_url_path = this.build_new_url_path(obj[component_visual_state], new_url_path + prefix + depth + '=' + component_visual_state, depth );\n\t\t}\n\t\treturn new_url_path;\n\t}\n\n\thandle_visual_state_change_click_event( new_state, new_modal_state, event ) {\n\t\tthis.set_all_current_visual_states( new_state, new_modal_state );\n\t}\n\n\tset_all_current_visual_states( new_state = false, new_modal_state = false ) {\n\n\t\tvar in_initial_state = false;\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\t// If the URL is an empty object, set it to the initial state\n\t\t\tif ( Object.entries(new_state).length === 0 && new_state.constructor === Object ) {\n\t\t\t\tnew_state = this.state.all_initial_visual_states;\n\t\t\t\tin_initial_state = true;\n\t\t\t}\n\n\t\t\t// If no new state was passed, we're probably just updating the modal state.\n\t\t\tif ( ! new_state ) {\n\t\t\t\tnew_state = this.state.all_current_visual_states;\n\t\t\t}\n\n\t\t\t// If no modal state was passed, we probably are just updating the main state.\n\t\t\tif ( ! new_modal_state ) {\n\t\t\t\tnew_modal_state = this.state.modal_visual_state;\n\t\t\t}\n\n\t\t\tthis.setState( {\n\t\t\t\tall_current_visual_states: new_state,\n\t\t\t\tmodal_visual_state: new_modal_state\n\t\t\t}, () => {\n\n\t\t\t\t// New URL, make sure it handles URLs with and without a trailing slash\n\t\t\t\tif ( this.state.dynamic_settings.wordpress_permalink_only.includes(\"?\") ) {\n\t\t\t\t\tvar new_url_prefix = this.state.dynamic_settings.wordpress_permalink_only + '&';\n\t\t\t\t} else {\n\t\t\t\t\tvar new_url_prefix = this.state.dynamic_settings.wordpress_permalink_only + '?';\n\t\t\t\t}\n\n\t\t\t\tvar new_url = new_url_prefix + this.build_new_url_path( this.state.all_current_visual_states, '', 0 );\n\n\t\t\t\t// If there is a modal open, add it to the end of the URL\n\t\t\t\tif ( Object.keys(this.state.modal_visual_state)[0] ) {\n\t\t\t\t\tnew_url = new_url + '&tjwpmodal=' + Object.keys(this.state.modal_visual_state)[0];\n\t\t\t\t}\n\n\t\t\t\t// Take a snapshot of the current visual state and add it to the web history\n\t\t\t\tif ( in_initial_state ) {\n\t\t\t\t\thistory.pushState({\n\t\t\t\t\t\ttip_jar_wp_visual_state: this.state.all_current_visual_states,\n\t\t\t\t\t\ttjwpmodal_visual_state: this.state.modal_visual_state\n\t\t\t\t\t}, new_state, this.state.dynamic_settings.wordpress_permalink_only);\n\t\t\t\t} else {\n\t\t\t\t\thistory.pushState({\n\t\t\t\t\t\ttip_jar_wp_visual_state: this.state.all_current_visual_states,\n\t\t\t\t\t\ttjwpmodal_visual_state: this.state.modal_visual_state\n\t\t\t\t\t}, new_state, new_url);\n\t\t\t\t}\n\n\t\t\t\tresolve( new_state );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\trender_top_media() {\n\t\treturn(\n\t\t\t<Tip_Jar_WP_Top_Media\n\t\t\t\tmain_component={ this }\n\t\t\t/>\n\t\t)\n\t}\n\n\trender() {\n\n\t\t// Checks for HTTPS from the browser\n\t\tif ( window.location.protocol != \"https:\" ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'tip-jar-wp-container' }>\n\t\t\t\t\tYou must have an SSL certificate in order to accept payments on your website. Contact your webhost to have them install an SSL certificate on your website.\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\telse if ( ! this.state.all_current_visual_states || ! this.state.unique_settings ) {\n\t\t\treturn( <Tip_Jar_WP_Spinner /> );\n\t\t}\n\t\telse if (\n\t\t\t! this.state.dynamic_settings.stripe_api_key ||\n\t\t\t! this.state.unique_settings.currency_code\n\t\t) {\n\n\t\t\treturn (\n\t\t\t\t<div className={ 'tip-jar-wp-container' }>\n\t\t\t\t\t<div className={ 'tip-jar-wp-fancy-container tip-jar-wp-payment-view'}>\n\t\t\t\t\t\t<div className=\"tip-jar-wp-component-box\">\n\n\t\t\t\t\t\t\t<header className=\"tip-jar-wp-header\" role=\"banner\">\n\t\t\t\t\t\t\t\t<h1 className=\"tip-jar-wp-header-title\">Complete Set Up</h1>\n\t\t\t\t\t\t\t\t<h2 className={ 'tip-jar-wp-header-subtitle' }>You are almost ready to start accepting payments right here, using Tip Jar WP and Stripe. Click the link below to complete the set-up.</h2>\n\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t<div className=\"tip-jar-wp-payment-form-container\">\n\t\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-payment-box-view' }>\n\t\t\t\t\t\t\t\t\t<a href={ this.state.dynamic_settings.setup_link.replace(/&amp;/g, '&') }>Complete Tip Jar WP Setup</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tvar tip_jar_wp_open_link = false;\n\t\t\tvar modal_array = false;\n\t\t\tvar tip_jar_wp_form = false;\n\n\t\t\tif ( 'in_modal' === this.state.unique_settings.open_style ) {\n\t\t\t\tmodal_array = {\n\t\t\t\t\ttjwp: {}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmodal_array = false;\n\t\t\t}\n\n\t\t\tif ( 'text_link' === this.state.unique_settings.mode ) {\n\t\t\t\ttip_jar_wp_open_link = (\n\t\t\t\t\t<a className={ 'tip-jar-wp-a-tag' } onClick={ this.handle_visual_state_change_click_event.bind( null, {\n\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\tform: {}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, modal_array ) }>{ this.state.unique_settings.strings.link_text }</a>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( 'button' === this.state.unique_settings.mode ) {\n\t\t\t\ttip_jar_wp_open_link = (\n\t\t\t\t\t<button type=\"button\" className={ 'button tip-jar-wp-button' } onClick={ this.handle_visual_state_change_click_event.bind( null, {\n\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\tform: {}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, modal_array ) }>{ this.state.unique_settings.strings.link_text }</button>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\ttip_jar_wp_form = (\n\t\t\t\t<div className={ 'tip-jar-wp-container tip-jar-wp-current-view-is-' + Object.keys(this.state.all_current_visual_states)[0] }>\n\n\t\t\t\t\t{ this.render_top_media() }\n\n\t\t\t\t\t<div className={ 'tip-jar-wp-fancy-container tip-jar-wp-payment-view' + this.get_current_view_class( 'payment' ) + this.get_featured_image_class() }>\n\n\t\t\t\t\t\t<Tip_Jar_WP_Payment_Box\n\t\t\t\t\t\t\tmain_component={ this }\n\t\t\t\t\t\t\tshow_close_button={\n\t\t\t\t\t\t\t\t! this.state.editing_mode &&\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t'button' === Object.keys(this.state.all_initial_visual_states)[0] ||\n\t\t\t\t\t\t\t\t\t'text_link' === Object.keys(this.state.all_initial_visual_states)[0] ||\n\t\t\t\t\t\t\t\t\t'in_modal' === this.state.unique_settings.open_style\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t? true : false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={ 'tip-jar-wp-fancy-container tip-jar-wp-manage-payments-view' + this.get_current_view_class( 'manage_payments' ) + this.get_featured_image_class() }>\n\n\t\t\t\t\t\t<Tip_Jar_WP_Manage_Payments\n\t\t\t\t\t\t\tmain_component={ this }\n\t\t\t\t\t\t\tshow_close_button={\n\t\t\t\t\t\t\t\t! this.state.editing_mode &&\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t'button' === Object.keys(this.state.all_initial_visual_states)[0] ||\n\t\t\t\t\t\t\t\t\t'text_link' === Object.keys(this.state.all_initial_visual_states)[0] ||\n\t\t\t\t\t\t\t\t\t'in_modal' === this.state.unique_settings.open_style\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t)\n\n\t\t\tif ( this.state.editing_mode ) {\n\n\t\t\t\t// Add the \"Display Mode\" editor above the tip form\n\t\t\t\tif ( this.state.show_edit_display_mode ) {\n\t\t\t\t\ttip_jar_wp_form = (\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<TipJarWPEditOpenStyle main_component={ this }/>\n\t\t\t\t\t\t\t{ tip_jar_wp_form }\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\treturn tip_jar_wp_form;\n\n\t\t\t}\n\n\t\t\tif ( ! this.state.unique_settings.mode || 'form' === this.state.unique_settings.mode ) {\n\t\t\t\treturn tip_jar_wp_form;\n\t\t\t}\n\n\t\t\tif ( 'in_modal' === this.state.unique_settings.open_style ) {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// The modal used to open inside this component.\n\t\t\t\t\t\t\t// But now this component sits silently in the footer until triggered by an outside event.\n\t\t\t\t\t\t\t//tip_jar_wp_open_link\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Tip_Jar_WP_Modal\n\t\t\t\t\t\t\tmain_component={ this }\n\t\t\t\t\t\t\tslug={ this.props.form_number }\n\t\t\t\t\t\t\tmodal_contents={ tip_jar_wp_form }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif ( 'in_place' === this.state.unique_settings.open_style ) {\n\n\t\t\t\tif (\n\t\t\t\t\t'button' === Object.keys(this.state.all_current_visual_states)[0] ||\n\t\t\t\t\t'text_link' === Object.keys(this.state.all_current_visual_states)[0]\n\t\t \t\t) {\n\t\t\t\t\treturn tip_jar_wp_open_link;\n\t\t\t\t}\n\n\t\t\t\treturn tip_jar_wp_form;\n\n\t\t\t}\n\n\t\t\t// Handle the form showing by default\n\t\t\treturn tip_jar_wp_form;\n\t\t}\n\t}\n}\n\nwindow.tip_jar_wp_refresh_a_tipping_element = function tip_jar_wp_refresh_a_tipping_element( tip_jar_wp_element ){\n\n\t// Get the form number for this form\n\tvar form_number = tip_jar_wp_element.getAttribute( 'tip-jar-wp-form-number' );\n\n\t// Get the unique settings to this shortcode\n\tvar unique_shortcode_settings = JSON.parse( document.getElementById( 'tip-jar-wp-element-unique-vars-json-' + form_number ).textContent );\n\tvar dynamic_shortcode_settings = JSON.parse( document.getElementById( 'tip-jar-wp-element-dynamic-vars-json-' + form_number ).textContent );\n\n\tvar top_level_visual_state = 'payment';\n\n\tvar all_default_visual_states = {}\n\n\t//If a default visual state is in the URL, it wins\n\tif ( 'inherit' !== dynamic_shortcode_settings.all_default_visual_states ) {\n\n\t\t// Use the default visual state from the URL\n\t\tall_default_visual_states = dynamic_shortcode_settings.all_default_visual_states;\n\n\t} else {\n\n\t\t// If the shortcode has a mode attached, use it\n\t\tif ( 'form' == unique_shortcode_settings.mode ) {\n\t\t\tall_default_visual_states = {\n\t\t\t\tpayment: {},\n\t\t\t};\n\t\t} else {\n\t\t\tall_default_visual_states = {\n\t\t\t\t[unique_shortcode_settings.mode]: {},\n\t\t\t};\n\t\t}\n\n\t}\n\n\tReactDOM.render( <Tip_Jar_WP_Form\n\t\tkey={ 'tip_jar_wp_button_element_' + form_number }\n\t\tid={ 'tip_jar_wp_button_element_' + form_number }\n\t\tform_number={ form_number }\n\t\tall_current_visual_states={ all_default_visual_states }\n\t\tfrontend_nonces={ tip_jar_wp_js_vars.frontend_nonces }\n\t\tunique_settings={ unique_shortcode_settings }\n\t\tdynamic_settings={ dynamic_shortcode_settings }\n\t/>, tip_jar_wp_element );\n\n}\n\nwindow.tip_jar_wp_refresh_all_tipping_elements = function tip_jar_wp_refresh_all_tipping_elements(){\n\n\tvar tip_jar_wp_element_exists = document.querySelector( '.tip-jar-wp-element' );\n\n\tif ( tip_jar_wp_element_exists ) {\n\n\t\tvar tip_jar_wp_elements = document.querySelectorAll( '.tip-jar-wp-element' );\n\n\t\tvar counter = 0;\n\n\t\t// Loop through each Tip Jar WP element on the page\n\t\ttip_jar_wp_elements.forEach(function( tip_jar_wp_element ) {\n\n\t\t\t// Get the form number for this form\n\t\t\tvar form_number = tip_jar_wp_element.getAttribute( 'tip-jar-wp-form-number' );\n\n\t\t\ttip_jar_wp_refresh_a_tipping_element( tip_jar_wp_element );\n\t\t});\n\t}\n}\ntip_jar_wp_refresh_all_tipping_elements();\n\nwindow.tip_jar_wp_set_modal_to_open = function tip_jar_wp_set_modal_to_open( form_number ) {\n\n\tvar tip_jar_wp_element_exists = document.querySelector( '.tip-jar-wp-element' );\n\n\t// Set all tip jar forms on the page to have their modals closed, then we'll open this one.\n\tif ( tip_jar_wp_element_exists ) {\n\n\t\tvar tip_jar_wp_elements = document.querySelectorAll( '.tip-jar-wp-element' );\n\n\t\tvar counter = 0;\n\n\t\t// Loop through each Tip Jar WP element on the page\n\t\ttip_jar_wp_elements.forEach(function( tip_jar_wp_element ) {\n\n\t\t\t// Get the form number for this form\n\t\t\tvar form_number = tip_jar_wp_element.getAttribute( 'tip-jar-wp-form-number' );\n\n\t\t\t// Get the unique settings to this shortcode\n\t\t\tvar dynamic_shortcode_settings_container = document.getElementById( 'tip-jar-wp-element-dynamic-vars-json-' + form_number );\n\t\t\tvar dynamic_shortcode_settings = JSON.parse( dynamic_shortcode_settings_container.textContent );\n\n\t\t\t// Set the status of the modal to be closed\n\t\t\tdynamic_shortcode_settings.modal_visual_state = {};\n\n\t\t\t// Rewrite the JSON to the DOM\n\t\t\tdynamic_shortcode_settings_container.textContent = JSON.stringify( dynamic_shortcode_settings );\n\t\t} );\n\n\t\t// Refresh all React payment form components on the page\n\t\ttip_jar_wp_refresh_all_tipping_elements();\n\n\t}\n\n\tvar element_holding_settings = document.getElementById( 'tip-jar-wp-element-dynamic-vars-json-' + form_number );\n\n\t// Get the unique settings to this shortcode\n\tvar dynamic_shortcode_settings = JSON.parse( element_holding_settings.innerHTML );\n\n\t// Set the state of the form to be \"payment/form\"\n\tdynamic_shortcode_settings.all_default_visual_states = {\n\t\tpayment: {\n\t\t\tform: {}\n\t\t}\n\t};\n\n\t// Set the status of the modal to be open\n\tdynamic_shortcode_settings.modal_visual_state = {\n\t\t[form_number]: {}\n\t};\n\n\t// Rewrite the JSON to the DOM\n\telement_holding_settings.textContent = JSON.stringify( dynamic_shortcode_settings );\n\n\tvar tip_jar_wp_element = document.getElementById( 'tip-jar-wp-element-' + form_number );\n\n\t// Refresh all React payment form components on the page\n\ttip_jar_wp_refresh_a_tipping_element( tip_jar_wp_element );\n}\n","window.Tip_Jar_WP_Card_Icon = class Tip_Jar_WP_Card_Icon extends React.Component{\n\n\trender_visa(){\n\t\treturn(\n\t\t\t<div className={ \"tip-jar-wp-card-icon\" }>\n\t\t\t\t<svg className=\"SVGInline-svg SVGInline--cleaned-svg SVG-svg BrandIcon-svg BrandIcon--size--20-svg\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fillRule=\"evenodd\"><path d=\"M0 0h32v32H0z\" fill=\"#00579f\"></path><g fill=\"#fff\" fillRule=\"nonzero\"><path d=\"M13.823 19.876H11.8l1.265-7.736h2.023zm7.334-7.546a5.036 5.036 0 0 0-1.814-.33c-1.998 0-3.405 1.053-3.414 2.56-.016 1.11 1.007 1.728 1.773 2.098.783.379 1.05.626 1.05.963-.009.518-.633.757-1.216.757-.808 0-1.24-.123-1.898-.411l-.267-.124-.283 1.737c.475.213 1.349.403 2.257.411 2.123 0 3.505-1.037 3.521-2.641.008-.881-.532-1.556-1.698-2.107-.708-.354-1.141-.593-1.141-.955.008-.33.366-.667 1.165-.667a3.471 3.471 0 0 1 1.507.297l.183.082zm2.69 4.806l.807-2.165c-.008.017.167-.452.266-.74l.142.666s.383 1.852.466 2.239h-1.682zm2.497-4.996h-1.565c-.483 0-.85.14-1.058.642l-3.005 7.094h2.123l.425-1.16h2.597c.059.271.242 1.16.242 1.16h1.873zm-16.234 0l-1.982 5.275-.216-1.07c-.366-1.234-1.515-2.575-2.797-3.242l1.815 6.765h2.14l3.18-7.728z\"></path><path d=\"M6.289 12.14H3.033L3 12.297c2.54.641 4.221 2.189 4.912 4.049l-.708-3.556c-.116-.494-.474-.633-.915-.65z\"></path></g></g></svg>\n\t\t\t</div>\n\t\t)\n\t}\n\n\trender_mastercard() {\n\t\treturn(\n\t\t\t<div className={ \"tip-jar-wp-card-icon\" }>\n\t\t\t\t<svg className=\"SVGInline-svg SVGInline--cleaned-svg SVG-svg BrandIcon-svg BrandIcon--size--20-svg\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fillRule=\"evenodd\"><path d=\"M0 0h32v32H0z\" fill=\"#000\"></path><g fillRule=\"nonzero\"><path d=\"M13.02 10.505h5.923v10.857H13.02z\" fill=\"#ff5f00\"></path><path d=\"M13.396 15.935a6.944 6.944 0 0 1 2.585-5.43c-2.775-2.224-6.76-1.9-9.156.745s-2.395 6.723 0 9.368 6.38 2.969 9.156.744a6.944 6.944 0 0 1-2.585-5.427z\" fill=\"#eb001b\"></path><path d=\"M26.934 15.935c0 2.643-1.48 5.054-3.81 6.21s-5.105.851-7.143-.783a6.955 6.955 0 0 0 2.587-5.428c0-2.118-.954-4.12-2.587-5.429 2.038-1.633 4.81-1.937 7.142-.782s3.811 3.566 3.811 6.21z\" fill=\"#f79e1b\"></path></g></g></svg>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_amex(){\n\t\treturn(\n\t\t\t<div className={ \"tip-jar-wp-card-icon\" }>\n\t\t\t\t<svg className=\"SVGInline-svg SVGInline--cleaned-svg SVG-svg BrandIcon-svg BrandIcon--size--20-svg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\"><g fill=\"none\" fillRule=\"evenodd\"><path fill=\"#0193CE\" d=\"M0 0h32v32H0z\"></path><path d=\"M17.79 18.183h4.29l1.31-1.51 1.44 1.51h1.52l-2.2-2.1 2.21-2.27h-1.52l-1.44 1.51-1.26-1.5H17.8v-.85h4.68l.92 1.18 1.09-1.18h4.05l-3.04 3.11 3.04 2.94h-4.05l-1.1-1.17-.92 1.17h-4.68v-.84zm3.67-.84h-2.53v-.84h2.36v-.83h-2.36v-.84h2.7l1.01 1.26-1.18 1.25zm-14.5 1.68h-3.5l2.97-6.05h2.8l.35.67v-.67h3.5l.7 1.68.7-1.68h3.31v6.05h-2.63v-.84l-.34.84h-2.1l-.35-.84v.84H8.53l-.35-1h-.87l-.35 1zm9.96-.84v-4.37h-1.74l-1.4 3.03-1.41-3.03h-1.74v4.04l-2.1-4.04h-1.4l-2.1 4.37h1.23l.35-1h2.27l.35 1h2.43v-3.36l1.6 3.36h1.05l1.57-3.36v3.36h1.04zm-8.39-1.85l-.7-1.85-.87 1.85h1.57z\" fill=\"#FFF\"></path></g></svg>\n\t\t\t</div>\n\t\t)\n\t}\n\n\trender() {\n\n\t\tif ( 'visa' === this.props.brand ) {\n\t\t\treturn(\n\t\t\t\tthis.render_visa()\n\t\t\t);\n\t\t}\n\n\t\tif ( 'mastercard' === this.props.brand ) {\n\t\t\treturn(\n\t\t\t\tthis.render_mastercard()\n\t\t\t);\n\t\t}\n\n\t\tif ( 'amex' === this.props.brand ) {\n\t\t\treturn(\n\t\t\t\tthis.render_amex()\n\t\t\t);\n\t\t}\n\n\t\treturn(\n\t\t\tthis.props.brand\n\t\t);\n\n\n\t}\n}\nexport default Tip_Jar_WP_Card_Icon;\n","window.TipJarWPEditFileButton = class TipJarWPEditFileButton extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t};\n\n\t}\n\n\twp_open_media_dialog() {\n\n\t\t// create and open new file frame\n\t\tvar mp_core_file_frame = wp.media({\n\t\t\t//Title of media manager frame\n\t\t\ttitle: tip_jar_wp_editing_strings.select_an_item_for_upload,\n\t\t\tbutton: {\n\t\t\t\t//Button text\n\t\t\t\ttext: tip_jar_wp_editing_strings.use_uploaded_item\n\t\t\t},\n\t\t\t//Do not allow multiple files, if you want multiple, set true\n\t\t\tmultiple: false,\n\t\t});\n\n\t\tvar this_component = this;\n\n\t\t//callback for selected image\n\t\tmp_core_file_frame.on('select', function() {\n\n\t\t\tvar selection = mp_core_file_frame.state().get('selection');\n\n\t\t\tselection.map(function(attachment) {\n\n\t\t\t\tattachment = attachment.toJSON();\n\n\t\t\t\t//if this is an image, display the thumbnail above the upload button\n\t\t\t\tvar ext = attachment.url.split('.').pop();\n\n\t\t\t\tthis_component.handleChange( attachment.url );\n\n\t\t\t});\n\n\t\t});\n\n\t\t// open file frame\n\t\tmp_core_file_frame.open();\n\t}\n\n\thandleChange( new_value ) {\n\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, this.props.editing_key, new_value, false );\n\t}\n\n\tmaybe_render_edit_button() {\n\t\tif ( this.props.main_component.state.editing_mode ) {\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className=\"tip-jar-wp-edit-button-container\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\t\t\tonClick={ this.wp_open_media_dialog.bind( this ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.editing_string\n\t\t\t\t\t\t}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\t)\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\trender() {\n\n\t\treturn this.maybe_render_edit_button();\n\n\t}\n\n}\nexport default TipJarWPEditFileButton;\n","window.TipJarWPEditFile = class TipJarWPEditFile extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrent_attachment_data: null,\n\t\t\tinput_value: null,\n\t\t\tis_focused: false\n\t\t};\n\n\t\tthis.textInput = React.createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState({\n\t\t\tcurrent_attachment_data: this.props.attachment_data\n\t\t});\n\t}\n\n\twp_open_media_dialog() {\n\n\t\t// create and open new file frame\n\t\tvar mp_core_file_frame = wp.media({\n\t\t\t//Title of media manager frame\n\t\t\ttitle: tip_jar_wp_editing_strings.select_an_item_for_upload,\n\t\t\tbutton: {\n\t\t\t\t//Button text\n\t\t\t\ttext: tip_jar_wp_editing_strings.use_uploaded_item\n\t\t\t},\n\t\t\t//Do not allow multiple files, if you want multiple, set true\n\t\t\tmultiple: false,\n\t\t});\n\n\t\tvar this_component = this;\n\n\t\t//callback for selected image\n\t\tmp_core_file_frame.on('select', function() {\n\n\t\t\tvar selection = mp_core_file_frame.state().get('selection');\n\n\t\t\tselection.map(function(attachment) {\n\n\t\t\t\tattachment = attachment.toJSON();\n\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tcurrent_attachment_data: attachment\n\t\t\t\t} );\n\n\t\t\t\tthis_component.handle_change( attachment );\n\n\t\t\t});\n\n\t\t});\n\n\t\t// open file frame\n\t\tmp_core_file_frame.open();\n\t}\n\n\tremove() {\n\n\t\tthis.setState( {\n\t\t\tcurrent_attachment_data: null\n\t\t} );\n\n\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, this.props.editing_key, null, false );\n\t}\n\n\thandle_change( attachment_data ) {\n\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, this.props.editing_key, attachment_data, false );\n\t}\n\n\tset_focus( should_be_focused, context, event ) {\n\t\tevent.preventDefault();\n\t\tthis.setState( {\n\t\t\tis_focused: should_be_focused\n\t\t});\n\t}\n\n\thandleBlur( event ) {\n\t\tthis.setState( {\n\t\t\tis_focused: false\n\t\t});\n\t}\n\n\trender_edit_and_delete_buttons() {\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-edit-button-container\">\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\tonClick={ this.wp_open_media_dialog.bind( this ) }\n\t\t\t\t>\n\t\t\t\t{\n\t\t\t\t\ttip_jar_wp_editing_strings.edit\n\t\t\t\t}\n\t\t\t\t</button>\n\t\t\t\t{ (() => {\n\n\t\t\t\t\tif ( this.state.current_attachment_data ) {\n\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\t\t\t\tonClick={ this.remove.bind( this ) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.remove\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\n\t\t\t\t})()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\n\t\tvar HtmlTag = this.props.html_tag;\n\n\t\t// If we are in editing mode...\n\t\tif ( this.props.main_component.state.editing_mode ) {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"tip-jar-wp-edit-container\">\n\t\t\t\t\t\t{ this.render_edit_and_delete_buttons() }\n\t\t\t\t\t\t<HtmlTag { ...this.props.html_tag_attributes }>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.props.html_tag_contents\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</HtmlTag>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)\n\t\t\t// If we are not in editing mode...\n\t\t} else {\n\t\t\tif ( this.state.current_attachment_data ) {\n\t\t\t\treturn (\n\t\t\t\t\t<HtmlTag { ...this.props.html_tag_attributes }>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.html_tag_contents\n\t\t\t\t\t\t}\n\t\t\t\t\t</HtmlTag>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t}\n\n}\nexport default TipJarWPEditFile;\n","window.TipJarWPContentEditable = class TipJarWPContentEditable extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tinput_value: null,\n\t\t\tis_focused: false\n\t\t};\n\n\t\tthis.textInput = React.createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState({\n\t\t\tinput_value: this.props.html_tag_contents\n\t\t});\n\t}\n\n\thandle_change( event ) {\n\n\t\tthis.setState( {\n\t\t\tinput_value: event.target.value\n\t\t} );\n\n\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, this.props.editing_key, event.target.value, true );\n\t}\n\n\tset_focus( should_be_focused, context, event ) {\n\t\tevent.preventDefault();\n\t\tthis.setState( {\n\t\t\tis_focused: should_be_focused\n\t\t});\n\t}\n\n\thandleBlur( event ) {\n\t\tthis.setState( {\n\t\t\tis_focused: false\n\t\t});\n\t}\n\n\trender_edit_and_done_buttons() {\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-edit-button-container\">\n\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( ! this.state.is_focused ) {\n\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.set_focus.bind( this, true, 'edit' ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.edit\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( this.state.is_focused ) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-view-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.set_focus.bind( this, false, 'view' ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.view\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tget_in_focus_class() {\n\t\tif ( this.state.is_focused ) {\n\t\t\treturn ' tip-jar-wp-edit-area-in-focus';\n\t\t} else {\n\t\t\treturn ' tip-jar-wp-edit-area-not-in-focus';\n\t\t}\n\t}\n\n\trender() {\n\n\t\tvar HtmlTag = this.props.html_tag;\n\n\t\t// If we are in editing mode...\n\t\tif ( this.props.main_component.state.editing_mode ) {\n\n\t\t\tif ( this.state.is_focused ) {\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className={ 'tip-jar-wp-edit-container' + this.get_in_focus_class() }>\n\t\t\t\t\t\t\t{ this.render_edit_and_done_buttons() }\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t{ ...this.props.html_tag_attributes }\n\t\t\t\t\t\t\t\tonChange={ this.handle_change.bind( this ) }\n\t\t\t\t\t\t\t\tonBlur={ this.handleBlur.bind( this ) }\n\t\t\t\t\t\t\t\tvalue={ this.state.input_value }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn(\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"tip-jar-wp-edit-container\">\n\t\t\t\t\t\t\t{ this.render_edit_and_done_buttons() }\n\t\t\t\t\t\t\t<HtmlTag\n\t\t\t\t\t\t\t\t{ ...this.props.html_tag_attributes }\n\t\t\t\t\t\t\t\tonChange={ this.handle_change.bind( this ) }\n\t\t\t\t\t\t\t\tonBlur={ this.handleBlur.bind( this ) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ (() => {\n\t\t\t\t\t\t\t\t\tif ( this.props.html_tag_contents ) {\n\t\t\t\t\t\t\t\t\t\treturn this.props.html_tag_contents;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn this.props.instructional_html_tag_contents;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})() }\n\t\t\t\t\t\t\t</HtmlTag>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t\t// If we are not in editing mode...\n\t\t} else {\n\t\t\tif ( this.props.html_tag_contents ) {\n\t\t\t\treturn (\n\t\t\t\t\t<HtmlTag { ...this.props.html_tag_attributes }>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.html_tag_contents\n\t\t\t\t\t\t}\n\t\t\t\t\t</HtmlTag>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t}\n\n}\nexport default TipJarWPContentEditable;\n","window.TipJarWPContentEditableAsChild = class TipJarWPContentEditableAsChild extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tinput_value: null,\n\t\t};\n\n\t\tthis.textInput = React.createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState({\n\t\t\tinput_value: this.props.html_tag_contents\n\t\t});\n\t}\n\n\thandle_change( event ) {\n\n\t\tthis.setState( {\n\t\t\tinput_value: event.target.value\n\t\t} );\n\n\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, this.props.editing_key, event.target.value, true );\n\t}\n\n\trender() {\n\n\t\tvar HtmlTag = this.props.html_tag;\n\n\t\t// If we are in editing mode...\n\t\tif ( this.props.main_component.state.editing_mode ) {\n\n\t\t\tif ( this.props.is_focused ) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className={ this.props.editing_textarea_container_classname }>\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tonChange={ this.handle_change.bind( this ) }\n\t\t\t\t\t\t\t\tvalue={ this.state.input_value }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t} else {\n\n\t\t\t\tif ( ! this.props.html_tag_attributes.dangerouslySetInnerHTML ) {\n\t\t\t\t\treturn(\n\t\t\t\t\t\t<HtmlTag\n\t\t\t\t\t\t\t{ ...this.props.html_tag_attributes }\n\t\t\t\t\t\t\tonChange={ this.handle_change.bind( this ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ (() => {\n\t\t\t\t\t\t\t\tif ( this.props.html_tag_contents ) {\n\t\t\t\t\t\t\t\t\treturn this.props.html_tag_contents;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn this.props.instructional_html_tag_contents;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})() }\n\t\t\t\t\t\t</HtmlTag>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn(\n\t\t\t\t\t\t<HtmlTag\n\t\t\t\t\t\t\t{ ...this.props.html_tag_attributes }\n\t\t\t\t\t\t\tonChange={ this.handle_change.bind( this ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If we are not in editing mode...\n\t\t} else {\n\n\t\t\t// DangerouslySetInnerHtml can't have any HTML tag contents set. So only add them if that is not set.\n\t\t\tif ( ! this.props.html_tag_attributes.dangerouslySetInnerHTML ) {\n\t\t\t\treturn (\n\t\t\t\t\t<HtmlTag { ...this.props.html_tag_attributes }>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.html_tag_contents\n\t\t\t\t\t\t}\n\t\t\t\t\t</HtmlTag>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\t<HtmlTag { ...this.props.html_tag_attributes } />\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n\n}\nexport default TipJarWPContentEditableAsChild;\n","window.TipJarWPEditFileDownload = class TipJarWPEditFileDownload extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\n\t\tthis.textInput = React.createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState( this.props.main_component.state.unique_settings.file_download_attachment_data );\n\t}\n\n\twp_open_media_dialog() {\n\n\t\t// create and open new file frame\n\t\tvar mp_core_file_frame = wp.media({\n\t\t\t//Title of media manager frame\n\t\t\ttitle: tip_jar_wp_editing_strings.choose_file_to_be_delivered,\n\t\t\tbutton: {\n\t\t\t\t//Button text\n\t\t\t\ttext: tip_jar_wp_editing_strings.use_uploaded_item\n\t\t\t},\n\t\t\t//Do not allow multiple files, if you want multiple, set true\n\t\t\tmultiple: false,\n\t\t});\n\n\t\tvar this_component = this;\n\n\t\t//callback for selected image\n\t\tmp_core_file_frame.on('select', function() {\n\n\t\t\tvar selection = mp_core_file_frame.state().get('selection');\n\n\t\t\tselection.map(function(attachment) {\n\n\t\t\t\tattachment = attachment.toJSON();\n\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tfile_download_mode_enabled: true,\n\t\t\t\t\tattachment_id: attachment.id,\n\t\t\t\t\tattachment_filename: attachment.filename,\n\t\t\t\t}, () => {\n\t\t\t\t\tthis_component.handle_file_change();\n\t\t\t\t} );\n\n\t\t\t});\n\n\t\t});\n\n\t\t// open file frame\n\t\tmp_core_file_frame.open();\n\t}\n\n\thandle_file_change() {\n\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, this.props.editing_key, this.state, false );\n\t}\n\n\thandle_remove_click() {\n\n\t\tthis.setState( {\n\t\t\tfile_download_mode_enabled: false,\n\t\t} );\n\n\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, this.props.editing_key, this.state, false );\n\t}\n\n\ttoggle_email_required() {\n\t\tif ( this.state.email_required ) {\n\t\t\tthis.setState( {\n\t\t\t\temail_required: false\n\t\t\t}, () => {\n\t\t\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, this.props.editing_key, this.state, false );\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.setState( {\n\t\t\t\temail_required: true\n\t\t\t}, () => {\n\t\t\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, this.props.editing_key, this.state, false );\n\t\t\t} );\n\t\t}\n\t}\n\n\thandle_instructions_title( event ) {\n\n\t\tthis.setState( {\n\t\t\tinstructions_title: event.target.value\n\t\t}, () => {\n\t\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, this.props.editing_key, this.state, true );\n\t\t} );\n\t}\n\n\thandle_instructions_description( event ) {\n\n\t\tthis.setState( {\n\t\t\tinstructions_description: event.target.value\n\t\t}, () => {\n\t\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, this.props.editing_key, this.state, true );\n\t\t} );\n\t}\n\n\trender_enable_button() {\n\n\t\tif ( ! this.state.file_download_mode_enabled ) {\n\n\t\t\treturn(\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\t\tonClick={ this.wp_open_media_dialog.bind( this ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ tip_jar_wp_editing_strings.enable_file_download_mode }\n\t\t\t\t\t</button>\n\t\t\t);\n\n\t\t}\n\t}\n\n\trender_disable_button() {\n\n\t\tif ( this.state.file_download_mode_enabled ) {\n\t\t\treturn(\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName=\"button tip-jar-wp-edit-top-right-close-button\"\n\t\t\t\t\tonClick={ this.handle_remove_click.bind( this ) }\n\t\t\t\t>\n\t\t\t\t{\n\t\t\t\t\ttip_jar_wp_editing_strings.disable_file_download_mode\n\t\t\t\t}\n\t\t\t\t</button>\n\t\t\t);\n\t\t}\n\t}\n\n\trender_area_header() {\n\n\t\treturn (\n\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-header\">\n\t\t\t<span className=\"tip-jar-wp-edit-container-admin-only-title\">File Download Mode</span>\n\t\t\t{ this.render_enable_button() }\n\t\t\t{ this.render_disable_button() }\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_file_select_option() {\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting\">\n\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-title\">\n\t\t\t\t\t{ tip_jar_wp_editing_strings.deliverable_file_title }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-description\">\n\t\t\t\t\t{ tip_jar_wp_editing_strings.deliverable_file_description }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-value\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"button\"\n\t\t\t\t\t\tonClick={ this.wp_open_media_dialog.bind( this ) }\n\t\t\t\t\t>\n\t\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( this.state.attachment_filename ) {\n\t\t\t\t\t\t\treturn( this.state.attachment_filename + ' (' + tip_jar_wp_editing_strings.edit + ')' );\n\t\t\t\t\t\t}\n\t\t\t\t\t})()}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_email_required_option() {\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting\">\n\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-title\">\n\t\t\t\t\t{ tip_jar_wp_editing_strings.require_users_email_title }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-description\">\n\t\t\t\t\t{ tip_jar_wp_editing_strings.require_users_email_description }\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"tip-jar-wp-edit-container-admin-only-setting-value\"\n\t\t\t\t\tonClick={ this.toggle_email_required.bind( this ) }\n\t\t\t\t>\n\t\t\t\t\t<input type=\"checkbox\"\n\t\t\t\t\t\tonChange={ this.toggle_email_required.bind( this ) }\n\t\t\t\t\t\tvalue={ this.state.email_required ? true : false }\n\t\t\t\t\t\tchecked={ this.state.email_required ? true : false }\n\t\t\t\t\t/>\n\t\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( this.state.email_required ) {\n\t\t\t\t\t\t\treturn( tip_jar_wp_editing_strings.email_required );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn( tip_jar_wp_editing_strings.email_not_required );\n\t\t\t\t\t\t}\n\t\t\t\t\t})()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_file_instructions_option() {\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting\">\n\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-title\">\n\t\t\t\t\t{ tip_jar_wp_editing_strings.instructions_to_user_title }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-description\">\n\t\t\t\t\t{ tip_jar_wp_editing_strings.instructions_to_user_description }\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"tip-jar-wp-edit-container-admin-only-setting-value\"\n\t\t\t\t>\n\t\t\t\t\t<span>{ tip_jar_wp_editing_strings.instructions_title }</span>\n\t\t\t\t\t<input type=\"text\"\n\t\t\t\t\t\tonChange={ this.handle_instructions_title.bind( this ) }\n\t\t\t\t\t\tvalue={ this.state.instructions_title }\n\t\t\t\t\t/>\n\n\t\t\t\t\t<span>{ tip_jar_wp_editing_strings.instructions_description }</span>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tonChange={ this.handle_instructions_description.bind( this ) }\n\t\t\t\t\t\tvalue={ this.state.instructions_description }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_body() {\n\t\tif ( this.state.file_download_mode_enabled ) {\n\t\t\treturn (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t{ this.render_file_select_option() }\n\t\t\t\t\t{ this.render_email_required_option() }\n\t\t\t\t\t{ this.render_file_instructions_option() }\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t} else {\n\t\t\treturn ( tip_jar_wp_editing_strings.file_download_mode_description );\n\t\t}\n\n\n\t}\n\n\trender() {\n\n\t\t// If we are in editing mode...\n\t\tif ( this.props.main_component.state.editing_mode ) {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only\">\n\t\t\t\t\t\t{ this.render_area_header() }\n\t\t\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-body\">\n\t\t\t\t\t\t\t{ this.render_body() }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)\n\t\t\t// If we are not in editing mode, show nothing here.\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n}\nexport default TipJarWPEditFileDownload;\n","import React, {useState, useEffect} from 'react';\n\nwindow.TipJarWPEditDefaultAmountAndCurrency = function TipJarWPEditDefaultAmountAndCurrency(props) {\n\n\tconst [is_focused, set_is_focused] = useState(false);\n\tconst[ input_amount, set_input_amount ] = useState( props.payment_box.get_visual_amount_for_input_field( true ) );\n\n\tuseEffect( () => {\n\t\tif ( is_focused !== props.payment_box.state.edit_currency_is_focused ) {\n\t\t\tprops.payment_box.setState( {\n\t\t\t\tedit_currency_is_focused: is_focused\n\t\t\t} );\n\t\t}\n\t}, [] );\n\n\tfunction handleBlur( event ) {\n\t\t// Pass the value to the parent component's handler.\n\t\tprops.payment_box.handleAmountChange(event).then( () => {\n\n\t\t\t// Set the state of the amount in this component.\n\t\t\tset_input_amount( props.payment_box.get_visual_amount_for_input_field( true ) );\n\t\n\t\t\t// If we are focused (or in \"Editing mode\" for this element), pass the value to the block where it is saved to the form.\n\t\t\tif ( is_focused ) {\n\t\t\t\ttip_jar_wp_pass_value_to_block( props.main_component, props.amount_editing_key, props.payment_box.state.tip_amount, true );\n\t\t\t}\n\n\t\t} );\n\t}\n\n\tfunction handleAmountChange( event ) {\n\n\t\t// Pass the value to the parent component's handler.\n\t\tprops.payment_box.handleAmountChange(event).then( () => {\n\n\t\t\t// Set the state of the amount in this component.\n\t\t\tset_input_amount( props.payment_box.get_visual_amount_for_input_field( false ) );\n\t\n\t\t\t// If we are focused (or in \"Editing mode\" for this element), pass the value to the block where it is saved to the form.\n\t\t\tif ( is_focused ) {\n\t\t\t\ttip_jar_wp_pass_value_to_block( props.main_component, props.amount_editing_key, props.payment_box.state.tip_amount, true );\n\t\t\t}\n\n\t\t} );\n\t}\n\n\tfunction render_edit_and_done_buttons() {\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-edit-button-container\">\n\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( ! is_focused ) {\n\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\t\t\t\t\tonClick={ () => { \n\t\t\t\t\t\t\t\t\t\tconsole.log('sdgsdg');\n\t\t\t\t\t\t\t\t\t\tset_is_focused(true); \n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.edit\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( is_focused ) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-view-button\"\n\t\t\t\t\t\t\t\t\tonClick={ () => { \n\t\t\t\t\t\t\t\t\t\tconsole.log('sdgsdg');\n\t\t\t\t\t\t\t\t\t\tset_is_focused(false); \n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.view\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tfunction render_amount_and_currency_fields() {\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Tip_Jar_WP_Input_Field_Instruction\n\t\t\t\t\tmain_component={ props.main_component }\n\t\t\t\t\tcurrent_instruction={ props.payment_box.state.input_fields_tip_amount_current_instruction }\n\t\t\t\t\tinstruction_codes={ props.main_component.state.unique_settings.strings.input_field_instructions.tip_amount }\n\t\t\t\t\tediting_key={ 'strings/input_field_instructions/tip_amount/' + props.payment_box.state.input_fields_tip_amount_current_instruction + '/instruction_message' }\n\t\t\t\t\tis_edit_child={ true }\n\t\t\t\t\tis_focused={ is_focused }\n\t\t\t\t/>\n\t\t\t\t<div className={ 'tip-jar-wp-amount-container' +  ( () => {\n\t\t\t\t\tif ( props.payment_box.state.currency_search_visible ) {\n\t\t\t\t\t\treturn ' currency-search-visible';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t})()}>\n\t\t\t\t\t<div className={ 'tip-jar-wp-tip-currency-symbol' }>{ props.payment_box.state.verified_currency_symbol }</div>\n\t\t\t\t\t<div className={ 'tip-jar-wp-tip-amount-input-container' }>\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tdisabled={ props.payment_box.get_disabled_status( [ 'credit_card', 'payment_request', 'free_file_download' ] ) }\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\t\tstep={ props.payment_box.get_amount_field_step_format() }\n\t\t\t\t\t\t\t\tclassName={ 'tip-jar-wp-tip-amount-input' }\n\t\t\t\t\t\t\t\tplaceholder={ props.main_component.state.unique_settings.strings.input_field_instructions.tip_amount.placeholder_text }\n\t\t\t\t\t\t\t\tname=\"tip-amount\"\n\t\t\t\t\t\t\t\tonChange={ handleAmountChange }\n\t\t\t\t\t\t\t\tonFocus={ handleAmountChange }\n\t\t\t\t\t\t\t\tonBlur={ handleBlur }\n\t\t\t\t\t\t\t\tvalue={ input_amount }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ 'tip-jar-wp-currency-switcher' }>\n\t\t\t\t\t\t{ props.payment_box.render_currency_switcher() }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t)\n\n\t}\n\n\tfunction get_in_focus_class() {\n\t\tif ( is_focused ) {\n\t\t\treturn ' tip-jar-wp-edit-area-in-focus';\n\t\t} else {\n\t\t\treturn ' tip-jar-wp-edit-area-not-in-focus';\n\t\t}\n\t}\n\n\t// If we are in editing mode...\n\tif ( props.main_component.state.editing_mode ) {\n\n\t\treturn (\n\t\t\t<div className={ 'tip-jar-wp-edit-container' + get_in_focus_class() }>\n\t\t\t\t{ render_edit_and_done_buttons() }\n\t\t\t\t{ render_amount_and_currency_fields() }\n\t\t\t</div>\n\t\t);\n\n\t\t// If we are not in editing mode, show nothing here.\n\t} else {\n\t\treturn (\n\t\t\trender_amount_and_currency_fields()\n\t\t);\n\t}\n\t\n\n}\nexport default TipJarWPEditDefaultAmountAndCurrency;\n","window.TipJarWPEditRecurringOptions = class TipJarWPEditRecurringOptions extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrency_input_value: '',\n\t\t\tamount_input_value: ''\n\t\t};\n\n\t\tthis.textInput = React.createRef();\n\t}\n\n\tcomponentDidMount() {\n\n\t}\n\n\tset_focus( should_be_focused, context, event ) {\n\t\tevent.preventDefault();\n\t\tthis.setState( {\n\t\t\tis_focused: should_be_focused\n\t\t});\n\t}\n\n\ttoggle_recurring_options_enabled( event ) {\n\t\tevent.preventDefault();\n\t\tif ( this.props.main_component.state.unique_settings.recurring_options_enabled ) {\n\t\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, 'recurring_options_enabled', false, true );\n\t\t} else {\n\t\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, 'recurring_options_enabled', true, true );\n\t\t}\n\t}\n\n\trender_edit_and_hide_buttons() {\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-edit-button-container\">\n\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( ! this.state.is_focused ) {\n\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.set_focus.bind( this, true, 'edit' ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.edit\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( this.state.is_focused ) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-view-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.set_focus.bind( this, false, 'view' ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.view\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( ! this.props.main_component.state.unique_settings.recurring_options_enabled ) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.toggle_recurring_options_enabled.bind( this ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.enable_recurring_options\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.toggle_recurring_options_enabled.bind( this ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.disable_recurring_options\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_recurring_options_and_instructions() {\n\n\t\treturn (\n\t\t\t<Tip_Jar_WP_Radio_Field\n\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\tstate_validation_variable_name={ 'recurring_validated' }\n\t\t\t\tstate_value_variable_name={ 'recurring_value' }\n\t\t\t\tset_validation_and_value_of_field={ this.props.payment_box.set_validation_and_value_of_field.bind( this.props.payment_box ) }\n\t\t\t\tform_validation_attempted={ this.props.payment_box.state.form_validation_attempted }\n\t\t\t\tis_validated={ this.props.payment_box.state.recurring_validated }\n\t\t\t\tvalidate_form={ this.props.payment_box.validate_form.bind( this.props.payment_box ) }\n\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.recurring }\n\n\t\t\t\ttype=\"radio\"\n\t\t\t\tradio_buttons={ this.props.main_component.state.unique_settings.recurring_options }\n\t\t\t\tclass_name={ 'tip-jar-wp-recurring' }\n\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.recurring.placeholder_text }\n\t\t\t\tname=\"recurring\"\n\t\t\t\tediting_key={ 'strings/input_field_instructions/recurring/[current_key_here]/instruction_message' }\n\t\t\t\tis_edit_child={ true }\n\t\t\t\tis_focused={ this.state.is_focused }\n\t\t\t/>\n\t\t)\n\n\t}\n\n\tget_in_focus_class() {\n\t\tif ( this.state.is_focused ) {\n\t\t\treturn ' tip-jar-wp-edit-area-in-focus';\n\t\t} else {\n\t\t\treturn ' tip-jar-wp-edit-area-not-in-focus';\n\t\t}\n\t}\n\n\trender() {\n\n\t\t// If we are in editing mode...\n\t\tif ( this.props.main_component.state.editing_mode ) {\n\n\t\t\treturn (\n\t\t\t\t<div className={ 'tip-jar-wp-edit-container' + this.get_in_focus_class() }>\n\t\t\t\t\t{ this.render_edit_and_hide_buttons() }\n\t\t\t\t\t{ this.render_recurring_options_and_instructions() }\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\t// If we are not in editing mode...\n\t\t} else {\n\n\t\t\tif ( this.props.main_component.state.unique_settings.recurring_options_enabled ) {\n\t\t\t\treturn (\n\t\t\t\t\tthis.render_recurring_options_and_instructions()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t}\n\n}\nexport default TipJarWPEditRecurringOptions;\n","window.TipJarWPEditOpenStyle = class TipJarWPEditOpenStyle extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tform_mode: '',\n\t\t\tbutton_text: '',\n\t\t\topen_style: ''\n\t\t};\n\n\t\tthis.textInput = React.createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState( {\n\t\t\tform_mode: this.props.main_component.state.unique_settings.mode,\n\t\t\tbutton_text: this.props.main_component.state.unique_settings.strings.link_text,\n\t\t\topen_style: this.props.main_component.state.unique_settings.open_style,\n\t\t} );\n\t}\n\n\thandle_form_mode_change( event ) {\n\n\t\tthis.setState( {\n\t\t\tform_mode: event.target.value\n\t\t}, () => {\n\t\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, 'mode', this.state.form_mode, false );\n\t\t} );\n\t}\n\n\thandle_open_style_change( event ) {\n\n\t\tthis.setState( {\n\t\t\topen_style: event.target.value\n\t\t}, () => {\n\t\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, 'open_style', this.state.open_style, false );\n\t\t} );\n\t}\n\n\thandle_button_text_change( event ) {\n\n\t\tthis.setState( {\n\t\t\tbutton_text: event.target.value\n\t\t}, () => {\n\t\t\ttip_jar_wp_pass_value_to_block( this.props.main_component, 'strings/link_text', this.state.button_text, true );\n\t\t} );\n\t}\n\n\trender_area_header() {\n\n\t\treturn (\n\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-header\">\n\t\t\t\t<span className=\"tip-jar-wp-edit-container-admin-only-title\">{ tip_jar_wp_editing_strings.tip_forms_display_style }</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_open_style_option() {\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting\">\n\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-description\">\n\t\t\t\t\t{ tip_jar_wp_editing_strings.how_should_the_tip_form_display }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-setting-value\">\n\t\t\t\t<select value={ this.state.form_mode } onChange={ this.handle_form_mode_change.bind( this ) }>\n\t\t\t\t\t<option name=\"form_mode\" value=\"form\">{ tip_jar_wp_editing_strings.embed_in_place }</option>\n\t\t\t\t\t<option name=\"form_mode\" value=\"button\">{ tip_jar_wp_editing_strings.start_as_a_button }</option>\n\t\t\t\t\t<option name=\"form_mode\" value=\"text_link\">{ tip_jar_wp_editing_strings.start_as_a_text_link }</option>\n\t\t\t\t</select>\n\t\t\t\t{ (() => {\n\t\t\t\t\tif ( 'button' === this.state.form_mode || 'text_link' === this.state.form_mode ) {\n\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t<span> </span>{ tip_jar_wp_editing_strings.with_the_text }<span> </span>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tname=\"button_text\"\n\t\t\t\t\t\t\t\t\tvalue={ this.state.button_text }\n\t\t\t\t\t\t\t\t\tonChange={ this.handle_button_text_change.bind( this ) }\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span> </span>{ tip_jar_wp_editing_strings.which }<span> </span>\n\t\t\t\t\t\t\t\t<select value={ this.state.open_style } onChange={ this.handle_open_style_change.bind( this ) }>\n\t\t\t\t\t\t\t\t\t<option name=\"open_style\" value=\"in_place\">{ tip_jar_wp_editing_strings.opens_in_place }</option>\n\t\t\t\t\t\t\t\t\t<option name=\"open_style\" value=\"in_modal\">{ tip_jar_wp_editing_strings.opens_in_modal }</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t<span> </span>{ tip_jar_wp_editing_strings.when_clicked }\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t})() }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_body() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{ this.render_open_style_option() }\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n\n\trender() {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only\">\n\t\t\t\t\t\t{ this.render_area_header() }\n\t\t\t\t\t\t<div className=\"tip-jar-wp-edit-container-admin-only-body\">\n\t\t\t\t\t\t\t{ this.render_body() }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)\n\t}\n\n}\nexport default TipJarWPEditOpenStyle;\n","window.Tip_Jar_WP_Email_Field = class Tip_Jar_WP_Email_Field extends React.Component {\n\n\tconstructor( props ) {\n\t\tsuper(props);\n\n\t\tthis.state= {\n\t\t\tinput_value: '',\n\t\t};\n\n\t\tthis.get_input_field_class = this.get_input_field_class.bind( this );\n\t\tthis.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n\t\tthis.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n\t};\n\n\tcomponentDidMount() {\n\n\t\tif ( this.props.initial_value ) {\n\t\t\tthis.setState( {\n\t\t\t\tinitial_input_value: this.props.initial_value,\n\t\t\t\tinput_value: this.props.initial_value\n\t\t\t}, () => {\n\t\t\t\t// Validate an email field\n\t\t\t\tif ( ! tip_jar_wp_validate_email( this.state.input_value ) ) {\n\t\t\t\t\tvar is_validated = false;\n\t\t\t\t} else {\n\t\t\t\t\tvar is_validated = true;\n\t\t\t\t}\n\n\t\t\t\t// Pass the validation status back to the parent.\n\t\t\t\tthis.props.set_validation_and_value_of_field(\n\t\t\t\t\tthis.props.state_validation_variable_name,\n\t\t\t\t\tis_validated,\n\t\t\t\t\tthis.props.state_value_variable_name,\n\t\t\t\t\tthis.state.input_value\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\t// If the initial input value has changed\n\t\tif ( this.props.initial_value && this.props.initial_value !== this.state.initial_input_value ) {\n\t\t\tthis.setState( {\n\t\t\t\tinitial_input_value: this.props.initial_value,\n\t\t\t\tinput_value: this.props.initial_value\n\t\t\t}, () => {\n\t\t\t\t// Validate an email field\n\t\t\t\tif ( ! tip_jar_wp_validate_email( this.state.input_value ) ) {\n\t\t\t\t\tvar is_validated = false;\n\t\t\t\t} else {\n\t\t\t\t\tvar is_validated = true;\n\t\t\t\t}\n\n\t\t\t\t// Pass the validation status back to the parent.\n\t\t\t\tthis.props.set_validation_and_value_of_field(\n\t\t\t\t\tthis.props.state_validation_variable_name,\n\t\t\t\t\tis_validated,\n\t\t\t\t\tthis.props.state_value_variable_name,\n\t\t\t\t\tthis.state.input_value\n\t\t\t\t);\n\n\t\t\t} );\n\t\t}\n\t}\n\n\tget_current_instruction_key() {\n\n\t\t// Handle the instruction only if the form containing this field has been submitted\n\t\tif ( this.props.form_validation_attempted ) {\n\n\t\t\t// If the form containing this field has not yet been submitted\n\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\treturn 'blank';\n\t\t\t}\n\n\t\t\tif ( ! tip_jar_wp_validate_email( this.state.input_value ) ) {\n\t\t\t\treturn 'not_an_email_address';\n\t\t\t} else {\n\t\t\t\treturn 'success';\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\treturn 'initial';\n\t\t\t}\n\t\t\tif ( ! tip_jar_wp_validate_email( this.state.input_value ) ) {\n\t\t\t\treturn 'initial';\n\t\t\t} else {\n\t\t\t\treturn 'success';\n\t\t\t}\n\n\t\t}\n\t}\n\n\tget_input_instruction_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' tip-jar-wp-instruction-error';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_field_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'success' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' tip-jar-wp-input-success';\n\t\t\t}\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' tip-jar-wp-input-error';\n\t\t\t}\n\t\t\tif ( 'initial' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_instruction_message() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\treturn this.props.instruction_codes[current_instruction].instruction_message;\n\t\t}\n\t};\n\n\thandle_input_change( event ) {\n\n\t\t// Validate an email field\n\t\tif ( ! tip_jar_wp_validate_email( event.target.value ) ) {\n\t\t\tvar is_validated = false;\n\t\t} else {\n\t\t\tvar is_validated = true;\n\t\t}\n\n\t\t// Pass the validation status back to the parent.\n\t\tthis.props.set_validation_and_value_of_field(\n\t\t\tthis.props.state_validation_variable_name,\n\t\t\tis_validated,\n\t\t\tthis.props.state_value_variable_name,\n\t\t\tevent.target.value\n\t\t);\n\n\t\tif ( this.props.form_validation_attempted ) {\n\t\t\tvar this_component = this;\n\t\t\t// Wait for the state to be set in the parent\n\t\t\tsetTimeout( function() {\n\t\t\t\tthis_component.props.validate_form( true );\n\t\t\t}, 10 );\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tinput_value: event.target.value\n\t\t} );\n\n\t};\n\n\trender(){\n\n\t\tvar inputProps = {};\n\n\t\tif ( this.props.type ) {\n\t\t\tinputProps['type'] = this.props.type;\n\t\t}\n\n\t\tif ( this.props.class_name ) {\n\t\t\tinputProps['className'] = this.props.class_name + this.get_input_field_class();\n\t\t} else {\n\t\t\tinputProps['className'] = this.get_input_field_class();\n\t\t}\n\n\t\tif ( this.props.name ) {\n\t\t\tinputProps['name'] = this.props.name;\n\t\t}\n\n\t\tinputProps['onChange'] = this.handle_input_change.bind( this );\n\t\tinputProps['onBlur'] = this.handle_input_change.bind( this );\n\n\t\tif ( this.props.placeholder ) {\n\t\t\tinputProps['placeholder'] = this.props.placeholder;\n\t\t}\n\n\t\tinputProps['value'] = this.state.input_value;\n\n\t\tif ( this.props.step ) {\n\t\t\tinputProps['step'] = this.props.step;\n\t\t}\n\n\t\tif ( this.props.disabled ) {\n\t\t\tinputProps['disabled'] = this.props.disabled;\n\t\t}\n\t\t\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<label>\n\t\t\t\t\t<TipJarWPContentEditable\n\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\thtml_tag=\"div\"\n\t\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\t\tclassName: 'tip-jar-wp-input-instruction' + this.get_input_instruction_class()\n\t\t\t\t\t\t} }\n\t\t\t\t\t\thtml_tag_contents={ this.get_input_instruction_message() }\n\t\t\t\t\t\tediting_key={ this.props.editing_key.replace( '[current_key_here]', this.get_current_instruction_key() ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<input { ...inputProps } />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t)\n\t}\n\n};\nexport default Tip_Jar_WP_Email_Field;\n","window.Tip_Jar_WP_Input_Field = class Tip_Jar_WP_Input_Field extends React.Component {\n\n    constructor( props ) {\n        super(props);\n\n        this.state= {\n            input_value: '',\n        };\n\n        this.get_input_field_class = this.get_input_field_class.bind( this );\n        this.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n        this.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n    };\n\n\t\tcomponentDidMount() {\n\n\t\t\tif ( this.props.initial_value ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tinitial_input_value: this.props.initial_value,\n\t\t\t\t\tinput_value: this.props.initial_value\n\t\t\t\t}, () => {\n\t\t\t\t\t// Validate that the field has a value\n\t\t\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\t\t\tvar is_validated = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar is_validated = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Pass the validation status back to the parent.\n\t\t\t\t\tthis.props.set_validation_and_value_of_field(\n\t\t\t\t\t\tthis.props.state_validation_variable_name,\n\t\t\t\t\t\tis_validated,\n\t\t\t\t\t\tthis.props.state_value_variable_name,\n\t\t\t\t\t\tthis.state.input_value\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tcomponentDidUpdate() {\n\n\t\t\t// If the initial input value has changed\n\t\t\tif ( this.props.initial_value && this.props.initial_value !== this.state.initial_input_value ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tinitial_input_value: this.props.initial_value,\n\t\t\t\t\tinput_value: this.props.initial_value\n\t\t\t\t}, () => {\n\t\t\t\t\t// Validate that the field has a value\n\t\t\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\t\t\tvar is_validated = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar is_validated = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Pass the validation status back to the parent.\n\t\t\t\t\tthis.props.set_validation_and_value_of_field(\n\t\t\t\t\t\tthis.props.state_validation_variable_name,\n\t\t\t\t\t\tis_validated,\n\t\t\t\t\t\tthis.props.state_value_variable_name,\n\t\t\t\t\t\tthis.state.input_value\n\t\t\t\t\t);\n\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n    get_current_instruction_key() {\n\n        // Handle the instruction only if the form containing this field has been submitted\n        if ( this.props.form_validation_attempted ) {\n\n            // If the form containing this field has been submitted\n            if ( ! this.state.input_value ) {\n                return 'empty';\n            }\n            if ( this.state.input_value ) {\n                return 'success';\n            }\n\n        } else {\n            // If the form containing this field has not yet been submitted\n            if ( ! this.state.input_value ) {\n                return 'initial';\n            }\n            if ( this.state.input_value ) {\n                return 'success';\n            }\n        }\n    }\n\n    get_input_instruction_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' tip-jar-wp-instruction-error';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_field_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'success' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' tip-jar-wp-input-success';\n            }\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' tip-jar-wp-input-error';\n            }\n            if ( 'initial' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return '';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_instruction_message() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            return this.props.instruction_codes[current_instruction].instruction_message;\n        }\n    };\n\n    handle_input_change( event ) {\n\n        // Set the validation of this field\n        if ( ! event.target.value ) {\n            var is_validated = false;\n        } else {\n            var is_validated = true;\n        }\n\n        // Pass the validation status back to the parent.\n        this.props.set_validation_and_value_of_field(\n            this.props.state_validation_variable_name,\n            is_validated,\n            this.props.state_value_variable_name,\n            event.target.value\n        );\n\n        if ( this.props.form_validation_attempted ) {\n            var this_component = this;\n            // Wait for the state to be set in the parent\n            setTimeout( function() {\n                this_component.props.validate_form( true );\n            }, 10 );\n        }\n\n        this.setState( {\n            input_value: event.target.value\n        } );\n\n    };\n\n    render(){\n\n        var inputProps = {};\n\n        if ( this.props.type ) {\n            inputProps['type'] = this.props.type;\n        }\n\n        if ( this.props.class_name ) {\n            inputProps['className'] = this.props.class_name + this.get_input_field_class();\n        } else {\n            inputProps['className'] = this.get_input_field_class();\n        }\n\n        if ( this.props.name ) {\n            inputProps['name'] = this.props.name;\n        }\n\n        inputProps['onChange'] = this.handle_input_change.bind( this );\n\n        if ( this.props.placeholder ) {\n            inputProps['placeholder'] = this.props.placeholder;\n        }\n\n        inputProps['value'] = this.state.input_value;\n\n        if ( this.props.step ) {\n            inputProps['step'] = this.props.step;\n        }\n\n        if ( this.props.disabled ) {\n            inputProps['disabled'] = this.props.disabled;\n        }\n\n        return(\n            <div>\n                <label>\n\t\t\t\t\t\t\t\t\t\t<TipJarWPContentEditable\n\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\thtml_tag=\"div\"\n\t\t\t\t\t\t\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'tip-jar-wp-input-instruction' + this.get_input_instruction_class()\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\thtml_tag_contents={ this.get_input_instruction_message() }\n\t\t\t\t\t\t\t\t\t\t\tediting_key={ this.props.editing_key.replace( '[current_key_here]', this.get_current_instruction_key() ) }\n\t\t\t\t\t\t\t\t\t\t/>\n                    { this.props.output_before_field }<input { ...inputProps } />{ this.props.after_before_field }\n                </label>\n\n            </div>\n        )\n    }\n\n};\n\nwindow.Tip_Jar_WP_Input_Field_Instruction = class Tip_Jar_WP_Input_Field_Instruction extends React.Component {\n\n    constructor( props ) {\n        super(props);\n\n        this.get_input_field_class = this.get_input_field_class.bind( this );\n        this.set_current_input_field_instruction = this.set_current_input_field_instruction.bind( this );\n        this.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n        this.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n    };\n\n    set_current_input_field_instruction( field_name, instruction_name ) {\n\n        this.state.input_fields[field_name].current_instruction = value;\n\n        this.setState( {\n            input_fields: this.state.input_fields\n        } );\n    };\n\n    get_input_instruction_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.props.current_instruction;\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' tip-jar-wp-instruction-error';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_field_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.props.current_instruction;\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' tip-jar-wp-input-error';\n            }\n        }\n\n        return '';\n\n    };\n\n\t\tget_input_instruction_message() {\n\n\t\t\t\t// Get the current instruction for this field\n\t\t\t\tvar current_instruction = this.props.current_instruction;\n\n\t\t\t\t// Hard coding this for now so that it's easy to edit for users.\n\t\t\t\tvar current_instruction = 'initial';\n\n\t\t\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\t\t\treturn this.props.instruction_codes[current_instruction].instruction_message;\n\t\t\t\t}\n\n\t\t};\n\n\t\trender(){\n\n\t\t\tif ( this.props.is_edit_child ) {\n\t\t\t\treturn(\n\t\t\t\t\t<TipJarWPContentEditableAsChild\n\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\thtml_tag=\"div\"\n\t\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\t\tclassName: 'tip-jar-wp-input-instruction' + this.get_input_instruction_class()\n\t\t\t\t\t\t} }\n\t\t\t\t\t\thtml_tag_contents={ this.get_input_instruction_message() }\n\t\t\t\t\t\tediting_key={ this.props.editing_key }\n\t\t\t\t\t\tis_focused={ this.props.is_focused }\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn(\n\t\t\t\t\t<TipJarWPContentEditable\n\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\thtml_tag=\"div\"\n\t\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\t\tclassName: 'tip-jar-wp-input-instruction' + this.get_input_instruction_class()\n\t\t\t\t\t\t} }\n\t\t\t\t\t\thtml_tag_contents={ this.get_input_instruction_message() }\n\t\t\t\t\t\tediting_key={ this.props.editing_key }\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n};\nexport default Tip_Jar_WP_Input_Field;\n","window.Tip_Jar_WP_Radio_Field = class Tip_Jar_WP_Radio_Field extends React.Component {\n\n\tconstructor( props ) {\n\t\tsuper(props);\n\n\t\tthis.state= {\n\t\t\tinput_value: '',\n\t\t};\n\n\t\tthis.get_input_field_class = this.get_input_field_class.bind( this );\n\t\tthis.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n\t\tthis.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n\t};\n\n\tcomponentDidMount() {\n\n\t\tfor (var key in this.props.radio_buttons) {\n\t\t\tif ( this.props.radio_buttons[key].selected ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tinput_value: key\n\t\t\t\t}, function() {\n\t\t\t\t\t// Pass the default value back to the parent\n\t\t\t\t\tthis.props.set_validation_and_value_of_field(\n\t\t\t\t\t\tthis.props.state_validation_variable_name,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tthis.props.state_value_variable_name,\n\t\t\t\t\t\tthis.state.input_value\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tget_current_instruction_key() {\n\n\t\t// Handle the instruction only if the form containing this field has been submitted\n\t\tif ( this.props.form_validation_attempted ) {\n\n\t\t\t// If the form containing this field has been submitted\n\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\treturn 'empty';\n\t\t\t}\n\t\t\tif ( this.state.input_value ) {\n\t\t\t\treturn 'initial';\n\t\t\t}\n\n\t\t} else {\n\t\t\t// If the form containing this field has not yet been submitted\n\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\treturn 'initial';\n\t\t\t}\n\t\t\tif ( this.state.input_value ) {\n\t\t\t\treturn 'initial';\n\t\t\t}\n\t\t}\n\t}\n\n\tget_input_instruction_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' tip-jar-wp-instruction-error';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_field_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'success' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' tip-jar-wp-input-success';\n\t\t\t}\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' tip-jar-wp-input-error';\n\t\t\t}\n\t\t\tif ( 'initial' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_instruction_message() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\treturn this.props.instruction_codes[current_instruction].instruction_message;\n\t\t}\n\t};\n\n\thandle_input_change( event ) {\n\n\t\t// Set the validation of this field\n\t\tif ( ! event.target.value ) {\n\t\t\tvar is_validated = false;\n\t\t} else {\n\t\t\tvar is_validated = true;\n\t\t}\n\n\t\t// Pass the validation status back to the parent.\n\t\tthis.props.set_validation_and_value_of_field(\n\t\t\tthis.props.state_validation_variable_name,\n\t\t\tis_validated,\n\t\t\tthis.props.state_value_variable_name,\n\t\t\tevent.target.value\n\t\t);\n\n\t\tif ( this.props.form_validation_attempted ) {\n\t\t\tvar this_component = this;\n\t\t\t// Wait for the state to be set in the parent\n\t\t\tsetTimeout( function() {\n\t\t\t\tthis_component.props.validate_form( true );\n\t\t\t}, 10 );\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tinput_value: event.target.value\n\t\t} );\n\n\t};\n\n\trender_field_instructions() {\n\n\t\tif ( this.props.is_edit_child ) {\n\t\t\treturn(\n\t\t\t\t<TipJarWPContentEditableAsChild\n\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\thtml_tag=\"div\"\n\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\tclassName: 'tip-jar-wp-input-instruction' + this.get_input_instruction_class()\n\t\t\t\t\t} }\n\t\t\t\t\thtml_tag_contents={ this.get_input_instruction_message() }\n\t\t\t\t\tediting_key={ this.props.editing_key.replace( '[current_key_here]', this.get_current_instruction_key() ) }\n\t\t\t\t\tis_focused={ this.props.is_focused }\n\t\t\t\t/>\n\t\t\t)\n\t\t} else {\n\t\t\treturn(\n\t\t\t\t<TipJarWPContentEditable\n\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\thtml_tag=\"div\"\n\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\tclassName: 'tip-jar-wp-input-instruction' + this.get_input_instruction_class()\n\t\t\t\t\t} }\n\t\t\t\t\thtml_tag_contents={ this.get_input_instruction_message() }\n\t\t\t\t\tediting_key={ this.props.editing_key.replace( '[current_key_here]', this.get_current_instruction_key() ) }\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\t}\n\n\trender(){\n\n\t\tvar inputProps = {};\n\n\t\tif ( this.props.type ) {\n\t\t\tinputProps['type'] = this.props.type;\n\t\t}\n\n\t\tif ( this.props.class_name ) {\n\t\t\tinputProps['className'] = this.props.class_name + this.get_input_field_class();\n\t\t} else {\n\t\t\tinputProps['className'] = this.get_input_field_class();\n\t\t}\n\n\t\tif ( this.props.name ) {\n\t\t\tinputProps['name'] = this.props.name;\n\t\t}\n\n\t\tinputProps['onChange'] = this.handle_input_change.bind( this );\n\n\t\tinputProps['value'] = this.state.input_value;\n\n\t\tif ( this.props.disabled ) {\n\t\t\tinputProps['disabled'] = this.props.disabled;\n\t\t}\n\n\t\tvar mapper = [];\n\n\t\t// This lets us loop through the object\n\t\tfor (var key in this.props.radio_buttons) {\n\n\t\t\tmapper.push(\n\t\t\t\t<div key={ key } className={ \"tip-jar-wp-radio-button-container\" + ( key == this.state.input_value ? ' tip-jar-wp-radio-current' : '' ) }>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<div className=\"tip-jar-wp-radio-button-outer\">\n\t\t\t\t\t\t\t<div className=\"tip-jar-wp-radio-button-inner\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t{ ...inputProps }\n\t\t\t\t\t\t\t\t\tvalue={ key }\n\t\t\t\t\t\t\t\t\tchecked={ key == this.state.input_value ? true : false }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"tip-jar-wp-radio-button-after\">\n\t\t\t\t\t\t\t\t\t{ this.props.radio_buttons[key].after_output }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t)\n\n\t\t}\n\n\t\t// This lets us output the buttons one by one\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{ this.render_field_instructions() }\n\t\t\t\t<div className=\"tip-jar-wp-radio-buttons-container\">\n\t\t\t\t{\n\t\t\t\t\tmapper.map((radio_buttons, index) => {\n\t\t\t\t\t\treturn radio_buttons;\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t)\n\n\t}\n\n};\nexport default Tip_Jar_WP_Radio_Field;\n","import React from 'react';\nimport {useState, useEffect} from 'react';\nimport {CardElement} from '@stripe/react-stripe-js';\nimport {CardNumberElement} from '@stripe/react-stripe-js';\nimport {CardExpiryElement} from '@stripe/react-stripe-js';\nimport {CardCvcElement} from '@stripe/react-stripe-js';\nimport {useStripe, useElements} from '@stripe/react-stripe-js';\n\nwindow.Tip_Jar_WP_Stripe_All_In_One_Field = function Tip_Jar_WP_Stripe_All_In_One_Field(props) {\n  const [current_stripe_element, set_current_stripe_element] = useState(null);\n  const [stripe_card_error_code, set_stripe_card_error_code] = useState(null);\n  const [zip_code, set_zip_code] = useState('');\n  const stripe = useStripe();\n  const elements = useElements();\n\n  useEffect(() => {\n    if (props.stripe_card_error_code !== stripe_card_error_code) {\n      set_stripe_card_error_code(props.stripe_card_error_code);\n    }\n  }, []);\n\n  function get_current_instruction_key() {\n\n    // Handle the instruction only if the form containing this field has been submitted\n    if (props.form_validation_attempted) {\n\n      if (!stripe_card_error_code || 'none' == stripe_card_error_code) {\n        return 'success';\n      }\n      if (stripe_card_error_code) {\n        return stripe_card_error_code;\n      }\n\n    } else {\n\n      if (!stripe_card_error_code || 'none' == stripe_card_error_code) {\n        return 'success';\n      }\n      if (stripe_card_error_code) {\n        return 'initial';\n      }\n    }\n  }\n\n  function get_input_instruction_class() {\n\n    // Get the current instruction for this field\n    var current_instruction = get_current_instruction_key();\n\n    if (props.instruction_codes[current_instruction]) {\n      if ('error' == props.instruction_codes[current_instruction].instruction_type) {\n        return ' tip-jar-wp-instruction-error';\n      }\n    }\n\n    return '';\n\n  };\n\n  function get_input_field_class() {\n\n    // Get the current instruction for this field\n    var current_instruction = get_current_instruction_key();\n\n    if (props.instruction_codes[current_instruction]) {\n      if ('success' == props.instruction_codes[current_instruction].instruction_type) {\n        return ' tip-jar-wp-input-success';\n      }\n      if ('error' == props.instruction_codes[current_instruction].instruction_type) {\n        return ' tip-jar-wp-input-error';\n      }\n      if ('initial' == props.instruction_codes[current_instruction].instruction_type) {\n        return '';\n      }\n    }\n\n    return '';\n\n  };\n\n  function get_input_instruction_message() {\n\n    // Get the current instruction for this field\n    var current_instruction = get_current_instruction_key();\n\n    if (props.instruction_codes[current_instruction]) {\n      return props.instruction_codes[current_instruction].instruction_message;\n    } else {\n      return 'Please check the credit card fields';\n    }\n  };\n\n  function handle_cc_validation() {\n\n    if (props.form_validation_attempted) {\n      return;\n    }\n\n    if (!current_stripe_element) {\n      return;\n    }\n\n    let card_element = elements.getElement(CardElement);\n    const card_number_element = elements.getElement(CardNumberElement)\n\n    if (card_number_element) {\n      card_element = card_number_element;\n    }\n\n    // Pass the postal code up to the parent component.\n    props.card_form.setState({\n      cardElement: card_element,\n      postal_code: zip_code,\n      stripe_elements_fields_complete: true\n    }, () => {\n\n      // If the card form has been submitted, that means errors are probably showing. So we should try updating those errors on every keystroke now.\n      if (props.form_validation_attempted) {\n\n        // Check with Stripe to see if the data entered is a valid credit card.\n        props.create_stripe_source().then(() => {\n\n          // If it is a valid credit card, set the instructions above the field to be in their original state.\n          set_stripe_card_error_code('success');\n        }).catch((error) => {\n\n          // But if it is not a valid credit card, set the instructions to be the error code which we were given by the create_stripe_source function.\n          set_stripe_card_error_code(error);\n\n        });\n      }\n\n    });\n  }\n\n  function handle_zip_code_change(event) {\n    set_zip_code(event.target.value);\n  }\n\n  useEffect(() => {\n    if (zip_code) {\n      handle_cc_validation();\n    }\n  }, [zip_code]);\n\n  function handle_input_change(element) {\n    set_current_stripe_element(element);\n  }\n\n  useEffect(() => {\n    handle_cc_validation();\n  }, [current_stripe_element]);\n\n  function render_all_in_one_field() {\n      return (<CardElement onChange={(element) => handle_input_change(element, true)} options={{\n          style: {\n            base: {\n              fontSize: '15px',\n              color: '#424770',\n              letterSpacing: '0.025em',\n              fontFamily: 'Source Code Pro, Menlo, monospace',\n              '::placeholder': {\n                color: '#aab7c4'\n              }\n            },\n            invalid: {\n              color: '#9e2146'\n            }\n          }\n        }}/>)\n  }\n\n  function render_multi_field_cc_form() {\n\n      return (<div className='tip-jar-wp-cc-multi-field'>\n        <div>\n          <div className=\"tip-jar-wp-cc-multi-field-input-area\">\n            <label>\n              <div className=\"tip-jar-wp-cc-form-icon tip-jar-wp-credit-card-icon\">\n                <svg role=\"img\" className=\"Icon\" fill=\"#2b2b2b\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 30\">\n                  <title>Credit Card</title>\n                  <path fillRule=\"evenodd\" transform=\"translate(8, 10)\" d=\"M2.00585866,0 C0.898053512,0 0,0.900176167 0,1.99201702 L0,9.00798298 C0,10.1081436 0.897060126,11 2.00585866,11 L11.9941413,11 C13.1019465,11 14,10.0998238 14,9.00798298 L14,1.99201702 C14,0.891856397 13.1029399,0 11.9941413,0 L2.00585866,0 Z M2.00247329,1 C1.44882258,1 1,1.4463114 1,1.99754465 L1,9.00245535 C1,9.55338405 1.45576096,10 2.00247329,10 L11.9975267,10 C12.5511774,10 13,9.5536886 13,9.00245535 L13,1.99754465 C13,1.44661595 12.544239,1 11.9975267,1 L2.00247329,1 Z M1,3 L1,5 L13,5 L13,3 L1,3 Z M11,8 L11,9 L12,9 L12,8 L11,8 Z M9,8 L9,9 L10,9 L10,8 L9,8 Z M9,8\"></path>\n                </svg>\n              </div>\n              <CardNumberElement options={{\n                  style: {\n                    base: {\n                      fontSize: '19px'\n                    }\n                  }\n                }} onChange={(element) => handle_input_change(element, false)}/>\n            </label>\n          </div>\n\n          <div className=\"tip-jar-wp-cc-multi-field-input-area\">\n            <label>\n              <div className=\"tip-jar-wp-cc-form-icon tip-jar-wp-calendar-icon\">\n                <svg role=\"img\" className=\"Icon\" fill=\"#2b2b2b\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 30\">\n                  <title>Calendar</title>\n                  <path fillRule=\"evenodd\" transform=\"translate(8, 9)\" d=\"M2.0085302,1 C0.899249601,1 0,1.90017617 0,2.99201702 L0,10.007983 C0,11.1081436 0.901950359,12 2.0085302,12 L9.9914698,12 C11.1007504,12 12,11.0998238 12,10.007983 L12,2.99201702 C12,1.8918564 11.0980496,1 9.9914698,1 L2.0085302,1 Z M1.99539757,4 C1.44565467,4 1,4.43788135 1,5.00292933 L1,9.99707067 C1,10.5509732 1.4556644,11 1.99539757,11 L10.0046024,11 C10.5543453,11 11,10.5621186 11,9.99707067 L11,5.00292933 C11,4.44902676 10.5443356,4 10.0046024,4 L1.99539757,4 Z M3,1 L3,2 L4,2 L4,1 L3,1 Z M8,1 L8,2 L9,2 L9,1 L8,1 Z M3,0 L3,1 L4,1 L4,0 L3,0 Z M8,0 L8,1 L9,1 L9,0 L8,0 Z M8,0\"></path>\n                </svg>\n              </div>\n              <CardExpiryElement options={{\n                  style: {\n                    base: {\n                      fontSize: '19px'\n                    }\n                  }\n                }} onChange={(element) => handle_input_change(element, false)}/>\n            </label>\n          </div>\n\n          <div className=\"tip-jar-wp-cc-multi-field-input-area\">\n            <label>\n              <div className=\"tip-jar-wp-cc-form-icon tip-jar-wp-lock-icon\">\n                <svg role=\"img\" className=\"Icon\" fill=\"#2b2b2b\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 30\">\n                  <title>Lock</title>\n                  <path fillRule=\"evenodd\" transform=\"translate(9, 9)\" d=\"M8.8,4 C8.8,1.79086089 7.76640339,4.18628304e-07 5.5,0 C3.23359661,-4.1480896e-07 2.2,1.79086089 2.2,4 L3.2,4 C3.2,2.34314567 3.81102123,0.999999681 5.5,1 C7.18897877,1.00000032 7.80000001,2.34314567 7.80000001,4 L8.8,4 Z M1.99201702,4 C0.891856397,4 0,4.88670635 0,5.99810135 L0,10.0018986 C0,11.1054196 0.900176167,12 1.99201702,12 L9.00798298,12 C10.1081436,12 11,11.1132936 11,10.0018986 L11,5.99810135 C11,4.89458045 10.0998238,4 9.00798298,4 L1.99201702,4 Z M1.99754465,5 C1.44661595,5 1,5.45097518 1,5.99077797 L1,10.009222 C1,10.5564136 1.4463114,11 1.99754465,11 L9.00245535,11 C9.55338405,11 10,10.5490248 10,10.009222 L10,5.99077797 C10,5.44358641 9.5536886,5 9.00245535,5 L1.99754465,5 Z M1.99754465,5\"></path>\n                </svg>\n              </div>\n              <CardCvcElement options={{\n                  style: {\n                    base: {\n                      fontSize: '19px'\n                    }\n                  }\n                }} onChange={(element) => handle_input_change(element, false)}/>\n            </label>\n          </div>\n\n          <div className={'tip-jar-wp-cc-multi-field-input-area'}>\n            <label>\n              <div className=\"tip-jar-wp-cc-form-icon tip-jar-wp-zipcode-icon\">\n                <svg role=\"img\" className=\"Icon\" fill=\"#2b2b2b\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 30\">\n                  <title>Push-pin</title>\n                  <path fillRule=\"evenodd\" transform=\"translate(8, 7)\" d=\"M6.96835335,14.4141594 C7.14378184,14.2130951 7.33880908,13.9850182 7.54859821,13.7339676 C8.14789969,13.0167952 8.74728299,12.2571079 9.30845088,11.4862878 C10.9985122,9.16482011 12,7.25762947 12,5.80510753 C12,2.58994421 9.3050091,0 6,0 C2.6949909,0 0,2.58994421 0,5.80510753 C0,7.25762947 1.00148783,9.16482011 2.69154912,11.4862878 C3.25271701,12.2571079 3.85210031,13.0167952 4.45140179,13.7339676 C4.66119092,13.9850182 4.85621816,14.2130951 5.03164665,14.4141594 C5.13795558,14.5360035 5.2148819,14.6226158 5.25757295,14.6699269 L6,15.4927001 L6.74242705,14.6699269 C6.7851181,14.6226158 6.86204442,14.5360035 6.96835335,14.4141594 Z M5.25757295,13.3300731 C5.27604949,13.309597 5.30380421,13.278504 5.34014057,13.2373842 C3.98193439,11.6258984 1,7.854524 1,5.80510753 C1,3.15131979 3.23857611,1 6,1 C8.76142389,1 11,3.15131979 11,5.80510753 C11,7.854524 8.01806561,11.6258984 6.65985943,13.2373842 C6.69619579,13.278504 6.72395051,13.309597 6.74242705,13.3300731 L6.58151981,13.3300731 C6.22583758,13.7497221 6,14 6,14 C6,14 5.77416242,13.7497221 5.41848019,13.3300731 L5.25757295,13.3300731 Z M6,8 C7.10456955,8 8,7.10456955 8,6 C8,4.89543045 7.10456955,4 6,4 C4.89543045,4 4,4.89543045 4,6 C4,7.10456955 4.89543045,8 6,8 Z M6,7 C6.55228478,7 7,6.55228478 7,6 C7,5.44771522 6.55228478,5 6,5 C5.44771522,5 5,5.44771522 5,6 C5,6.55228478 5.44771522,7 6,7 Z M6,7\"></path>\n                </svg>\n              </div>\n              <input className={'tip-jar-wp-cc-multi-field-input-zip-code ' + get_zip_code_success_class()} value={zip_code} type=\"text\" onChange={handle_zip_code_change.bind(this)} placeholder={props.zip_code_placeholder}/>\n            </label>\n          </div>\n        </div>\n      </div>)\n  }\n  function get_zip_code_success_class() {\n\n    if (zip_code) {\n      return ' tip-jar-wp-input-success';\n    } else if (props.form_validation_attempted) {\n      return ' tip-jar-wp-input-error';\n    } else {\n      return '';\n    }\n  }\n\n  function render_credit_card_fields() {\n    if ( props.mobile_mode ) {\n      return render_multi_field_cc_form()\n    } else {\n      return render_all_in_one_field()\n    }\n  }\n\n  if (!props.disabled) {\n    return (<div className={'tip-jar-wp-cc-form tip-jar-wp-mobile'}>\n      <div className={'tip-jar-wp-input-instruction' + get_input_instruction_class()}>\n        {get_input_instruction_message()}\n      </div>\n      {render_credit_card_fields()}\n    </div>)\n  } else {\n    return '';\n  }\n}\n","window.Tip_Jar_WP_Terms_Field = class Tip_Jar_WP_Terms_Field extends React.Component {\n\n\tconstructor( props ) {\n\t\tsuper(props);\n\n\t\tthis.state= {\n\t\t\tterms_checked: null,\n\t\t\tterms_are_visible: false,\n\t\t\tis_edit_focused: false\n\t\t};\n\n\t\tthis.get_input_field_class = this.get_input_field_class.bind( this );\n\t\tthis.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n\t\tthis.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n\t\tthis.get_terms_visibility = this.get_terms_visibility.bind( this );\n\t};\n\n\tcomponentDidMount() {\n\n\t\t// If this checkbox was previously set as validated in the containing form, set the default to be checked\n\t\tif ( this.props.is_validated && this.props.form_validation_attempted ) {\n\t\t\tthis.setState( {\n\t\t\t\tterms_checked: true\n\t\t\t} );\n\t\t}\n\t}\n\n\tget_edit_in_focus_class() {\n\t\tif ( this.state.is_edit_focused ) {\n\t\t\treturn ' tip-jar-wp-edit-area-in-focus';\n\t\t} else {\n\t\t\treturn ' tip-jar-wp-edit-area-not-in-focus';\n\t\t}\n\t}\n\n\tdangerously_set_terms_body() {\n\t\t// The terms are not user input, and thus they do not pose a security risk. They do contain HTML from WordPress though, which is why we do this\n\t\treturn { __html: this.props.terms_body };\n\t}\n\n\tget_current_instruction_key() {\n\n\t\t// Handle the instruction differently when the form containing this field has been submitted\n\t\tif ( this.props.form_validation_attempted ) {\n\n\t\t\tif ( this.props.is_validated ) {\n\t\t\t\treturn 'checked';\n\t\t\t} else {\n\t\t\t\treturn 'unchecked';\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If the form containing this field has not yet been submitted\n\t\t\tif ( null == this.state.terms_checked ) {\n\t\t\t\treturn 'initial';\n\t\t\t}\n\t\t\tif ( this.state.terms_checked ) {\n\t\t\t\treturn 'checked';\n\t\t\t}\n\t\t\tif ( ! this.state.terms_checked || ! this.props.is_validated) {\n\t\t\t\treturn 'unchecked';\n\t\t\t}\n\n\t\t}\n\t}\n\n\tget_input_instruction_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' tip-jar-wp-instruction-error';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_field_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'success' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' tip-jar-wp-input-success';\n\t\t\t}\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' tip-jar-wp-input-error';\n\t\t\t}\n\t\t\tif ( 'initial' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_instruction_message() {\n\n\t\t// Forcing this to a single message for now.\n\t\treturn this.props.instruction_codes.initial.instruction_message;\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\treturn this.props.instruction_codes[current_instruction].instruction_message;\n\t\t}\n\t};\n\n\tget_terms_visibility() {\n\n\t\t// If editing mode is in focus for the terms, always show the terms text body\n\t\tif ( this.state.is_edit_focused ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif( this.state.terms_are_visible ) {\n\t\t\treturn '';\n\t\t} else {\n\t\t\treturn 'hidden';\n\t\t}\n\t}\n\n\ttoggle_full_terms() {\n\n\t\tif ( ! this.state.terms_are_visible ) {\n\t\t\tthis.setState( {\n\t\t\t\tterms_are_visible: true\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.setState( {\n\t\t\t\tterms_are_visible: false\n\t\t\t} );\n\t\t}\n\t}\n\n\thandle_terms_change( event ) {\n\n\t\tvar terms_checked;\n\n\t\t// This will toggle the privacy policy state\n\t\tif ( this.state.terms_checked ) {\n\t\t\tterms_checked = false;\n\t\t} else {\n\t\t\tterms_checked = true;\n\t\t}\n\n\t\t// Pass the validation status back to the parent.\n\t\tthis.props.set_validation_and_value_of_field(\n\t\t\tthis.props.state_validation_variable_name,\n\t\t\tterms_checked,\n\t\t);\n\n\t\tif ( this.props.form_validation_attempted ) {\n\t\t\tvar this_component = this;\n\t\t\t// Wait for the state to be set in the parent\n\t\t\tsetTimeout( function() {\n\t\t\t\tthis_component.props.validate_form( true );\n\t\t\t}, 10 );\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tterms_checked: terms_checked\n\t\t} );\n\n\t};\n\n\trender_terms_agree_field(){\n\n\t\tvar inputProps = {};\n\n\t\t// Set the initial checked state of this checkbox\n\t\tif ( null == this.state.terms_checked ) {\n\t\t\t// If this checkbox was previously set as validated in the containing form, set the default to be checked\n\t\t\tif ( this.props.is_validated && this.props.form_validation_attempted ) {\n\t\t\t\tinputProps['defaultChecked'] = 'checked';\n\t\t\t}\n\t\t}\n\n\t\tinputProps['onChange'] = this.handle_terms_change.bind( this );\n\n\t\tif ( this.props.class_name ) {\n\t\t\tinputProps['className'] = this.props.class_name + this.get_input_field_class();\n\t\t} else {\n\t\t\tinputProps['className'] = this.get_input_field_class();\n\t\t}\n\n\t\tif ( this.props.name ) {\n\t\t\tinputProps['name'] = this.props.name;\n\t\t}\n\n\t\tif ( this.props.placeholder ) {\n\t\t\tinputProps['placeholder'] = this.props.placeholder;\n\t\t}\n\n\t\tif ( this.props.defaultValue ) {\n\t\t\tinputProps['defaultValue'] = this.props.defaultValue;\n\t\t}\n\n\t\tif ( this.props.disabled ) {\n\t\t\tinputProps['disabled'] = this.props.disabled;\n\t\t}\n\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"checkbox\" { ...inputProps } />\n\t\t\t\t\t<div className=\"tip-jar-wp-terms-edit-container\">\n\t\t\t\t\t\t{ (() => {\n\t\t\t\t\t\t\tif ( this.props.main_component.state.editing_mode && this.state.is_edit_focused ) {\n\t\t\t\t\t\t\t\treturn tip_jar_wp_editing_strings.agreement_text;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})() }\n\t\t\t\t\t\t<TipJarWPContentEditableAsChild\n\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\thtml_tag=\"span\"\n\t\t\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\t\t\tclassName: 'tip-jar-wp-input-instruction' + this.get_input_instruction_class()\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\thtml_tag_contents={ this.get_input_instruction_message() }\n\t\t\t\t\t\t\tediting_key={ 'strings/input_field_instructions/privacy_policy/initial/instruction_message' }\n\t\t\t\t\t\t\tis_focused={ this.state.is_edit_focused }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<span> </span>\n\t\t\t\t<div className=\"tip-jar-wp-terms-edit-container\">\n\t\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( this.props.main_component.state.editing_mode && this.state.is_edit_focused ) {\n\t\t\t\t\t\t\treturn tip_jar_wp_editing_strings.view_terms_button_text;\n\t\t\t\t\t\t}\n\t\t\t\t\t})() }\n\t\t\t\t\t<TipJarWPContentEditableAsChild\n\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\thtml_tag=\"a\"\n\t\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\t\tclassName: 'tip-jar-wp-view-terms-button',\n\t\t\t\t\t\t\tonClick: this.toggle_full_terms.bind( this ),\n\t\t\t\t\t\t} }\n\t\t\t\t\t\thtml_tag_contents={ this.props.terms_show_text }\n\t\t\t\t\t\tediting_key={ 'strings/input_field_instructions/privacy_policy/terms_show_text' }\n\t\t\t\t\t\tis_focused={ this.state.is_edit_focused }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n\trender_terms_title_and_description() {\n\t\treturn(\n\t\t\t<div hidden={ this.get_terms_visibility() } className={ 'tip-jar-wp-expandable-terms' }>\n\t\t\t\t{ (() => {\n\t\t\t\t\tif ( this.props.main_component.state.editing_mode && this.state.is_edit_focused ) {\n\t\t\t\t\t\treturn tip_jar_wp_editing_strings.terms_and_conditions_title;\n\t\t\t\t\t}\n\t\t\t\t})() }\n\t\t\t\t<TipJarWPContentEditableAsChild\n\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\thtml_tag=\"div\"\n\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\tclassName: 'tip-jar-wp-terms-title',\n\t\t\t\t\t} }\n\t\t\t\t\thtml_tag_contents={ this.props.terms_title }\n\t\t\t\t\tediting_key={ 'strings/input_field_instructions/privacy_policy/terms_title' }\n\t\t\t\t\tis_focused={ this.state.is_edit_focused }\n\t\t\t\t/>\n\t\t\t\t{ (() => {\n\t\t\t\t\tif ( this.props.main_component.state.editing_mode && this.state.is_edit_focused ) {\n\t\t\t\t\t\treturn tip_jar_wp_editing_strings.terms_and_conditions_body;\n\t\t\t\t\t}\n\t\t\t\t})() }\n\t\t\t\t<TipJarWPContentEditableAsChild\n\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\thtml_tag=\"div\"\n\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\tclassName: 'tip-jar-wp-terms-body',\n\t\t\t\t\t\tdangerouslySetInnerHTML: this.dangerously_set_terms_body(),\n\t\t\t\t\t} }\n\t\t\t\t\thtml_tag_contents={ this.props.terms_body }\n\t\t\t\t\tediting_key={ 'strings/input_field_instructions/privacy_policy/terms_body' }\n\t\t\t\t\tis_focused={ this.state.is_edit_focused }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t}\n\n\trender_edit_and_hide_buttons() {\n\t\treturn(\n\t\t\t<div className=\"tip-jar-wp-edit-button-container\">\n\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( ! this.state.is_edit_focused ) {\n\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-edit-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.set_focus.bind( this, true, 'edit' ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.edit\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( this.state.is_edit_focused ) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"button tip-jar-wp-view-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.set_focus.bind( this, false, 'view' ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttip_jar_wp_editing_strings.view\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tset_focus( should_be_focused, context, event ) {\n\t\tevent.preventDefault();\n\t\tthis.setState( {\n\t\t\tis_edit_focused: should_be_focused\n\t\t});\n\t}\n\n\trender() {\n\n\t\t// If we are in editing mode...\n\t\tif ( this.props.main_component.state.editing_mode ) {\n\n\t\t\treturn (\n\t\t\t\t<div className={ 'tip-jar-wp-edit-container' + this.get_edit_in_focus_class() }>\n\t\t\t\t\t{ this.render_edit_and_hide_buttons() }\n\t\t\t\t\t{ this.render_terms_title_and_description() }\n\t\t\t\t\t{ this.render_terms_agree_field() }\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\t// If we are not in editing mode...\n\t\t} else {\n\n\t\t\tif ( this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_body ) {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t{ this.render_terms_title_and_description() }\n\t\t\t\t\t\t{ this.render_terms_agree_field() }\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t}\n\n};\nexport default Tip_Jar_WP_Terms_Field;\n","window.Tip_Jar_WP_TextArea_Field = class Tip_Jar_WP_TextArea_Field extends React.Component {\n\n    constructor( props ) {\n        super(props);\n\n        this.state= {\n            input_value: '',\n        };\n\n        this.get_input_field_class = this.get_input_field_class.bind( this );\n        this.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n        this.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n    };\n\n\t\tcomponentDidMount() {\n\t\t\tthis.setState( {\n\t\t\t\tinput_value: this.props.value\n\t\t\t} );\n\t\t}\n\n    get_current_instruction_key() {\n\n        // If the form containing this field has not yet been submitted\n        if ( ! this.state.input_value && this.props.is_validated ) {\n            return 'initial';\n        }\n\t\t\t\tif ( this.props.value == this.state.input_value && ! this.props.is_validated ) {\n\t\t\t\t\t\treturn 'initial';\n\t\t\t\t}\n        if ( this.state.input_value  && 'typing' == this.props.is_validated ) {\n            return 'initial';\n        }\n        if ( this.state.input_value  && 'saving' == this.props.is_validated ) {\n            return 'saving';\n        }\n        if ( this.state.input_value  && this.props.is_validated ) {\n            return 'success';\n        }\n        if ( this.state.input_value  && ! this.props.is_validated ) {\n            return 'error';\n        }\n\n        return 'initial';\n    }\n\n    get_input_instruction_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' tip-jar-wp-instruction-error';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_field_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'success' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' tip-jar-wp-input-success';\n            }\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' tip-jar-wp-input-error';\n            }\n            if ( 'initial' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return '';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_instruction_message() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            return this.props.instruction_codes[current_instruction].instruction_message;\n        }\n    };\n\n    handle_input_change( event ) {\n\n        // Set the validation of this field\n        if ( ! event.target.value ) {\n            var is_validated = false;\n        } else {\n            var is_validated = true;\n        }\n\n        // Pass the validation status back to the parent.\n        this.props.set_validation_and_value_of_field(\n            this.props.state_validation_variable_name,\n            is_validated,\n            this.props.state_value_variable_name,\n            event.target.value\n        );\n\n        if ( this.props.form_validation_attempted ) {\n            var this_component = this;\n            // Wait for the state to be set in the parent\n            setTimeout( function() {\n                this_component.props.validate_form( true );\n            }, 10 );\n        }\n\n        this.setState( {\n            input_value: event.target.value\n        } );\n\n    };\n\n    render(){\n\n        var inputProps = {};\n\n        if ( this.props.type ) {\n            inputProps['type'] = this.props.type;\n        }\n\n        if ( this.props.class_name ) {\n            inputProps['className'] = this.props.class_name + this.get_input_field_class();\n        } else {\n            inputProps['className'] = this.get_input_field_class();\n        }\n\n        if ( this.props.name ) {\n            inputProps['name'] = this.props.name;\n        }\n\n        inputProps['onChange'] = this.handle_input_change.bind( this );\n\n        if ( this.props.placeholder ) {\n            inputProps['placeholder'] = this.props.placeholder;\n        }\n\n        inputProps['value'] = this.state.input_value;\n\n        if ( this.props.step ) {\n            inputProps['step'] = this.props.step;\n        }\n\n        if ( this.props.disabled ) {\n            inputProps['disabled'] = this.props.disabled;\n        }\n\n        return(\n            <div>\n                <label>\n\t\t\t\t\t\t\t\t\t<TipJarWPContentEditable\n\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\thtml_tag=\"div\"\n\t\t\t\t\t\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'tip-jar-wp-input-instruction' + this.get_input_instruction_class()\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\thtml_tag_contents={ this.get_input_instruction_message() }\n\t\t\t\t\t\t\t\t\t\tediting_key={ this.props.editing_key.replace( '[current_key_here]', this.get_current_instruction_key() ) }\n\t\t\t\t\t\t\t\t\t/>\n                    <textarea { ...inputProps } />\n                </label>\n\n            </div>\n        )\n    }\n\n};\nexport default Tip_Jar_WP_TextArea_Field;\n","var tip_jar_wp_vars = tip_jar_wp_js_vars.tip_form_vars;\n\nwindow.Tip_Jar_WP_Payment_Confirmation = class Tip_Jar_WP_Payment_Confirmation extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tnote_with_tip_value: null,\n\t\t\tnote_with_tip_validated: false,\n\n\t\t\tform_validation_attempted: false,\n\t\t\ttime_since_last_keypress: 0,\n\t\t\tafter_payment_actions_completed: false,\n\t\t\tprint_html: null,\n\t\t\tsending_email_receipt: false,\n\t\t\temail_receipt_success: null\n\t\t};\n\n\t\tthis.note_with_tip_keypress_delay;\n\t\tthis.render_refunded_output = this.render_refunded_output.bind( this );\n\t\tthis.email_transaction_receipt = this.email_transaction_receipt.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\t// Set up our print HTML upon mount\n\t\tif ( this.props.main_component.state.dom_node ) {\n\t\t\tthis.setState( {\n\t\t\t\tprint_html: this.props.main_component.state.dom_node.outerHTML\n\t\t\t} );\n\t\t}\n\n\t\t// If we should fire the actions that take place after a payment upon component mounting...\n\t\tif ( this.props.do_after_payment_actions ) {\n\t\t\tthis.do_after_payment_actions();\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\t// Update our print HTML upon mount\n\t\tif ( this.props.main_component.state.dom_node ) {\n\t\t\tif ( this.state.print_html != this.props.main_component.state.dom_node.outerHTML ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tprint_html: this.props.main_component.state.dom_node.outerHTML\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t}\n\n\tdo_after_payment_actions() {\n\t\tthis.email_transaction_receipt( true, false );\n\t}\n\n\tget_transaction_visual_amount() {\n\n\t\tvar cents = this.props.main_component.state.current_transaction_info.transaction_charged_amount;\n\t\tvar currency = this.props.main_component.state.current_transaction_info.transaction_charged_currency;\n\t\tvar is_zero_decimal_currency = this.props.main_component.state.current_transaction_info.transaction_currency_is_zero_decimal;\n\t\tvar string_after = ' (' + currency.toUpperCase() + ')';\n\n\t\treturn tip_jar_wp_format_money( cents, currency, is_zero_decimal_currency, string_after );\n\n\t}\n\n\tget_arrangement_visual_amount() {\n\n\t\tvar cents = this.props.main_component.state.current_transaction_info.arrangement_info.amount;\n\t\tvar currency = this.props.main_component.state.current_transaction_info.arrangement_info.currency;\n\t\tvar is_zero_decimal_currency = this.props.main_component.state.current_transaction_info.arrangement_info.is_zero_decimal_currency;\n\t\tvar string_after = this.props.main_component.state.current_transaction_info.arrangement_info.string_after + ' (' + currency.toUpperCase() + ')';\n\n\t\treturn tip_jar_wp_format_money( cents, currency, is_zero_decimal_currency, string_after );\n\n\t}\n\n\tmaybe_render_the_period_this_transaction_covers() {\n\n\t\tvar start_date = this.props.main_component.state.current_transaction_info.transaction_period_start_date;\n\t\tvar end_date = this.props.main_component.state.current_transaction_info.transaction_period_end_date;\n\t\tvar period_string;\n\n\t\tif ( ! start_date || ! end_date ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif ( '0000-00-00 00:00:00' == start_date || '0000-00-00 00:00:00' == end_date ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tperiod_string = tip_jar_wp_format_date( start_date ) + ' - ' + tip_jar_wp_format_date( end_date );\n\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title\">{ this.props.main_component.state.unique_settings.strings.transaction_period + ': ' }</span>\n\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value\">{ period_string }</span>\n\t\t\t</div>\n\t\t);\n\n\t}\n\n\tvalidate_form( modify_state ) {\n\n\t\tvar all_fields_validate = true;\n\n\t\t// Note with tip field\n\t\tif ( ! this.state.note_with_tip_validated ) {\n\t\t\tall_fields_validate = false;\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\temail_transaction_receipt( notify_admin_too = false, send_regardless_of_initial_emails_sent = false ) {\n\n\t\tthis.setState( {\n\t\t\tsending_email_receipt: true,\n\t\t\temail_receipt_success: null\n\t\t} );\n\n\t\t// Do any after-payment actions that need to take place via ajax\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'tip_jar_wp_email_transaction_receipt' );\n\t\tpostData.append('tip_jar_wp_transaction_id', this.props.main_component.state.current_transaction_info.transaction_id);\n\t\tpostData.append('tip_jar_wp_session_id', this.props.main_component.state.session_id);\n\t\tpostData.append('tip_jar_wp_user_id', this.props.main_component.state.user_id);\n\t\tpostData.append('tip_jar_wp_notify_admin_too', notify_admin_too);\n\t\tpostData.append('tip_jar_wp_send_regardless_of_initial_emails_sent', send_regardless_of_initial_emails_sent);\n\t\tpostData.append('tip_jar_wp_email_transaction_receipt_nonce', this.props.main_component.state.frontend_nonces.tip_jar_wp_email_transaction_receipt_nonce);\n\n\t\tvar this_component = this;\n\n\t\t// Here we will handle anything that needs to be done after the payment was completed.\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_email_transaction_receipt', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tsending_email_receipt: false,\n\t\t\t\t\t\temail_receipt_success: false\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tsending_email_receipt: false,\n\t\t\t\t\t\t\t\temail_receipt_success: true\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.log( data );\n\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tsending_email_receipt: false,\n\t\t\t\t\t\t\t\temail_receipt_success: false\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch( () => {\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tsending_email_receipt: false,\n\t\t\t\t\t\temail_receipt_success: false\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log( response );\n\t\t\t\t} );\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tsending_email_receipt: false,\n\t\t\t\t\temail_receipt_success: false\n\t\t\t\t} );\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\t}\n\n\tset_validation_and_value_of_field( state_validation_variable, is_validated, state_value_variable = null, state_value = null ) {\n\n\t\tif ( 'note_with_tip_value' != state_value_variable ) {\n\n\t\t\tif ( null == state_value_variable ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t\t[state_value_variable]: state_value,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If we are saving the note with tip\n\t\t\tvar old_note_with_tip = this.state.note_with_tip;\n\t\t\tvar this_component = this;\n\n\t\t\t// We won't set the validation to true until the ajax response comes back\n\t\t\tthis.setState( {\n\t\t\t\tnote_with_tip_validated: 'typing',\n\t\t\t\tnote_with_tip_value: state_value,\n\t\t\t} );\n\n\t\t\t// If nothing has changed since the state was last set\n\t\t\tif ( state_value == old_note_with_tip ) {\n\n\t\t\t\t// Do nothing\n\t\t\t\treturn false;\n\n\t\t\t} else {\n\n\t\t\t\t// Set up a delay which waits to save the tip until .5 seconds after they stop typing.\n\t\t\t\tif( this.note_with_tip_keypress_delay ) {\n\t\t\t\t\t// Clear the keypress delay if the user just typed\n\t\t\t\t\tclearTimeout( this.note_with_tip_keypress_delay );\n\t\t\t\t\tthis.note_with_tip_keypress_delay = null;\n\t\t\t\t}\n\n\t\t\t\t// (Re)-Set up the save_note_with_tip to fire in 500ms\n\t\t\t\tthis.note_with_tip_keypress_delay = setTimeout( function() {\n\t\t\t\t\tclearTimeout( this.note_with_tip_keypress_delay );\n\t\t\t\t\tthis_component.save_note_with_tip( state_value );\n\t\t\t\t}, 500);\n\n\t\t\t}\n\t\t}\n\t}\n\n\tsave_note_with_tip( note_with_tip ) {\n\n\t\tthis.setState( {\n\t\t\tnote_with_tip_validated: 'saving',\n\t\t} );\n\n\t\t// We'll auto save the entered tip note into the database's transaction field via ajax every time the person stops typing for 1 second.\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'tip_jar_wp_save_note_with_tip');\n\t\tpostData.append('tip_jar_wp_transaction_id', this.props.main_component.state.current_transaction_info.transaction_id);\n\t\tpostData.append('tip_jar_wp_note_with_tip', this.state.note_with_tip_value);\n\t\tpostData.append('tip_jar_wp_session_id', this.props.main_component.state.session_id);\n\t\tpostData.append('tip_jar_wp_user_id', this.props.main_component.state.user_id);\n\t\tpostData.append('tip_jar_wp_note_with_tip_nonce', this.props.main_component.state.frontend_nonces.note_with_tip_nonce);\n\n\t\tvar this_component = this;\n\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_save_note_with_tip', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' +\n\t\t\t\t\tresponse.status);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// The note was successfully saved. Adjust the validation to true\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tnote_with_tip_validated: true,\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log( data );\n\n\t\t\t\t\t\t\t// The note was not successfully saved. Adjust the validation to false\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tnote_with_tip_validated: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\t}\n\n\trender_email_button() {\n\n\t\tvar email_message = '';\n\n\t\t// If the receipt was just successfully sent, or just failed to send\n\t\tif ( this.state.email_receipt_success ) {\n\t\t\temail_message = <div className=\"tip-jar-wp-email-receipt-message\">{ this.props.main_component.state.unique_settings.strings.email_receipt_success }</div>\n\t\t}\n\n\t\tif ( null !== this.state.email_receipt_success && ! this.state.email_receipt_success ) {\n\t\t\temail_message = <div className=\"tip-jar-wp-email-receipt-message\">{ this.props.main_component.state.unique_settings.strings.email_receipt_failed }</div>\n\t\t}\n\n\t\tif ( this.state.sending_email_receipt ) {\n\t\t\treturn (\n\t\t\t\t<div className=\"tip-jar-wp-email-receipt\">\n\t\t\t\t\t{ this.props.main_component.state.unique_settings.strings.email_receipt_sending }\n\t\t\t\t\t<button type=\"button\" className={ 'tip-jar-wp-pay-button' }>{ this.props.main_component.state.unique_settings.strings.email_receipt_sending }</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif ( ! this.state.sending_email_receipt ) {\n\t\t\treturn (\n\t\t\t\t<div className=\"tip-jar-wp-email-receipt\">\n\t\t\t\t\t{ email_message }\n\t\t\t\t\t<button type=\"button\" className={ 'tip-jar-wp-pay-button' } onClick={ this.email_transaction_receipt.bind( this, false, true ) }>{ this.props.main_component.state.unique_settings.strings.email_receipt }</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t}\n\n\trender_print_button() {\n\n\t\tif ( this.state.print_html ) {\n\n\t\t\tif( typeof window.print == 'function' ) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"tip-jar-wp-print-receipt\">\n\t\t\t\t\t<button type=\"button\" className={ 'tip-jar-wp-pay-button' } onClick={ tip_jar_wp_print_div.bind( null, this.state.print_html, this.props.main_component.state.unique_settings.strings.receipt_title, 'tip_jar_wp_default_skin-css' ) }>{ this.props.main_component.state.unique_settings.strings.print_receipt }</button>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\n\t\t}\n\t}\n\n\trender_manage_payments_button() {\n\n\t\tif ( ! this.props.show_manage_payments ) {\n\t\t\treturn( '' );\n\t\t}\n\n\t\treturn(\n\t\t\t<button type=\"button\" className={ 'tip-jar-wp-manage-payments-button tip-jar-wp-input-instruction tip-jar-wp-text-button' } onClick={ this.props.main_component.set_all_current_visual_states.bind( null, {\n\t\t\t\tmanage_payments: {}\n\t\t\t}, false ) }>{ this.props.main_component.state.unique_settings.strings.manage_payments_button_text }</button>\n\t\t);\n\n\t}\n\n\trender_refunded_output() {\n\n\t\t// If this is a refund transaction\n\t\tif ( 'refund' == this.props.main_component.state.current_transaction_info.transaction_type ) {\n\t\t\treturn( 'This is a refund for transaction' + ' ' + this.props.main_component.state.current_transaction_info.refund_id );\n\t\t}\n\n\t\t// If this is an initial transaction that has been refunded\n\t\tif ( this.props.main_component.state.current_transaction_info.refund_id ) {\n\t\t\tif (\n\t\t\t\t'initial' == this.props.main_component.state.current_transaction_info.transaction_type ||\n\t\t\t\t'renewal' == this.props.main_component.state.current_transaction_info.transaction_type\n\t\t\t) {\n\t\t\t\treturn( 'This transaction has been refunded. See transaction ' + this.props.main_component.state.current_transaction_info.refund_id );\n\t\t\t}\n\t\t}\n\n\t\treturn( '' );\n\n\t}\n\n\trender_things_before_receipt() {\n\n\t\t// Don't show extra things on refund receipts, like note with tip\n\t\tif ( 'refund' == this.props.main_component.state.current_transaction_info.transaction_type ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"tip-jar-wp-confirmation-message\">\n\t\t\t\t{ this.props.main_component.state.unique_settings.strings.thank_you_message }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-confirmation-note\">\n\t\t\t\t{\n\t\t\t\t\t<Tip_Jar_WP_TextArea_Field\n\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\tstate_validation_variable_name={ 'note_with_tip_validated' }\n\t\t\t\t\t\tstate_value_variable_name={ 'note_with_tip_value' }\n\t\t\t\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\t\t\tis_validated={ this.state.note_with_tip_validated }\n\t\t\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.note_with_tip }\n\t\t\t\t\t\tediting_key={ 'strings/input_field_instructions/note_with_tip/[current_key_here]/instruction_message' }\n\t\t\t\t\t\tvalue={ this.props.main_component.state.current_transaction_info ? this.props.main_component.state.current_transaction_info.transaction_note_with_tip : '' }\n\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclass_name={ 'tip-jar-wp-note-with-tip' }\n\t\t\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.note_with_tip.placeholder_text }\n\t\t\t\t\t\tname=\"tip-amount\"\n\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\n\n\t}\n\n\tmaybe_render_plan_details() {\n\n\t\tif ( 'off' !== this.props.main_component.state.current_transaction_info.arrangement_info.recurring_status ) {\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_id_title + ': ' }</span>\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value\">{ this.props.main_component.state.current_transaction_info.arrangement_info.id }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_amount_title + ': ' }</span>\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value\">{ this.get_arrangement_visual_amount() }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ this.maybe_render_the_period_this_transaction_covers() }\n\t\t\t\t</React.Fragment>\n\t\t\t)\n\t\t}\n\n\t}\n\n\trender() {\n\n\t\tif ( ! this.props.main_component.state.current_transaction_info ) {\n\t\t\treturn ( <Tip_Jar_WP_Spinner /> );\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"tip-jar-wp-payment-confirmation\">\n\t\t\t\t{ this.render_things_before_receipt() }\n\t\t\t\t<div className=\"tip-jar-wp-receipt\">\n\t\t\t\t\t<div className=\"tip-jar-wp-receipt-title\">\n\t\t\t\t\t{ this.props.main_component.state.unique_settings.strings.receipt_title }\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"tip-jar-wp-receipt-field-space-below\">\n\t\t\t\t\t\t{ this.props.main_component.state.current_transaction_info.email }\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"tip-jar-wp-receipt-field-space-below\">\n\t\t\t\t\t\t{ this.render_refunded_output() }\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"tip-jar-wp-receipt-payee\">\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title tip-jar-wp-receipt-payee-title\">{ ( 'refund' == this.props.main_component.state.current_transaction_info.transaction_type ? this.props.main_component.state.unique_settings.strings.refund_payer : this.props.main_component.state.unique_settings.strings.receipt_payee ) + ': ' }</span>\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value tip-jar-wp-receipt-payee-value\">{ this.props.main_component.state.current_transaction_info.payee_name }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"tip-jar-wp-receipt-transaction-id\">\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title tip-jar-wp-receipt-transaction-id-title\">{ this.props.main_component.state.unique_settings.strings.receipt_transaction_id + ': ' }</span>\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value tip-jar-wp-receipt-transaction-id-value\">{ this.props.main_component.state.current_transaction_info.transaction_id }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"tip-jar-wp-receipt-transaction-date\">\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title tip-jar-wp-receipt-date-title\">{ this.props.main_component.state.unique_settings.strings.receipt_date + ': ' }</span>\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value tip-jar-wp-receipt-date-value\">{ tip_jar_wp_format_date_and_time( this.props.main_component.state.current_transaction_info.transaction_date_created ) }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"tip-jar-wp-receipt-amount\">\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title tip-jar-wp-receipt-transaction-amount-title\">{ this.props.main_component.state.unique_settings.strings.receipt_transaction_amount + ': ' }</span>\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value tip-jar-wp-receipt-transaction-amount-value\">{ this.get_transaction_visual_amount() }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"tip-jar-wp-receipt-statement-descriptor\">\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title tip-jar-wp-receipt-transaction-amount-title\">{ this.props.main_component.state.unique_settings.strings.receipt_statement_descriptor + ': ' }</span>\n\t\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value tip-jar-wp-receipt-transaction-amount-value\">{ this.props.main_component.state.current_transaction_info.statement_descriptor }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ this.maybe_render_plan_details() }\n\n\t\t\t\t\t<div className='tip-jar-wp-receipt-action-button'>\n\t\t\t\t\t\t<Tip_Jar_WP_File_Download_Button\n\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\tcard_form={ null }\n\t\t\t\t\t\t\temail_value={ this.props.main_component.state.current_transaction_info.email }\n\t\t\t\t\t\t\temail_validated={ true }\n\t\t\t\t\t\t\tprivacy_policy_validated={ true }\n\t\t\t\t\t\t\tmode={ 'receipt' }\n\t\t\t\t\t\t />\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t\t{ this.render_email_button() }\n\t\t\t\t{ this.render_print_button() }\n\t\t\t\t{ this.render_manage_payments_button() }\n\t\t\t</div>\n\t\t)\n\t}\n\n}\nexport default Tip_Jar_WP_Payment_Confirmation;\n\n// This function takes html, puts it on a single page, and then sets that page to print.\nfunction tip_jar_wp_print_div( html_to_print, page_title_to_use, css_stylesheet_id ) {\n\n\t// Copy the <head> tag\n\tvar head_tag = document.querySelector( 'head' );\n\n\tvar mywindow = window.open( '', page_title_to_use, 'height=6000,width=8000' );\n\tmywindow.document.write( head_tag.outerHTML );\n\tmywindow.document.write( '<body class=\"tip-jar-wp-print-page\">' );\n\tmywindow.document.write( html_to_print );\n\tmywindow.document.write( '</body></html>' );\n\n\t// Wait for 1 second before attempting to print it so it can write everything and load the CSS\n\tsetTimeout( function() {\n\n\t\tmywindow.focus()\n\t\tmywindow.print();\n\n\t}, 2000 );\n\n\treturn true;\n}\n","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.9.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n};\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import {loadStripe} from '@stripe/stripe-js';\nimport {Elements} from '@stripe/react-stripe-js';\nimport {PaymentRequestButtonElement} from '@stripe/react-stripe-js';\n\nwindow.Tip_Jar_WP_Payment_Box = class Tip_Jar_WP_Payment_Box extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tmap_of_visual_states: {\n\t\t\t\tpayment: {\n\t\t\t\t\tvariable: {}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcurrent_visual_state: 'form', //loading, form, confirmation, success\n\t\t\thas_been_in_view: false,\n\t\t\tstripe: loadStripe(this.props.main_component.state.dynamic_settings.stripe_api_key),\n\t\t\tcurrent_title_string: this.props.main_component.state.unique_settings.strings.form_title,\n\t\t}\n\n\t\tthis.container_element = React.createRef();\n\n\t}\n\n\tcomponentDidMount() {\n\n\t\ttip_jar_wp_set_visual_state_of_component( {\n\t\t\t\tcomponent: this,\n\t\t\t\tdefault_visual_states: {\n\t\t\t\t\tparent_in_view: 'form',\n\t\t\t\t\tparent_not_in_view: 'none'\n\t\t\t\t},\n\t\t\t\tname_of_visual_state_variable: 'current_visual_state'\n\t\t} );\n\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\ttip_jar_wp_set_visual_state_of_component( {\n\t\t\t\tcomponent: this,\n\t\t\t\tdefault_visual_states: {\n\t\t\t\t\tparent_in_view: 'form',\n\t\t\t\t\tparent_not_in_view: 'none'\n\t\t\t\t},\n\t\t\t\tname_of_visual_state_variable: 'current_visual_state'\n\t\t} );\n\n\t}\n\n\tget_current_title() {\n\n\t\t// If the current visual state is loading\n\t\tif( 'loading' == this.state.current_visual_state ) {\n\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<h1 className=\"tip-jar-wp-header-title\">{ this.props.main_component.state.unique_settings.strings.loading }</h1>\n\t\t\t\t</React.Fragment>\n\t\t\t)\n\n\t\t}\n\n\t\t// If the current visual state is form\n\t\tif( 'form' == this.state.current_visual_state ) {\n\n\t\t\treturn(\n\t\t\t\t<TipJarWPContentEditable\n\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\thtml_tag=\"h1\"\n\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\tclassName: 'tip-jar-wp-header-title'\n\t\t\t\t\t} }\n\t\t\t\t\thtml_tag_contents={ this.props.main_component.state.unique_settings.strings.form_title }\n\t\t\t\t\tinstructional_html_tag_contents={ \"Optional title here.\" }\n\t\t\t\t\tediting_key='strings/form_title'\n\t\t\t\t/>\n\t\t\t)\n\n\t\t}\n\n\t\t// For now we are just using this title for everything.\n\t\treturn(\n\t\t\t<TipJarWPContentEditable\n\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\thtml_tag=\"h1\"\n\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\tclassName: 'tip-jar-wp-header-title'\n\t\t\t\t} }\n\t\t\t\thtml_tag_contents={ this.props.main_component.state.unique_settings.strings.form_title }\n\t\t\t\tinstructional_html_tag_contents={ \"Optional title here.\" }\n\t\t\t\tediting_key='strings/form_title'\n\t\t\t/>\n\t\t)\n\n\t\t// If the current visual state is confirmation\n\t\tif( 'confirmation' == this.state.current_visual_state ) {\n\n\t\t\treturn(\n\t\t\t\t<TipJarWPContentEditable\n\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\thtml_tag=\"h1\"\n\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\tclassName: 'tip-jar-wp-header-title'\n\t\t\t\t\t} }\n\t\t\t\t\thtml_tag_contents={ this.props.main_component.state.unique_settings.strings.payment_confirmation_title }\n\t\t\t\t\tinstructional_html_tag_contents={ tip_jar_wp_editing_strings.optional_title_here }\n\t\t\t\t\tediting_key='strings/payment_confirmation_title'\n\t\t\t\t/>\n\t\t\t)\n\n\t\t}\n\t}\n\n\tget_current_subtitle() {\n\n\t\t// If the current visual state is loading\n\t\tif( 'loading' == this.state.current_visual_state ) {\n\n\t\t\treturn '';\n\n\t\t}\n\n\t\t// If the current visual state is form\n\t\tif( 'form' == this.state.current_visual_state ) {\n\n\t\t\treturn(\n\t\t\t\t<TipJarWPContentEditable\n\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\thtml_tag=\"h2\"\n\t\t\t\t\thtml_tag_attributes={ {\n\t\t\t\t\t\tclassName: 'tip-jar-wp-header-subtitle'\n\t\t\t\t\t} }\n\t\t\t\t\thtml_tag_contents={ this.props.main_component.state.unique_settings.strings.form_subtitle }\n\t\t\t\t\tinstructional_html_tag_contents={ tip_jar_wp_editing_strings.optional_subtitle_here }\n\t\t\t\t\tediting_html_tag=\"textarea\"\n\t\t\t\t\tediting_key='strings/form_subtitle'\n\t\t\t\t/>\n\t\t\t)\n\n\t\t}\n\t}\n\n\trender_current_media() {\n\t\tvar html_tag;\n\t\tvar html_tag_attributes;\n\t\tvar html_tag_contents = null;\n\n\t\tif ( ! this.props.main_component.state.unique_settings.header_media ) {\n\t\t\thtml_tag = 'div';\n\t\t\thtml_tag_attributes = {\n\t\t\t\tclassName: 'tip-jar-wp-header-media',\n\t\t\t};\n\t\t\thtml_tag_contents = tip_jar_wp_editing_strings.optional_header_media_here;\n\t\t} else if ( this.props.main_component.state.unique_settings.header_media.url.includes(\".mp3\") ) {\n\t\t\thtml_tag = 'audio';\n\t\t\thtml_tag_attributes = {\n\t\t\t\tclassName: 'tip-jar-wp-header-media',\n\t\t\t\tsrc: this.props.main_component.state.unique_settings.header_media.url,\n\t\t\t\tcontrols: true\n\t\t\t};\n\t\t} else if ( this.props.main_component.state.unique_settings.header_media.url.includes(\".mp4\") ) {\n\t\t\thtml_tag = 'video';\n\t\t\thtml_tag_attributes = {\n\t\t\t\tclassName: 'tip-jar-wp-header-media',\n\t\t\t\tsrc: this.props.main_component.state.unique_settings.header_media.url,\n\t\t\t\tcontrols: true\n\t\t\t};\n\t\t} else if ( this.props.main_component.state.unique_settings.header_media.url.includes(\".jpg\") ) {\n\t\t\thtml_tag = 'img';\n\t\t\thtml_tag_attributes = {\n\t\t\t\tclassName: 'tip-jar-wp-header-media',\n\t\t\t\tsrc: this.props.main_component.state.unique_settings.header_media.url,\n\t\t\t};\n\t\t} else {\n\t\t\thtml_tag = 'div';\n\t\t\thtml_tag_attributes = {\n\t\t\t\tclassName: 'tip-jar-wp-header-media',\n\t\t\t};\n\t\t}\n\n\t\treturn(\n\t\t\t<TipJarWPEditFile\n\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\tattachment_data={ this.props.main_component.state.unique_settings.header_media }\n\t\t\t\thtml_tag={ html_tag }\n\t\t\t\thtml_tag_attributes={ html_tag_attributes }\n\t\t\t\thtml_tag_contents={ html_tag_contents }\n\t\t\t\tediting_key='header_media'\n\t\t\t/>\n\t\t)\n\t}\n\n\tmaybe_render_close_button() {\n\n\t\tif ( ! this.props.show_close_button ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"tip-jar-wp-close-btn\" aria-label=\"Close\" onClick={ this.props.main_component.handle_visual_state_change_click_event.bind( this, {}, {} ) }><img src={ this.props.main_component.state.dynamic_settings.close_button_url } /></div>\n\t\t);\n\t}\n\n\trender() {\n\n\t\tif ( 'none' == this.state.current_visual_state ) {\n\t\t\treturn (\n\t\t\t\t''\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t\t<div className=\"tip-jar-wp-component-box\" ref={this.container_element}>\n\n\t\t\t\t\t\t<header className=\"tip-jar-wp-header\" role=\"banner\">\n\t\t\t\t\t\t\t{ this.get_current_title() }\n\t\t\t\t\t\t\t{ this.get_current_subtitle() }\n\t\t\t\t\t\t\t{ this.render_current_media() }\n\t\t\t\t\t\t\t{ this.maybe_render_close_button() }\n\t\t\t\t\t\t</header>\n\n\t\t\t\t\t\t{ (() => {\n\t\t\t\t\t\t\tif ( 'loading' == this.state.current_visual_state ) {\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-payment-box-view tip-jar-wp-payment-loading-view' } style={(() => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tpadding: this.container_element.current && this.container_element.current.offsetWidth > 320 ? '36px': '10px',\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})()}>\n\t\t\t\t\t\t\t\t\t\t<Tip_Jar_WP_Spinner />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})() }\n\n\t\t\t\t\t\t{ ( () => {\n\t\t\t\t\t\t\tif ( 'form' == this.state.current_visual_state ) {\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<div className=\"tip-jar-wp-payment-form-container\">\n\t\t\t\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-payment-box-view' } style={(() => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tpadding: this.container_element.current && this.container_element.current.offsetWidth > 320 ? '36px': '10px',\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})()}>\n\t\t\t\t\t\t\t\t\t\t\t<Elements stripe={this.state.stripe}>\n\t\t\t\t\t\t\t\t\t\t\t\t<CardForm\n\t\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\t\tstripe={this.state.stripe}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmobile_mode={this.container_element.current && this.container_element.current.offsetWidth < 320 }\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Elements>\n\t\t\t\t\t\t\t\t\t\t\t<TipJarWPEditFileDownload\n\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\tediting_key={ 'file_download_attachment_data' }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} )() }\n\n\t\t\t\t\t\t{ ( () => {\n\t\t\t\t\t\t\tif ( 'confirmation' == this.state.current_visual_state ) {\n\n\t\t\t\t\t\t\t\tif ( ! this.props.main_component.state.current_transaction_info ) {\n\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-payment-box-view tip-jar-wp-payment-confirmation-view' }>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\tNo transaction found.\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ this.props.main_component.set_all_current_visual_states.bind( null, {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmanage_payments: {}\n\t\t\t\t\t\t\t\t\t\t\t\t}, false ) }\n\t\t\t\t\t\t\t\t\t\t\t>Manage your payments</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-payment-box-view tip-jar-wp-payment-confirmation-view' }>\n\t\t\t\t\t\t\t\t\t\t<Tip_Jar_WP_Payment_Confirmation\n\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\tdo_after_payment_actions={ true }\n\t\t\t\t\t\t\t\t\t\t\tshow_manage_payments={ true }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} )() }\n\n\t\t\t\t\t\t{ ( () => {\n\t\t\t\t\t\t\tif ( 'free_file_download_completion' === this.state.current_visual_state ) {\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-payment-box-view tip-jar-wp-payment-confirmation-view' }>\n\t\t\t\t\t\t\t\t\t\t<Tip_Jar_WP_File_Download_Completion\n\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} )() }\n\n\t\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n}\nexport default Tip_Jar_WP_Payment_Box;\n\nclass Tip_Jar_WP_Card_Form extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state= {\n\t\t\tmap_of_visual_states: {\n\t\t\t\tpayment: {\n\t\t\t\t\tform: {\n\t\t\t\t\t\tvariable: {}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tstripe_is_set: false,\n\t\t\tcanDoPaymentRequest: false,\n\t\t\tpaymentRequest : null,\n\t\t\tdefault_payment_mode: null,\n\t\t\tpayment_mode: null, //credit_card or payment_request\n\t\t\tpayment_method_name: null, // basic-card, apple-pay, payment-request\n\t\t\tpayment_request_button_name: null,\n\t\t\tform_has_any_error: false,\n\t\t\tform_validation_attempted: false,\n\t\t\tcurrent_payment_state: 'initial',\n\n\t\t\t// Currency states\n\t\t\tcurrency_search_visible: false,\n\t\t\tuser_typed_currency: this.props.main_component.state.unique_settings.currency_code,\n\t\t\tverified_currency: this.props.main_component.state.unique_settings.currency_code,\n\t\t\tverified_currency_symbol: this.props.main_component.state.unique_settings.currency_symbol,\n\t\t\tverified_currency_type: this.props.main_component.state.unique_settings.currency_type,\n\n\t\t\tstripe_error_message: null,\n\t\t\tstripe_payment_method: null,\n\n\t\t\ttip_amount: this.props.main_component.state.unique_settings.default_amount,\n\n\t\t\tprivacy_policy_validated: false,\n\n\t\t\temail_value: null,\n\t\t\temail_validated: false,\n\n\t\t\tname_value: null,\n\t\t\tname_validated: false,\n\n\t\t\trecurring_value: null,\n\t\t\trecurring_validated: false,\n\n\t\t\tinput_fields_tip_amount_current_instruction: 'initial',\n\t\t\tinput_fields_stripe_all_in_one_current_instruction: 'initial',\n\t\t};\n\n\t\tthis.currency_text_input = React.createRef();\n\t\tthis.check_for_payment_request_availability = this.check_for_payment_request_availability.bind( this );\n\t\tthis.validate_tip_amount = this.validate_tip_amount.bind( this );\n\t\tthis.handleCreditCardSubmit = this.handleCreditCardSubmit.bind( this );\n\t\tthis.set_payment_mode = this.set_payment_mode.bind( this );\n\t\tthis.get_currency_flag_class = this.get_currency_flag_class.bind( this );\n\t\tthis.create_stripe_payment_method = this.create_stripe_payment_method.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\n\t\t// Upon mount, clear the current transaction and arrangement.\n\t\t// This handles back-clicks from the manage payments state, and prevents double \"after-payment completed\" actions.\n\t\tthis.props.main_component.setState( {\n\t\t\tcurrent_transaction_info: null,\n\t\t\tcurrent_arrangement_info: null,\n\t\t} );\n\n\t\t//this.check_for_payment_request_availability();\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\ttip_jar_wp_set_visual_state_of_component( {\n\t\t\t\tcomponent: this,\n\t\t\t\tdefault_visual_states: {\n\t\t\t\t\tparent_in_view: this.state.default_payment_mode,\n\t\t\t\t\tparent_not_in_view: 'none'\n\t\t\t\t},\n\t\t\t\tname_of_visual_state_variable: 'payment_mode'\n\t\t} );\n\n\t\tthis.check_for_payment_request_availability();\n\n\t\t// Pass the email value up to the main component.\n\t\tif ( this.props.main_component.state.form_email_value !== this.state.email_value ) {\n\t\t\tthis.props.main_component.setState( {\n\t\t\t\tform_email_value: this.state.email_value\n\t\t\t} );\n\t\t}\n\n\t}\n\n\tcountry_supports_payment_request_button() {\n\t\tvar country_code = this.props.main_component.state.dynamic_settings.stripe_account_country_code;\n\n\t\t// Has to be a supported country for Stripe: https://stripe.com/global\n\t\tvar payment_request_countries = ['AT', 'AU', 'BE', 'BR', 'CA', 'CH', 'DE', 'DK', 'EE', 'ES', 'FI', 'FR', 'GB', 'GR', 'HK', 'IE', 'IN', 'IT', 'JP', 'LT', 'LU', 'LV', 'MX', 'MY', 'NL', 'NO', 'NX', 'PH', 'PL', 'PT', 'RO', 'SE', 'SG', 'SK', 'US'];\n\n\t\tif ( payment_request_countries.indexOf( country_code ) ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tcheck_for_payment_request_availability() {\n\n\t\t// If stripe has now loaded and we haven't checked for Payment Request capabilities yet (Apple Pay, Google Pay, etc)\n\t\tif ( this.props.stripe && ! this.state.stripe_is_set ) {\n\n\t\t\t// Set up a placeholder payment request just to see if we can do it\n\t\t\tvar paymentRequest = this.props.stripe.paymentRequest({\n\t\t\t\tcountry: this.props.main_component.state.dynamic_settings.stripe_account_country_code,\n\t\t\t\tcurrency: this.state.verified_currency ? this.state.verified_currency.toLowerCase() : 'USD',\n\t\t\t\ttotal: {\n\t\t\t\t\tlabel: this.props.main_component.state.unique_settings.strings.payment_request_label,\n\t\t\t\t\tamount: this.state.tip_amount,\n\t\t\t\t},\n\t\t\t\trequestPayerEmail: true,\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tstripe_is_set: true,\n\t\t\t});\n\n\t\t\t// If we can make a Payment Request (Apple Pay, Google Pay, etc)\n\t\t\tpaymentRequest.canMakePayment().then(result => {\n\n\t\t\t\t// If we can do a PaymentRequest in this browser\n\t\t\t\tif ( !!result && this.country_supports_payment_request_button() ) {\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcanDoPaymentRequest: !!result,\n\t\t\t\t\t\tpaymentRequest: paymentRequest,\n\t\t\t\t\t\tdefault_payment_mode: 'payment_request'\n\t\t\t\t\t}, () => {\n\n\t\t\t\t\t\t// If no payment mode has been set in the URL, set the default one to Payment Request.\n\t\t\t\t\t\t// But if a payment mode was set through the URL, we want to keep it.\n\t\t\t\t\t\tif ( ! this.state.payment_mode\t) {\n\t\t\t\t\t\t\t// We are not using this.set_payment_method here because we don't want to affect the URL, since this is a fresh page load.\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tpayment_mode: 'payment_request',\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If a payment mode was set in the URL, but it isn't one of the available ones, set the URL and payment mode to the default here.\n\t\t\t\t\t\telse if (\n\t\t\t\t\t\t\t'payment_request' !== this.state.payment_mode &&\n\t\t\t\t\t\t\t'credit_card' !== this.state.payment_mode\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.set_payment_mode( 'payment_request' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse if ( 'credit_card' === this.state.payment_mode ) {\n\t\t\t\t\t\t\tthis.set_payment_mode( 'credit_card' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\t// This fires once a paymentRequest has been completed by the user.\n\t\t\t\t\tpaymentRequest.on('paymentmethod', (result) => {\n\n\t\t\t\t\t\tconst { source, error, complete } = result;\n\n\t\t\t\t\t\tif ( result.error ) {\n\t\t\t\t\t\t\t// Handle error...\n\t\t\t\t\t\t\tstripe_error_message: result.error.message\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tstripe_payment_method: result.paymentMethod,\n\t\t\t\t\t\t\temail_validated: true,\n\t\t\t\t\t\t\temail_value: result.payerEmail,\n\t\t\t\t\t\t\tpayment_method_name: 'apple-pay' != result.methodName ? 'payment-request' : result.methodName,\n\t\t\t\t\t\t\tpayment_request_button_name: 'apple-pay' != result.methodName ? 'payment-request' : result.methodName,\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Send the token to the server for processing\n\t\t\t\t\t\tthis.do_ajax_stripe_transaction();\n\n\t\t\t\t\t\t// Close the browser modal\n\t\t\t\t\t\tcomplete('success');\n\t\t\t\t\t});\n\n\t\t\t\t\t// Create an event which will fire one everything is rendered, allowing other things to respond at that time.\n\t\t\t\t\tdocument.dispatchEvent( new Event('tip_jar_wp_rendered') );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Payment request is not available in this browser.\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcanDoPaymentRequest: !!result,\n\t\t\t\t\t\tdefault_payment_mode: 'credit_card',\n\t\t\t\t\t\tpayment_method_name: 'basic-card'\n\t\t\t\t\t}, () => {\n\n\t\t\t\t\t\t// If no payment mode has been set in the URL, set the default one to Credit Card\n\t\t\t\t\t\t// But if a payment mode was set through the URL, we want to keep it.\n\t\t\t\t\t\tif ( ! this.state.payment_mode\t) {\n\t\t\t\t\t\t\t// We are not using this.set_payment_method here because we don't want to affect the URL, since this is a fresh page load.\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tpayment_mode: 'credit_card',\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.set_payment_mode( 'credit_card' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Create an event which will fire one everything is rendered, allowing other things to respond at that time.\n\t\t\t\t\t\tdocument.dispatchEvent( new Event('tip_jar_wp_rendered') );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t}\n\n\t// This is for displaying the amount in an input field.\n\tget_visual_amount_for_input_field( format_decimals ) {\n\n\t\tif ( 0 === this.state.tip_amount ) {\n\t\t\t//Do nothing...\n\t\t} else if( ! this.state.tip_amount ) {\n\t\t\treturn '';\n\t\t}\n\n\t\t// If this is not a zero-decimal currency, divide the amount by 100\n\t\tif ( 'zero_decimal' !== this.state.verified_currency_type ) {\n\t\t\tvar visual_tip_amount = this.state.tip_amount / 100;\n\t\t\t// Only format it to 2 decimal places on the initial. This lets people backspace and type their own amount.\n\t\t\tif ( format_decimals ) {\n\t\t\t\tvisual_tip_amount = visual_tip_amount.toFixed(2);\n\t\t\t}\n\t\t} else {\n\t\t\tvar visual_tip_amount = this.state.tip_amount;\n\t\t}\n\n\t\treturn visual_tip_amount;\n\t}\n\n\t// This is for displaying the amount, but not for inside an input field.\n\tget_visual_amount() {\n\n\t\tif ( 0 === this.state.tip_amount ) {\n\t\t\t//Do nothing...\n\t\t} else if( ! this.state.tip_amount ) {\n\t\t\treturn '';\n\t\t}\n\n\t\t// If this is not a zero-decimal currency, divide the amount by 100\n\t\tif ( 'zero_decimal' !== this.state.verified_currency_type ) {\n\t\t\tvar visual_tip_amount = this.state.tip_amount / 100;\n\t\t\tvisual_tip_amount = visual_tip_amount.toFixed(2);\n\t\t} else {\n\t\t\tvar visual_tip_amount = this.state.tip_amount;\n\t\t}\n\n\t\t// Localize the amount (commas as decimal places, etc)\n\t\tvisual_tip_amount = visual_tip_amount.toLocaleString();\n\n\t\treturn  this.state.verified_currency_symbol + visual_tip_amount;\n\t}\n\n\tget_amount_field_step_format() {\n\t\t// If this is not a zero-decimal currency, handle all the decimal requirements\n\t\tif ( 'zero_decimal' !== this.state.verified_currency_type ) {\n\t\t\tvar step_format = \"0.01\";\n\t\t} else {\n\t\t\tvar step_format = \"1\";\n\t\t}\n\n\t\t// At this point HTML5 number forms don't seem to support translated decimals. But if they do, use tip_jar_wp_get_decimal_character_for_locale to get it\n\t\treturn step_format;\n\t}\n\n\t// This function will return a class that either transitions an element in or out, based on the view state of this component\n\tget_view_class( payment_modes ) {\n\n\t\tvar currently_in_view_class_name = 'tip-jar-wp-current-view';\n\t\tvar hidden_class_name = 'tip-jar-wp-hidden-view';\n\n\t\t// If the item in question should be shown based on the current payment mode of this component\n\t\tif( payment_modes.indexOf( this.state.payment_mode ) != -1 ) {\n\n\t\t\treturn ' ' + currently_in_view_class_name;\n\n\t\t} else {\n\n\t\t\treturn ' ' + hidden_class_name;\n\n\t\t}\n\n\t}\n\n\tget_disabled_status( payment_modes ) {\n\n\t\t// If the item in question should be shown based on the current view of this component\n\t\tif( payment_modes.indexOf( this.state.payment_mode ) != -1 ) {\n\n\t\t\treturn '';\n\n\t\t} else {\n\n\t\t\treturn 'disabled';\n\n\t\t}\n\t}\n\n\t// Validate the Tip Amount field\n\tvalidate_tip_amount( all_fields_validate, modify_state ) {\n\n\t\t// If the payment mode is free_file_download, allow a 0 amount.\n\t\tif ( 'free_file_download' === this.state.payment_mode ) {\n\n\t\t\t// If the amount the user entered is \"0\"\n\t\t\tif ( 0 === this.state.tip_amount ) {\n\n\t\t\t\t// Set the error state of the field to initial (because 0 is fine).\n\t\t\t\tif ( modify_state ) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tinput_fields_tip_amount_current_instruction: 'initial'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If the payment mode is anything other than free_file_download (like credit_card), require an amount\n\t\t} else if ( ! this.state.tip_amount ) {\n\t\t\t\tall_fields_validate = false;\n\n\t\t\t\tif ( modify_state ) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tinput_fields_tip_amount_current_instruction: 'empty'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t} else {\n\n\t\t\tif ( modify_state ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tinput_fields_tip_amount_current_instruction: 'initial'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\tvalidate_currency( all_fields_validate, modify_state ) {\n\n\t\t// Validate the currency field\n\t\tif ( ! this.state.verified_currency ) {\n\n\t\t\tall_fields_validate = false;\n\n\t\t\tif ( modify_state ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tinput_fields_tip_amount_current_instruction: 'invalid_currency'\n\t\t\t\t});\n\t\t\t}\n\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\tcreate_stripe_payment_method() {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tvar this_component = this;\n\n\t\t\t// Set the validation of this field\n\t\t\tthis.props.stripe.createPaymentMethod(\n\t\t\t\t{\n\t\t\t\t\ttype: 'card',\n\t\t\t\t\tcard: this.state.cardElement,\n\t\t\t\t\tbilling_details: {\n\t\t\t\t\t\taddress: {\n\t\t\t\t\t\t\tpostal_code: this.state.postal_code\n\t\t\t\t\t\t},\n\t\t\t\t\t\temail: this.state.email_value,\n\t\t\t\t\t\tname: this.props.name_value,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t).then(function(result) {\n\t\t\t\tif (result.error) {\n\n\t\t\t\t\t// Show error in payment form\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tstripe_payment_method: null,\n\t\t\t\t\t\tstripe_card_error_code: result.error.code\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\treject(result.error.code);\n\t\t\t\t\t\treturn result.error;\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tstripe_payment_method: result.paymentMethod,\n\t\t\t\t\t\tstripe_card_error_code: 'success'\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\tresolve( result.paymentMethod );\n\t\t\t\t\t\treturn result.paymentMethod;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\t// Show error in payment form\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tstripe_payment_method: null,\n\t\t\t\t\tstripe_card_error_code: null,\n\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t};\n\n\tvalidate_form( modify_state = true ) {\n\n\t\tvar all_fields_validate = true;\n\n\t\t// Credit Card form specific fields\n\t\tif ( 'credit_card' == this.state.payment_mode ) {\n\n\t\t\t// Name field\n\t\t\tif ( ! this.state.name_validated ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t\t// Email field\n\t\t\tif ( ! this.state.email_validated ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t\t// Stripe all in one field\n\t\t\tif ( ! this.state.stripe_payment_method ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t}\n\n\t\t// Fields present no matter the payment mode\n\t\tall_fields_validate = this.validate_tip_amount( all_fields_validate, modify_state );\n\t\tall_fields_validate = this.validate_currency( all_fields_validate, modify_state );\n\n\t\t// Privacy Policy\n\t\tif ( this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_body ) {\n\t\t\tif ( ! this.state.privacy_policy_validated ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( modify_state ) {\n\n\t\t\tthis.setState( {\n\t\t\t\tform_validation_attempted: true\n\t\t\t} );\n\n\t\t\tif ( ! all_fields_validate ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: true,\n\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: false,\n\t\t\t\t\tcurrent_payment_state: 'initial',\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\thandleCreditCardSubmit( event ){\n\n\t\tevent.preventDefault();\n\n\t\tthis.setState( {\n\t\t\tcurrent_payment_state: 'attempting_payment'\n\t\t});\n\n\t\t// Create a stripe source using the submitted info\n\t\tthis.create_stripe_payment_method().then( () => {\n\n\t\t\t// Validate the fields\n\t\t\tvar allow_form_to_be_submitted = this.validate_form( true );\n\n\t\t\t// Prevent the form submission if a field didn't validate\n\t\t\tif ( ! allow_form_to_be_submitted ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t}, () => {\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\tthis.do_ajax_stripe_transaction();\n\t\t\t}\n\n\t\t} ).catch((err) => {\n\n\t\t\tthis.setState( {\n\t\t\t\tstripe_card_error_code: err,\n\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t}, () => {\n\t\t\t\tconsole.log( err );\n\t\t\t});\n\n\t\t\t// Validate the fields\n\t\t\tvar allow_form_to_be_submitted = this.validate_form( true );\n\n\t\t\t// Prevent the form submission if a field didn't validate\n\t\t\treturn false;\n\n\t\t} );\n\n\t}\n\n\tdo_ajax_stripe_transaction() {\n\n\t\tthis.setState( {\n\t\t\tcurrent_payment_state: 'attempting_payment'\n\t\t});\n\n\t\tvar this_component = this;\n\n\t\t// Send the request to the server so that we can create a PaymentIntent\n\n\t\t// Use ajax to do the stripe transaction on the server using this data.\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'tip_jar_wp_get_payment_intent' );\n\t\tpostData.append('tip_jar_wp_stripe_payment_method_id', this_component.state.stripe_payment_method.id);\n\t\tpostData.append('tip_jar_wp_note', this_component.state.note_value);\n\t\tpostData.append('tip_jar_wp_note_name', this_component.state.note_name_value);\n\t\tpostData.append('tip_jar_wp_amount', this_component.state.tip_amount);\n\t\tpostData.append('tip_jar_wp_email', this_component.state.email_value);\n\t\tpostData.append('tip_jar_wp_currency', this_component.state.verified_currency.toLowerCase());\n\t\tpostData.append('tip_jar_wp_method', this_component.state.payment_method_name);\n\t\tpostData.append('tip_jar_wp_form_id', this_component.props.main_component.state.unique_settings.id);\n\t\tpostData.append('tip_jar_wp_page_url', this_component.props.main_component.state.single_page_app_base_url);\n\t\tpostData.append('tip_jar_wp_recurring_value', this_component.state.recurring_value);\n\t\tpostData.append('tip_jar_wp_payment_intent_nonce', this_component.props.main_component.state.frontend_nonces.payment_intent_nonce);\n\n\t\t// First off, generate and get a PaymentIntent on the server\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_get_payment_intent', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\t\tstripe_error_message: 'Looks like there was a problem. Status Code: ' + response.status\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Pass the PaymentIntent's client secret off to Stripe\n\t\t\t\t\t\t\tthis_component.props.stripe.confirmPaymentIntent(\n\t\t\t\t\t\t\t\tdata.client_secret,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsave_payment_method: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t).then( function( payment_intent_result ){\n\n\t\t\t\t\t\t\t\t// If the Payment Intent was unable to be confirmed\n\t\t\t\t\t\t\t\tif ( payment_intent_result.error ) {\n\n\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\t\t\t\t\t\tstripe_error_message: payment_intent_result.error.message\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// Success with no 3DS\n\t\t\t\t\t\t\t\t\tif ('succeeded' === payment_intent_result.paymentIntent.status) {\n\n\t\t\t\t\t\t\t\t\t\t// Send us to the purchase confirmation, where we'll send it to the server to be stored\n\t\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\tcurrent_payment_state: 'success'\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\tsession_id: data.session_id,\n\t\t\t\t\t\t\t\t\t\t\tuser_id: data.user_id,\n\t\t\t\t\t\t\t\t\t\t\tcurrent_transaction_info: data.transaction_info\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t// Wait for a moment and then show the purchase confirmation view\n\t\t\t\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\t\t\t\tthis_component.props.main_component.set_all_current_visual_states( {\n\t\t\t\t\t\t\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfirmation: {}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\t\t\tdocument.dispatchEvent( new Event('tip_jar_wp_payent_completed') );\n\t\t\t\t\t\t\t\t\t\t}, 1000 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t// It didn't go through without 3DS so try it as a card payment so we can use Stripe simpified 3DS\n\t\t\t\t\t\t\t\t\t\t// We got a payment intent from Stripe, so process it now\n\t\t\t\t\t\t\t\t\t\tthis_component.props.stripe.handleCardPayment(\n\t\t\t\t\t\t\t\t\t\t\tdata.client_secret,\n\t\t\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t\t\t).then(function(payment_intent_result) {\n\t\t\t\t\t\t\t\t\t\t\t// If the response from handleCardPayment was no good\n\t\t\t\t\t\t\t\t\t\t\tif (payment_intent_result.error) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log( payment_intent_result.error );\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Display error.message in the UI.\n\t\t\t\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\t\t\t\t\t\t\t\t\tstripe_error_message: payment_intent_result.error.message\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// The PaymentIntent was successful\n\t\t\t\t\t\t\t\t\t\t\t\t// Send us to the purchase confirmation, where we'll send it to the server to be stored\n\t\t\t\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrent_payment_state: 'success'\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsession_id: data.session_id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser_id: data.user_id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrent_transaction_info: data.transaction_info\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Wait for a moment and then show the purchase confirmation view\n\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis_component.props.main_component.set_all_current_visual_states( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfirmation: {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.dispatchEvent( new Event('tip_jar_wp_payent_completed') );\n\t\t\t\t\t\t\t\t\t\t\t\t}, 1000 );\n\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\t\t\t\tstripe_error_message: data.details\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\n\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\t\t\tstripe_error_message: 'Unable to make payment at this time. Please try again.'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\tstripe_error_message: this_component.strings.general_server_error\n\t\t\t\t});\n\n\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\thandleAmountChange( event ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tvar tip_amount = event.target.value;\n\n\t\t\t// If this is not a zero-decimal currency, multiply the amount by 100\n\t\t\tif ( 'zero_decimal' !== this.state.verified_currency_type ) {\n\t\t\t\tvar stripe_tip_amount = Number( tip_amount ) * 100;\n\t\t\t} else {\n\t\t\t\tvar stripe_tip_amount = Number( tip_amount );\n\t\t\t}\n\n\t\t\t// Make sure the math is all done correctly since javascript is strange at multiplication\n\t\t\tstripe_tip_amount = Number( stripe_tip_amount.toFixed(0) );\n\n\t\t\t// If the user has entered \"0\"...\n\t\t\tif ( \"0\" === tip_amount ) {\n\n\t\t\t\t// If File Download mode has been set up, change to free file download mode if the amount is 0.\n\t\t\t\tif ( this.props.main_component.state.unique_settings.file_download_attachment_data.file_download_mode_enabled ) {\n\t\t\t\t\tthis.set_payment_mode( 'free_file_download' ).then( () => {\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\ttip_amount: 0,\n\t\t\t\t\t\t\tinput_fields_tip_amount_current_instruction: 'initial',\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\tif ( this.state.form_has_any_error ) {\n\t\t\t\t\t\t\t\tthis.validate_form( true );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t// If the user has entered a value of 1 or greater...\n\t\t\t} else if ( 1 <= stripe_tip_amount ) {\n\n\t\t\t\t// Update the payment request button to match the amount\n\t\t\t\tif ( this.state.paymentRequest ) {\n\n\t\t\t\t\t// If the amount was 0, but it's back to greater-than-zero now, show the payment request mode again.\n\t\t\t\t\tif ( 'free_file_download' === this.state.payment_mode ) {\n\t\t\t\t\t\tthis.set_payment_mode( 'payment_request' );\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.state.paymentRequest.update({\n\t\t\t\t\t\tcurrency: this.state.verified_currency.toLowerCase(),\n\t\t\t\t\t\ttotal: {\n\t\t\t\t\t\t\tlabel: this.props.main_component.state.unique_settings.strings.payment_request_label,\n\t\t\t\t\t\t\tamount: stripe_tip_amount,\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\n\t\t\t\t\t// If the amount was 0, but it's back to greater-than-zero now, show the credit-card mode again.\n\t\t\t\t\tif ( 'free_file_download' === this.state.payment_mode ) {\n\t\t\t\t\t\tthis.set_payment_mode( 'credit_card' );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\ttip_amount: stripe_tip_amount,\n\t\t\t\t\tpaymentRequest: this.state.paymentRequest\n\t\t\t\t}, () => {\n\t\t\t\t\tif ( this.state.form_has_any_error ) {\n\t\t\t\t\t\tthis.validate_form( true );\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\n\t\t\t\t} );\n\n\t\t\t\t// If the amount field is currently blank...\n\t\t\t} else {\n\n\t\t\t\tif ( this.state.paymentRequest ) {\n\n\t\t\t\t\t// If the amount was 0, but it's back to greater-than-zero now, show the payment request mode again.\n\t\t\t\t\tif ( 'free_file_download' === this.state.payment_mode ) {\n\t\t\t\t\t\tthis.set_payment_mode( 'payment_request' );\n\n\t\t\t\t\t\tthis.state.paymentRequest.update({\n\t\t\t\t\t\t\tcurrency: this.state.verified_currency.toLowerCase(),\n\t\t\t\t\t\t\ttotal: {\n\t\t\t\t\t\t\t\tlabel: this.props.main_component.state.unique_settings.strings.payment_request_label,\n\t\t\t\t\t\t\t\tamount: 0,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.set_payment_mode( 'credit_card' );\n\t\t\t\t}\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\ttip_amount: null,\n\t\t\t\t}, () => {\n\t\t\t\t\tif ( this.state.form_has_any_error ) {\n\t\t\t\t\t\tthis.validate_form( true );\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t});\n\n\t};\n\n\thandlePaymentRequestValidateButton( event ) {\n\n\t\tthis.validate_form( true );\n\n\t};\n\n\tset_payment_mode( mode ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\tif ( 'toggle' == mode ) {\n\t\t\t\tif ( 'payment_request' == this.state.payment_mode ) {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tpayment_mode: 'credit_card',\n\t\t\t\t\t\tpayment_method_name: 'basic-card',\n\t\t\t\t\t\tstripe_error_message: null,\n\t\t\t\t\t\tform_has_any_error: false,\n\t\t\t\t\t\tform_validation_attempted: false,\n\t\t\t\t\t}, () => {\n\n\t\t\t\t\t\t// Update the visual state of the entire Single Page Application so that the URL is updated as well\n\t\t\t\t\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\t\tform: {\n\t\t\t\t\t\t\t\t\t[this.state.payment_mode]: {}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} ).then( () => {\n\t\t\t\t\t\t\tresolve( this.state );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\t\t\t\t} else if ( 'credit_card' == this.state.payment_mode ) {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tpayment_mode: 'payment_request',\n\t\t\t\t\t\tpayment_method_name: this.state.payment_request_button_name,\n\t\t\t\t\t\tstripe_error_message: null,\n\t\t\t\t\t\tform_has_any_error: false,\n\t\t\t\t\t\tform_validation_attempted: false,\n\t\t\t\t\t}, () => {\n\n\t\t\t\t\t\t// Update the visual state of the entire Single Page Application so that the URL is updated as well\n\t\t\t\t\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\t\tform: {\n\t\t\t\t\t\t\t\t\t[this.state.payment_mode]: {}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} ).then( () => {\n\t\t\t\t\t\t\tresolve( this.state );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tvar payment_method_name = 'credit_card' === mode ? 'basic-card' : this.state.payment_request_button_name;\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tpayment_mode: mode,\n\t\t\t\t\tpayment_method_name: payment_method_name,\n\t\t\t\t\tstripe_error_message: null,\n\t\t\t\t\tform_has_any_error: false,\n\t\t\t\t\tform_validation_attempted: false,\n\t\t\t\t}, () => {\n\n\t\t\t\t\t// Update the visual state of the entire Single Page Application so that the URL is updated as well\n\t\t\t\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\tform: {\n\t\t\t\t\t\t\t\t[this.state.payment_mode]: {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} ).then( () => {\n\t\t\t\t\t\tresolve( this.state );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t});\n\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\tset_validation_and_value_of_field( state_validation_variable, is_validated, state_value_variable = null, state_value = null ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tif ( null == state_value_variable ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t},  () => {\n\t\t\t\t\tresolve( this.state );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t\t[state_value_variable]: state_value,\n\t\t\t\t}, () => {\n\t\t\t\t\tresolve( this.state );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t} );\n\t}\n\n\trender_payment_field( payment_field_to_render, array_of_visible_states ) {\n\n\t\tif ( typeof this['render_' + payment_field_to_render + '_field' ] === \"function\" ) {\n\n\t\t\tvar field_content = this['render_' + payment_field_to_render + '_field' ]();\n\n\t\t\t// If there's something to show\n\t\t\tif ( field_content ) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className={ 'tip-jar-wp-payment-field-container tip-jar-wp-payment-field-' + payment_field_to_render }>\n\t\t\t\t\t<div className={ 'tip-jar-wp-payment-field ' + this.get_view_class( array_of_visible_states ) }>\n\t\t\t\t\t{ this['render_' + payment_field_to_render + '_field' ]() }\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn( '' )\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log( 'Not found: ' + payment_field_to_render );\n\t\t}\n\n\t}\n\n\tget_currency_flag_class() {\n\n\t\tif ( ! this.state.verified_currency ) {\n\t\t\treturn ' flag';\n\t\t}\n\n\t\treturn ' flag flag-' + this.state.verified_currency.substring(0, 2).toLowerCase();\n\t}\n\n\ttoggle_currency_search() {\n\n\t\tif ( this.state.currency_search_visible ) {\n\t\t\tthis.setState( {\n\t\t\t\tcurrency_search_visible: false\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.setState( {\n\t\t\t\tcurrency_search_visible: true,\n\t\t\t\tuser_typed_currency: '',\n\t\t\t\tcurrency_typing_frozen: false\n\t\t\t}, () => {\n\t\t\t\tthis.currency_text_input.focus();\n\t\t\t} );\n\t\t}\n\t}\n\n\tconfirm_currency_exists( currency_to_confirm ) {\n\n\t\tvar this_component = this;\n\n\t\t// Use ajax to do the stripe transaction on the server using this data.\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'tip_jar_wp_confirm_currency');\n\t\tpostData.append('tip_jar_wp_currency_to_confirm', currency_to_confirm);\n\n\t\t// Confirm whether this currency is one supported or not, or if it even is a currency\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_confirm_currency', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tverified_currency: false,\n\t\t\t\t\t\tverified_currency_symbol: this_component.unique_settings.currency_symbol,\n\t\t\t\t\t\tverified_currency_type: this_component.unique_settings.currency_type\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\tif ( 'search_not_long_enough' == data.success_type ) {\n\t\t\t\t\t\t\t\t// Make no changes yet\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( 'more_than_one_currency_matched' == data.success_type ) {\n\t\t\t\t\t\t\t\t// Make no changes yet\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( 'one_currency_matched' == data.success_type ) {\n\t\t\t\t\t\t\t\t// Make changes now that only one currency matches\n\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_typed_currency: data.validated_currency,\n\t\t\t\t\t\t\t\t\tverified_currency: data.validated_currency,\n\t\t\t\t\t\t\t\t\tverified_currency_symbol: data.validated_currency_symbol,\n\t\t\t\t\t\t\t\t\tverified_currency_type: data.validated_currency_type,\n\t\t\t\t\t\t\t\t\tcurrency_search_visible: false,\n\t\t\t\t\t\t\t\t\t// Freeze typing for 3 seconds since we just forced a 3 letter currency into the field\n\t\t\t\t\t\t\t\t\tcurrency_typing_frozen: true\n\t\t\t\t\t\t\t\t}, () => {\n\n\t\t\t\t\t\t\t\t\t// Update the payment request button to match this new currency\n\t\t\t\t\t\t\t\t\tif ( 1 <= this_component.state.tip_amount ) {\n\t\t\t\t\t\t\t\t\t\tif ( this_component.state.paymentRequest ) {\n\t\t\t\t\t\t\t\t\t\t\tthis_component.state.paymentRequest.update({\n\t\t\t\t\t\t\t\t\t\t\t\tcurrency: this_component.state.verified_currency.toLowerCase(),\n\t\t\t\t\t\t\t\t\t\t\t\ttotal: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'Pay',\n\t\t\t\t\t\t\t\t\t\t\t\t\tamount: this_component.state.tip_amount,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\tpaymentRequest: this_component.state.paymentRequest\n\t\t\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\t\t\tthis_component.validate_currency( true, true );\n\n\t\t\t\t\t\t\t\t\t\t\t// If editing mode is activated, set this curency as the default currency for the form\n\t\t\t\t\t\t\t\t\t\t\tif ( this_component.props.main_component.state.editing_mode ) {\n\t\t\t\t\t\t\t\t\t\t\t\tif ( this_component.state.edit_currency_is_focused ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttip_jar_wp_pass_value_to_block( this_component.props.main_component, 'currency_code', this_component.state.verified_currency, false ).then( () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttip_jar_wp_pass_value_to_block( this_component.props.main_component, 'currency_symbol', this_component.state.verified_currency_symbol, false );\n\t\t\t\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t// Wait 3 seconds, then unfreeze the currency typing\n\t\t\t\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\tcurrency_typing_frozen: false\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}, 3000 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// No valid currency was found, so reset it to the default currency.\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tverified_currency: false,\n\t\t\t\t\t\t\t\tverified_currency_symbol: this_component.unique_settings.currency_symbol,\n\t\t\t\t\t\t\t\tverified_currency_type: this_component.unique_settings.currency_type\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis_component.validate_currency( true, true );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\tverified_currency: false,\n\t\t\t\t\t\t\tverified_currency_symbol: this_component.unique_settings.currency_symbol,\n\t\t\t\t\t\t\tverified_currency_type: this_component.unique_settings.currency_type\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tverified_currency: false,\n\t\t\t\t\tverified_currency_symbol: this_component.unique_settings.currency_symbol,\n\t\t\t\t\tverified_currency_type: this_component.unique_settings.currency_type\n\t\t\t\t} );\n\n\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\thandle_currency_typing( event ) {\n\n\t\tif ( this.state.currency_typing_frozen ) {\n\t\t\t// Allow the string to get shorter, but not longer for 3 seconds\n\t\t\tif ( event.target.value.length > this.state.user_typed_currency.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// If the string had gotten shorter, these are backspaces, so we can unfreeze the typing\n\t\t\telse {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrency_typing_frozen: false\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tif ( ! event.target.value ) {\n\t\t\tthis.setState( {\n\t\t\t\tuser_typed_currency: event.target.value.toUpperCase(),\n\t\t\t\tverified_currency: this.props.main_component.state.unique_settings.currency_code,\n\t\t\t\tverified_currency_symbol: this.props.main_component.state.unique_settings.currency_symbol\n\t\t\t} );\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tuser_typed_currency: event.target.value.toUpperCase()\n\t\t}, () => {\n\t\t\tthis.confirm_currency_exists( this.state.user_typed_currency );\n\t\t} );\n\t}\n\n\thandle_currency_enter( event ) {\n\t\t// Set the currency search field to be blank and focused\n\t\tthis.setState( {\n\t\t\tuser_typed_currency: '',\n\t\t} );\n\t}\n\n\thandle_currency_leave( event ) {\n\t\t// If the currency search field is blank and they leave the field, default it back to the original default currency\n\t\tif ( ! event.target.value ) {\n\t\t\tthis.setState( {\n\t\t\t\tuser_typed_currency: this.props.main_component.state.unique_settings.currency_code,\n\t\t\t\tverified_currency: this.props.main_component.state.unique_settings.currency_code,\n\t\t\t\tverified_currency_symbol: this.props.main_component.state.unique_settings.currency_symbol,\n\t\t\t\tcurrency_search_visible: false,\n\t\t\t}, () => {\n\t\t\t\tthis.validate_form();\n\t\t\t} );\n\t\t}\n\t}\n\n\trender_currency_switcher() {\n\n\t\tif ( this.state.currency_search_visible ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'tip-jar-wp-tip-currency-code' }>\n\t\t\t\t\t<span className={ 'tip-jar-wp-tip-currency-flag-container' }>\n\t\t\t\t\t\t{ ( () => {\n\t\t\t\t\t\t\t// If no flag is currenly found, show a spinner\n\t\t\t\t\t\t\tif( ! this.state.verified_currency ) {\n\t\t\t\t\t\t\t\treturn( <Tip_Jar_WP_Spinner color_mode=\"tip-jar-wp-spinner-dark\" /> );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// If a valid currency has been chosen, show the flag\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={ this.props.main_component.state.unique_settings.blank_flag_url }\n\t\t\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\t\t\tbackgroundImage: 'url(' + this.props.main_component.state.unique_settings.flag_sprite_url + ')',\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\tclassName={ 'tip-jar-wp-tip-currency-flag' +  this.get_currency_flag_class() }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})()}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className={ 'tip-jar-wp-tip-currency-text-container' }>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tref={(input) => this.currency_text_input = input}\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={ this.state.user_typed_currency }\n\t\t\t\t\t\t\tonChange={ this.handle_currency_typing.bind( this ) }\n\t\t\t\t\t\t\tonFocus={ this.handle_currency_enter.bind( this ) }\n\t\t\t\t\t\t\tonBlur={ this.handle_currency_leave.bind( this ) }\n\t\t\t\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.currency_search_text }\n\t\t\t\t\t\t\tautoComplete={ 'off' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn(\n\t\t\t\t<button type=\"button\" className={ 'tip-jar-wp-tip-currency-code-toggle-btn' } onClick={ this.toggle_currency_search.bind( this ) }>\n\t\t\t\t\t<div className={ 'tip-jar-wp-tip-currency-code' } >\n\t\t\t\t\t\t<span className={ 'tip-jar-wp-tip-currency-flag-container' }>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={ this.props.main_component.state.unique_settings.blank_flag_url }\n\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\tbackgroundImage: 'url(' + this.props.main_component.state.unique_settings.flag_sprite_url + ')',\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tclassName={ 'tip-jar-wp-tip-currency-flag' +  this.get_currency_flag_class() }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className={ 'tip-jar-wp-tip-currency-text-container' }>\n\t\t\t\t\t\t\t{ this.state.verified_currency }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t);\n\t\t}\n\t}\n\n\trender_amount_field() {\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<TipJarWPEditDefaultAmountAndCurrency\n\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\tpayment_box={ this }\n\t\t\t\t\tamount_editing_key={ 'default_amount' }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_recurring_field() {\n\n\t\tif ( ! this.props.main_component.state.editing_mode && ! this.props.main_component.state.unique_settings.recurring_options_enabled ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn(\n\t\t\t<TipJarWPEditRecurringOptions\n\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\tpayment_box={ this }\n\t\t\t/>\n\t\t);\n\n\t}\n\n\trender_privacy_policy_field() {\n\n\t\tif ( ! this.props.main_component.state.editing_mode && ! this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_body ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn (\n\t\t\t<Tip_Jar_WP_Terms_Field\n\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\tstate_validation_variable_name={ 'privacy_policy_validated' }\n\t\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\tis_validated={ this.state.privacy_policy_validated }\n\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy }\n\t\t\t\tterms_title={ this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_title }\n\t\t\t\tterms_body={ this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_body }\n\t\t\t\tterms_show_text={ this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_show_text }\n\t\t\t\tterms_hide_text={ this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_hide_text }\n\t\t\t\tdisabled={ this.get_disabled_status( [ 'credit_card', 'payment_request', 'free_file_download' ] ) }\n\t\t\t\tediting_key={ 'strings/input_field_instructions/privacy_policy/[current_key_here]/instruction_message' }\n\t\t\t/>\n\t\t);\n\n\t}\n\n\trender_email_field() {\n\n\t\treturn(\n\t\t\t<Tip_Jar_WP_Email_Field\n\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\tstate_validation_variable_name={ 'email_validated' }\n\t\t\t\tstate_value_variable_name={ 'email_value' }\n\t\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\tis_validated={ this.state.email_validated }\n\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.email }\n\t\t\t\tinitial_value={ this.props.main_component.state.unique_settings.strings.current_user_email }\n\n\t\t\t\ttype=\"email\"\n\t\t\t\tclass_name={ 'tip-jar-wp-email' }\n\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.email.placeholder_text }\n\t\t\t\tname=\"email\"\n\t\t\t\tdisabled={ this.get_disabled_status( [ 'credit_card', 'free_file_download' ] ) }\n\t\t\t\tediting_key={ 'strings/input_field_instructions/email/[current_key_here]/instruction_message' }\n\t\t\t/>\n\t\t)\n\t}\n\n\trender_name_field() {\n\n\t\treturn(\n\t\t\t<Tip_Jar_WP_Input_Field\n\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\tstate_validation_variable_name={ 'name_validated' }\n\t\t\t\tstate_value_variable_name={ 'name_value' }\n\t\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\tis_validated={ this.state.name_validated }\n\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.name }\n\t\t\t\tinitial_value={ this.props.main_component.state.unique_settings.strings.current_user_name }\n\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass_name={ 'tip-jar-wp-name' }\n\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.name.placeholder_text }\n\t\t\t\tname=\"tip-amount\"\n\t\t\t\tdisabled={ this.get_disabled_status( [ 'credit_card' ]) }\n\t\t\t\tediting_key={ 'strings/input_field_instructions/name/[current_key_here]/instruction_message' }\n\t\t\t/>\n\t\t)\n\t}\n\n\trender_all_in_one_credit_card_field() {\n\n\t\treturn(\n\t\t\t<Tip_Jar_WP_Stripe_All_In_One_Field\n\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\tcard_form={ this }\n\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\tstripe_card_error_code={ this.state.stripe_card_error_code }\n\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.stripe_all_in_one }\n\t\t\t\tstripe={ this.props.stripe }\n\t\t\t\tdisabled={ this.get_disabled_status( [ 'credit_card' ] ) }\n\t\t\t\tzip_code_placeholder={ this.props.main_component.state.unique_settings.strings.zip_code_placeholder }\n\t\t\t\tcreate_stripe_source={ this.create_stripe_payment_method }\n\t\t\t\tediting_key={ 'strings/input_field_instructions/stripe_all_in_one/[current_key_here]/instruction_message' }\n\t\t\t\tmobile_mode={this.props.mobile_mode}\n\t\t\t/>\n\t\t)\n\n\t}\n\n\trender_payment_error_field() {\n\n\t\t// Handle form errors\n\t\tif ( this.state.form_has_any_error ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'tip-jar-wp-payment-error-message'}>{ this.props.main_component.state.unique_settings.strings.form_has_an_error }</div>\n\t\t\t)\n\t\t}\n\n\t\t// Handle errors after form was submitted\n\t\tif ( 'payment_attempt_failed' == this.state.current_payment_state && this.state.stripe_error_message ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'tip-jar-wp-payment-error-message'}>{ this.state.stripe_error_message }</div>\n\t\t\t)\n\t\t} else {\n\t\t\treturn( '' )\n\t\t}\n\t}\n\n\trender_recurring_text_on_payment_button() {\n\n\t\tif ( ! this.state.recurring_value || 'never' == this.state.recurring_value ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn ' ' + this.props.main_component.state.unique_settings.recurring_options[this.state.recurring_value].after_output.toLowerCase();\n\n\t}\n\n\trender_payment_request_button_field() {\n\n\t\tif ( 'initial' == this.state.current_payment_state || 'payment_attempt_failed' == this.state.current_payment_state ) {\n\n\t\t\t// We need to decide if we show the payment request button, or a \"Next\" button, which validates the form\n\t\t\tif ( this.validate_form( false ) ) {\n\n\t\t\t\treturn(\n\t\t\t\t\t<div>\n\t\t\t\t\t<PaymentRequestButtonElement\n\t\t\t\t\t\tclassName={ \"PaymentRequestButton\" }\n\t\t\t\t\t\toptions={{\n\t\t\t\t\t\t\tpaymentRequest: this.state.paymentRequest,\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t// For more details on how to style the Payment Request Button, see:\n\t\t\t\t\t\t\t\t// https://stripe.com/docs/elements/payment-request-button#styling-the-element\n\t\t\t\t\t\t\t\tpaymentRequestButton: {\n\t\t\t\t\t\t\t\t\ttheme: 'dark',\n\t\t\t\t\t\t\t\t\theight: '50px',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\n\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t} else {\n\n\t\t\t\tvar currency_for_button = this.state.verified_currency ? ' (' + this.state.verified_currency + ')' : '';\n\t\t\t\tvar button_text = this.props.main_component.state.unique_settings.strings.payment_verb + ' ' + this.get_visual_amount() + this.render_recurring_text_on_payment_button() + currency_for_button;\n\n\t\t\t\treturn (\n\t\t\t\t\t<button type=\"button\" className={ 'tip-jar-wp-pay-button' } type=\"button\" onClick={ this.handlePaymentRequestValidateButton.bind( this ) } disabled={ this.get_disabled_status( [ 'payment_request' ] ) }>{ button_text }</button>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tif ( 'attempting_payment' == this.state.current_payment_state || 'success' == this.state.current_payment_state ) {\n\t\t\treturn this.render_complete_payment_button_field();\n\t\t}\n\n\t}\n\n\trender_complete_payment_button_field() {\n\n\t\tvar button_class;\n\t\tvar button_text;\n\t\tvar currency_for_button = this.state.verified_currency ? ' (' + this.state.verified_currency + ')' : '';\n\n\t\tif ( 'initial' == this.state.current_payment_state ) {\n\t\t\tbutton_class = '';\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.payment_verb + ' ' + this.get_visual_amount() + this.render_recurring_text_on_payment_button() + currency_for_button;\n\t\t}\n\t\tif ( 'attempting_payment' == this.state.current_payment_state ) {\n\t\t\tbutton_class = ' tip-jar-wp-btn-attempting-payment';\n\t\t\tbutton_text = <Tip_Jar_WP_Spinner />;\n\t\t}\n\t\tif ( 'success' == this.state.current_payment_state ) {\n\t\t\tbutton_class = ' tip-jar-wp-btn-success';\n\t\t\tbutton_text = <span><Tip_Jar_WP_Checkmark /></span>;\n\t\t}\n\t\tif ( 'payment_attempt_failed' == this.state.current_payment_state ) {\n\t\t\tbutton_class = ' tip-jar-wp-btn-error';\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.complete_payment_button_error_text;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<button type=\"button\" onClick={this.handleCreditCardSubmit.bind( this )} disabled={ this.get_disabled_status( [ 'credit_card' ] ) } className={ 'tip-jar-wp-pay-button' + button_class }>{ button_text }</button>\n\t\t\t</div>\n\t\t)\n\t}\n\n\trender_payment_mode_toggler_field() {\n\n\n\t\t\treturn(\n\t\t\t\t<button type=\"button\" className={ 'tip-jar-wp-other-payment-option tip-jar-wp-input-instruction tip-jar-wp-text-button' } onClick={ this.set_payment_mode.bind( null, 'toggle' ) }>{ this.props.main_component.state.unique_settings.strings.other_payment_option }</button>\n\t\t\t)\n\n\t}\n\n\trender_download_file_button_field() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Tip_Jar_WP_File_Download_Button\n\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\tcard_form={ this }\n\t\t\t\t\temail_value={ this.state.email_value }\n\t\t\t\t\temail_validated={ this.state.email_validated }\n\t\t\t\t\tprivacy_policy_validated={ this.state.privacy_policy_validated }\n\t\t\t\t\tmode={ 'payment_form' }\n\t\t\t\t />\n\t\t\t</div>\n\t\t);\n\n\t}\n\n\trender_manage_payments_button() {\n\n\t\treturn(\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName={ 'tip-jar-wp-manage-payments-button tip-jar-wp-input-instruction tip-jar-wp-text-button' }\n\t\t\t\tonClick={ this.props.main_component.set_all_current_visual_states.bind( null, {\n\t\t\t\t\tmanage_payments: {}\n\t\t\t\t}, false ) }\n\t\t\t>\n\t\t\t\t{ this.props.main_component.state.unique_settings.strings.manage_payments_button_text }\n\t\t\t</button>\n\t\t)\n\n\t}\n\n\trender_card_form() {\n\n\t\t// if this browser can do a payment request...\n\t\tif( this.state.canDoPaymentRequest ) {\n\t\t\treturn(\n\t\t\t\t<div>\n\n\t\t\t\t\t{ this.render_payment_field( 'amount', [ 'credit_card', 'payment_request', 'free_file_download' ] ) }\n\n\t\t\t\t\t{ this.render_payment_field( 'recurring', [ 'credit_card', 'payment_request' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'email', [ 'credit_card', 'free_file_download' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'name', [ 'credit_card' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'all_in_one_credit_card', [ 'credit_card' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'privacy_policy', [ 'credit_card', 'payment_request', 'free_file_download' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'payment_error', [ 'credit_card', 'payment_request' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'payment_request_button', [ 'payment_request' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'complete_payment_button', [ 'credit_card' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'download_file_button', [ 'free_file_download' ] ) }\n\n\t\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( 'free_file_download' !== this.state.payment_mode ) {\n\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t<div className=\"tip-jar-wp-payment-field-container top-jar-wp-alternate-actions\">\n\t\t\t\t\t\t\t\t\t{ this.render_payment_mode_toggler_field() }\n\t\t\t\t\t\t\t\t\t\t<span className=\"top-jar-wp-alternate-actions-separator\">|</span>\n\t\t\t\t\t\t\t\t\t{ this.render_manage_payments_button() }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t})() }\n\n\t\t\t\t</div>\n\t\t\t)\n\t\t\t// If Payment Request is not available, only show the credit card fields.\n\t\t} else {\n\n\t\t\treturn(\n\t\t\t\t<div>\n\n\t\t\t\t\t{ this.render_payment_field( 'amount', [ 'credit_card', 'payment_request', 'free_file_download' ] ) }\n\n\t\t\t\t\t{ this.render_payment_field( 'recurring', [ 'credit_card', 'payment_request' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'email', [ 'credit_card', 'free_file_download' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'name', [ 'credit_card' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'all_in_one_credit_card', [ 'credit_card' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'privacy_policy', [ 'credit_card', 'payment_request', 'free_file_download' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'complete_payment_button', [ 'credit_card' ] ) }\n\t\t\t\t\t{ this.render_payment_field( 'download_file_button', [ 'free_file_download' ] ) }\n\n\t\t\t\t\t{ (() => {\n\t\t\t\t\t\tif ( 'free_file_download' !== this.state.payment_mode ) {\n\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t<div className=\"tip-jar-wp-payment-field-container top-jar-wp-alternate-actions\">\n\t\t\t\t\t\t\t\t\t{ this.render_manage_payments_button() }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t})() }\n\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t}\n\n\trender() {\n\n\t\tif ( ! this.state.payment_mode ) {\n\t\t\treturn(\n\t\t\t\t<Tip_Jar_WP_Spinner color_mode=\"tip-jar-wp-spinner-dark\" />\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\tthis.render_card_form()\n\t\t\t);\n\t\t}\n\t}\n}\n\nimport {ElementsConsumer} from '@stripe/react-stripe-js';\nconst CardForm = (props) => (\n  <ElementsConsumer>\n    {({stripe, elements}) => (\n      <Tip_Jar_WP_Card_Form stripe={stripe} elements={elements} main_component={ props.main_component } mobile_mode={props.mobile_mode}/>\n    )}\n  </ElementsConsumer>\n);\n","var tip_jar_wp_vars = tip_jar_wp_js_vars.tip_form_vars;\n\nwindow.Tip_Jar_WP_Manage_Payments = class Tip_Jar_WP_Manage_Payments extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tmap_of_visual_states: {\n\t\t\t\tmanage_payments: {\n\t\t\t\t\tvariable: {}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcurrent_visual_state: 'none',\n\t\t};\n\n\t\tthis.check_if_user_is_logged_in = this.check_if_user_is_logged_in.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\n\t\tthis.check_if_user_is_logged_in();\n\n\t\ttip_jar_wp_set_visual_state_of_component( {\n\t\t\tcomponent: this,\n\t\t\tdefault_visual_states: {\n\t\t\t\tparent_in_view: 'arrangements',\n\t\t\t\tparent_not_in_view: 'none'\n\t\t\t},\n\t\t\tname_of_visual_state_variable: 'current_visual_state'\n\t\t} );\n\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\ttip_jar_wp_set_visual_state_of_component( {\n\t\t\tcomponent: this,\n\t\t\tdefault_visual_states: {\n\t\t\t\tparent_in_view: 'arrangements',\n\t\t\t\tparent_not_in_view: 'none'\n\t\t\t},\n\t\t\tname_of_visual_state_variable: 'current_visual_state'\n\t\t} );\n\n\t}\n\n\tcheck_if_user_is_logged_in() {\n\n\t\tvar this_component = this;\n\n\t\tvar postData = new FormData();\n\t\tpostData.append( 'action', 'tip_jar_wp_check_if_user_logged_in' );\n\t\tpostData.append( 'tip_jar_wp_check_if_user_logged_in', true );\n\n\t\t// Check if this user is logged in, and set the state of \"Manage Payments\" accordingly\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_check_if_user_logged_in', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\tuser_logged_in: null\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\n\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\tuser_logged_in: null\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\n\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\tuser_logged_in: null\n\t\t\t\t} );\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\tget_current_title_string() {\n\n\t\t// If the current visual state is login\n\t\tif( ! this.props.main_component.state.user_logged_in ) {\n\n\t\t\treturn this.props.main_component.state.unique_settings.strings.login;\n\n\t\t}\n\n\t\t// If the current visual state is transactions\n\t\tif( 'transactions' == this.state.current_visual_state ) {\n\n\t\t\treturn this.props.main_component.state.unique_settings.strings.transactions_title;\n\n\t\t}\n\n\t\t// If the current visual state is transactions\n\t\tif( 'transaction' == this.state.current_visual_state ) {\n\n\t\t\treturn this.props.main_component.state.unique_settings.strings.transaction_title;\n\n\t\t}\n\n\t\t// If the current visual state is arrangements\n\t\tif( 'arrangements' == this.state.current_visual_state ) {\n\n\t\t\treturn this.props.main_component.state.unique_settings.strings.arrangements_title;\n\n\t\t}\n\n\t\t// If the current visual state is arrangement\n\t\tif( 'arrangement' == this.state.current_visual_state ) {\n\n\t\t\treturn this.props.main_component.state.unique_settings.strings.arrangement_title;\n\n\t\t}\n\t}\n\n\tmaybe_render_close_button() {\n\n\t\tif ( ! this.props.show_close_button ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"tip-jar-wp-close-btn\" aria-label=\"Close\" onClick={ this.props.main_component.handle_visual_state_change_click_event.bind( this, {}, {} ) }><img src={ this.props.main_component.state.dynamic_settings.close_button_url } /></div>\n\t\t);\n\t}\n\n\trender() {\n\n\t\t// If the user is not logged in, show the login form\n\t\tif ( ! this.props.main_component.state.user_logged_in ) {\n\n\t\t\treturn(\n\t\t\t\t<div className=\"tip-jar-wp-manage-payments\">\n\n\t\t\t\t\t<div className=\"tip-jar-wp-component-box\">\n\n\t\t\t\t\t\t<header className=\"tip-jar-wp-header\" role=\"banner\">\n\t\t\t\t\t\t\t<h1 className=\"tip-jar-wp-header-title\">{ this.get_current_title_string() }</h1>\n\t\t\t\t\t\t\t{ this.maybe_render_close_button() }\n\t\t\t\t\t\t</header>\n\n\t\t\t\t\t\t<div className={ 'tip-jar-wp-payment-box-view tip-jar-wp-manage-payments-view' }>\n\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-login-view' }>\n\t\t\t\t\t\t\t\t<Tip_Jar_WP_Login\n\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.props.check_if_user_is_logged_in }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"tip-jar-wp-manage-payments\">\n\n\t\t\t\t<div className=\"tip-jar-wp-component-box\">\n\n\t\t\t\t\t<header className=\"tip-jar-wp-header\" role=\"banner\">\n\t\t\t\t\t\t<h1 className=\"tip-jar-wp-header-title\">{ this.get_current_title_string() }</h1>\n\t\t\t\t\t\t{ this.maybe_render_close_button() }\n\t\t\t\t\t</header>\n\n\t\t\t\t\t<div className={ 'tip-jar-wp-payment-box-view tip-jar-wp-manage-payments-view' }>\n\n\t\t\t\t\t\t{ ( () => {\n\n\t\t\t\t\t\t\t// If the current visual state is \"none\"\n\t\t\t\t\t\t\tif( 'none' == this.state.current_visual_state ) {\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-manage-payments-view ' + tip_jar_wp_get_current_view_class( this, ['transactions', 'arrangements'] ) }>\n\t\t\t\t\t\t\t\t\t\t\t<Tip_Jar_WP_Manage_Payments_Nav\n\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent_visual_state={ this.state.current_visual_state }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-manage-payments-view ' + tip_jar_wp_get_current_view_class( this, ['transactions'] ) }>\n\t\t\t\t\t\t\t\t\t\t\t<Tip_Jar_WP_Transactions\n\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.check_if_user_is_logged_in.bind( this ) }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-manage-payments-view ' + tip_jar_wp_get_current_view_class( this, ['transaction'] ) }>\n\t\t\t\t\t\t\t\t\t\t\t{ ( () => {\n\t\t\t\t\t\t\t\t\t\t\t\t// Re-render this component from scratch so that no data is left-over from old loads\n\t\t\t\t\t\t\t\t\t\t\t\tif ( 'transaction' == this.state.current_visual_state ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tip_Jar_WP_Payment_Confirmation\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdo_after_payment_actions={ false }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} )() }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-manage-payments-view ' + tip_jar_wp_get_current_view_class( this, ['arrangements'] ) }>\n\t\t\t\t\t\t\t\t\t\t\t<Tip_Jar_WP_Arrangements\n\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.check_if_user_is_logged_in.bind( this ) }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={ 'tip-jar-wp-manage-payments-view ' + tip_jar_wp_get_current_view_class( this, ['arrangement'] ) }>\n\t\t\t\t\t\t\t\t\t\t\t<Tip_Jar_WP_Arrangement\n\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.check_if_user_is_logged_in.bind( this ) }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} )() }\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default Tip_Jar_WP_Manage_Payments;\n","var tip_jar_wp_vars = tip_jar_wp_js_vars.tip_form_vars;\n\nwindow.Tip_Jar_WP_Manage_Payments_Nav = class Tip_Jar_WP_Manage_Payments_Nav extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\n\t}\n\n\tset_view_to_transactions() {\n\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\tmanage_payments: {\n\t\t\t\ttransactions: {}\n\t\t\t}\n\t\t} )\n\t}\n\n\tset_view_to_arrangements() {\n\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\tmanage_payments: {\n\t\t\t\tarrangements: {}\n\t\t\t}\n\t\t} )\n\t}\n\n\tget_current_button_class( button_in_question ) {\n\t\tif ( this.props.current_visual_state == button_in_question ) {\n\t\t\treturn ' tip-jar-wp-manage-nav-current-btn';\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\trender() {\n\n\t\tif ( this.props.main_component.state.user_logged_in ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"tip-jar-wp-manage-payments-nav-container-full\">\n\t\t\t\t\t<div className=\"tip-jar-wp-manage-payments-nav-container-center\">\n\t\t\t\t\t\t<div className=\"tip-jar-wp-manage-payments-nav\">\n\t\t\t\t\t\t\t<div className={ \"tip-jar-wp-arrangements-btn\" + this.get_current_button_class( 'arrangements' ) }>\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"tip-jar-wp-text-button\" onClick={ this.set_view_to_arrangements.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.arrangements_title }</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={ \"tip-jar-wp-transactions-btn\"  + this.get_current_button_class( 'transactions' ) }>\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"tip-jar-wp-text-button\" onClick={ this.set_view_to_transactions.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.transactions_title }</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn( '' );\n\t\t}\n\t}\n}\nexport default Tip_Jar_WP_Manage_Payments_Nav;\n","var tip_jar_wp_vars = tip_jar_wp_js_vars.tip_form_vars;\n\nwindow.Tip_Jar_WP_Login = class Tip_Jar_WP_Login extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrent_visual_state: 'login_form',\n\t\t\tlogin_error_message: null,\n\n\t\t\temail_value: null,\n\t\t\temail_validated:false,\n\n\t\t\tlogin_code_digit_1: '',\n\t\t\tlogin_code_digit_2: '',\n\t\t\tlogin_code_digit_3: '',\n\t\t\tlogin_code_digit_4: '',\n\t\t\tlogin_code_digit_5: '',\n\t\t\tlogin_code_digit_6: '',\n\n\t\t};\n\n\t\tthis.handle_login_form_submit = this.handle_login_form_submit.bind( this );\n\n\t\t// Set up refs for the input fields\n\t\tthis.login_code_digit_1 = React.createRef();\n\t\tthis.login_code_digit_2 = React.createRef();\n\t\tthis.login_code_digit_3 = React.createRef();\n\t\tthis.login_code_digit_4 = React.createRef();\n\t\tthis.login_code_digit_5 = React.createRef();\n\t\tthis.login_code_digit_6 = React.createRef();\n\t}\n\n\tcomponentDidMount( ) {\n\t\tthis.setState( {\n\t\t\tprior_all_current_visual_states: this.props.main_component.state.all_current_visual_states\n\t\t} );\n \t}\n\n\trequest_login_email() {\n\n\t\tthis.setState( {\n\t\t\tcurrent_visual_state: 'loading',\n\t\t\tlogin_error_message: null\n\t\t});\n\n\t\tvar this_component = this;\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'tip_jar_wp_email_login' );\n\t\tpostData.append('tip_jar_wp_email', this_component.state.email_value);\n\t\tpostData.append('tip_jar_wp_email_login_nonce', this.props.main_component.state.frontend_nonces.email_login_nonce);\n\n\t\t// Request a login email\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_email_login', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tcurrent_visual_state: 'login_form',\n\t\t\t\t\t\tlogin_error_message: 'Looks like there was a problem. Status Code: ' + response.status\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Change the view to accept an code, with a 6 digit input\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_visual_state: 'login_code_input',\n\t\t\t\t\t\t\t\tlogin_error_message: null,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_visual_state: 'login_form',\n\t\t\t\t\t\t\t\tlogin_error_message: data.details,\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis_component.login_code_digit_1.focus();\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\n\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\tcurrent_visual_state: 'login_form',\n\t\t\t\t\t\t\tlogin_error_message: this_component.props.main_component.strings.general_server_error\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tcurrent_visual_state: 'login_form',\n\t\t\t\t\tlogin_error_message: this_component.props.main_component.strings.general_server_error\n\t\t\t\t});\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\t}\n\n\tattempt_to_login() {\n\n\t\tthis.setState( {\n\t\t\tcurrent_visual_state: 'loading',\n\t\t\tlogin_error_message: null\n\t\t});\n\n\t\tvar this_component = this;\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'tip_jar_wp_attempt_user_login' );\n\t\tpostData.append('tip_jar_wp_email', this_component.state.email_value);\n\t\tpostData.append('tip_jar_wp_login_code', this_component.state.login_code);\n\t\tpostData.append('tip_jar_wp_login_nonce', this.props.main_component.state.frontend_nonces.login_nonce);\n\n\t\t// Handle a login over email\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_attempt_user_login', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tcurrent_visual_state: 'login_code_input',\n\t\t\t\t\t\tlogin_error_message: 'Looks like there was a problem. Status Code: ' + response.status\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Show the checkmark that the login was successful\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_visual_state: 'login_attempt_succeeded',\n\t\t\t\t\t\t\t\tlogin_error_message: null,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// After .3 seconds of showing the checkmark, refresh the page\n\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t}, 300 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_visual_state: 'login_code_input',\n\t\t\t\t\t\t\t\tlogin_error_message: data.details,\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis_component.login_code_digit_6.focus();\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\n\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\tcurrent_visual_state: 'login_code_input',\n\t\t\t\t\t\t\tlogin_error_message: this_component.props.main_component.strings.general_server_error\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tcurrent_visual_state: 'login_code_input',\n\t\t\t\t\tlogin_error_message: this_component.props.main_component.strings.general_server_error\n\t\t\t\t});\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\t}\n\n\tset_validation_and_value_of_field( state_validation_variable, is_validated, state_value_variable = null, state_value = null ) {\n\n\t\tif ( null == state_value_variable ) {\n\t\t\tthis.setState( {\n\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.setState( {\n\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t[state_value_variable]: state_value,\n\t\t\t} );\n\t\t}\n\t}\n\n\tvalidate_form( modify_state = true ) {\n\n\t\tvar all_fields_validate = true;\n\n\t\t// Email field\n\t\tif ( ! this.state.email_validated ) {\n\t\t\tall_fields_validate = false;\n\t\t}\n\n\t\tif ( modify_state ) {\n\n\t\t\tthis.setState( {\n\t\t\t\tform_validation_attempted: true\n\t\t\t} );\n\n\t\t\tif ( ! all_fields_validate ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: true\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\thandle_login_form_submit( event ){\n\n\t\tevent.preventDefault();\n\n\t\t// Validate the fields\n\t\tvar allow_form_to_be_submitted = this.validate_form( true );\n\n\t\t// Prevent the form submission if a field didn't validate\n\t\tif ( ! allow_form_to_be_submitted ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.request_login_email();\n\n\t}\n\n\trender_login_field( payment_field_to_render ) {\n\n\t\tif ( typeof this['render_' + payment_field_to_render + '_field' ] === \"function\" ) {\n\n\t\t\tvar field_content = this['render_' + payment_field_to_render + '_field' ]();\n\n\t\t\t// If there's something to show\n\t\t\tif ( field_content ) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className={ 'tip-jar-wp-payment-field-container tip-jar-wp-payment-field-' + payment_field_to_render }>\n\t\t\t\t\t<div className={ 'tip-jar-wp-payment-field' }>\n\t\t\t\t\t{ this['render_' + payment_field_to_render + '_field' ]() }\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn( '' )\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log( 'Not found: ' + payment_field_to_render );\n\t\t}\n\n\t}\n\n\trender_login_code_field( digit ) {\n\t\treturn(\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalue={ this.state['login_code_digit_' + digit] }\n\t\t\t\tref={ (input) => { this['login_code_digit_' + digit] = input; } }\n\t\t\t\tonChange={ this.handle_login_form_digit_change.bind( this, digit ) }\n\t\t\t\tonKeyUp={ this.handle_login_form_digit_backspace.bind( this, digit ) }\n\t\t\t\tonFocus={ this.handle_login_form_digit_focus.bind( this, digit ) }\n\t\t\t/>\n\t\t)\n\t}\n\n\trender_login_code_fields() {\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"tip-jar-wp-input-instruction\">{ this.props.main_component.state.unique_settings.strings.input_field_instructions.login_code.initial.instruction_message }</div>\n\t\t\t\t<div className=\"tip-jar-wp-login-code-fields\">\n\t\t\t\t\t{ this.render_login_code_field( 1 ) }\n\t\t\t\t\t{ this.render_login_code_field( 2 ) }\n\t\t\t\t\t{ this.render_login_code_field( 3 ) }\n\t\t\t\t\t<div> - </div>\n\t\t\t\t\t{ this.render_login_code_field( 4 ) }\n\t\t\t\t\t{ this.render_login_code_field( 5 ) }\n\t\t\t\t\t{ this.render_login_code_field( 6 ) }\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n\n\thandle_login_form_digit_change( digit, event ) {\n\n\t\tvar all_characters;\n\t\tvar value;\n\n\t\t// Only allow numbers (not using the HTML5 \"number\" field because of the \"step\" arrows.\n\t\tif ( ! Number.isInteger( parseInt( event.target.value, 10 ) ) ) {\n\t\t\t// Only return if there is a value. Blank values (which are \"not numbers\") are allowed.\n\t\t\tif ( event.target.value ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// If more than 1 digit was entered\n\t\tif ( event.target.value.length > 1 ) {\n\n\t\t\tvalue = event.target.value;\n\n\t\t\tconsole.log( value );\n\n\t\t\t// Spread the numbers out over all input fields. This allows for pasting of the whole number.\n\t\t\tall_characters = value.split(\"\");\n\n\t\t\tthis.setState( {\n\t\t\t\tlogin_code_digit_1: all_characters[0] ? all_characters[0] : '',\n\t\t\t\tlogin_code_digit_2: all_characters[1] ? all_characters[1] : '',\n\t\t\t\tlogin_code_digit_3: all_characters[2] ? all_characters[2] : '',\n\t\t\t\tlogin_code_digit_4: all_characters[3] ? all_characters[3] : '',\n\t\t\t\tlogin_code_digit_5: all_characters[4] ? all_characters[4] : '',\n\t\t\t\tlogin_code_digit_6: all_characters[5] ? all_characters[5] : '',\n\t\t\t}, () => {\n\t\t\t\tthis.after_login_code_digit_set( digit, true );\n\t\t\t} );\n\t\t} else {\n\n\t\t\tthis.setState( {\n\t\t\t\t['login_code_digit_' + digit]: event.target.value\n\t\t\t}, () => {\n\t\t\t\tthis.after_login_code_digit_set( digit, false );\n\t\t\t} );\n\t\t}\n\n\t}\n\n\tafter_login_code_digit_set( digit, multiple_characters_entered ){\n\n\t\tvar login_code;\n\t\tvar next_digit = digit + 1;\n\n\t\t// If there is another field to switch to, switch to it.\n\t\tif ( ! multiple_characters_entered && this.state['login_code_digit_' + digit] && this['login_code_digit_' + next_digit] ) {\n\t\t\tthis['login_code_digit_' + next_digit].focus();\n\n\t\t\t// If there's not another field to switch to, we're at the end, and we can check the server if the code matches.\n\t\t} else {\n\n\t\t\t// Combine all of the digit values into one\n\t\t\tlogin_code = (\n\t\t\t\tthis.state.login_code_digit_1 +\n\t\t\t\tthis.state.login_code_digit_2 +\n\t\t\t\tthis.state.login_code_digit_3 +\n\t\t\t\tthis.state.login_code_digit_4 +\n\t\t\t\tthis.state.login_code_digit_5 +\n\t\t\t\tthis.state.login_code_digit_6\n\t\t\t);\n\n\t\t\tthis.setState( {\n\t\t\t\tlogin_code: login_code\n\t\t\t}, () => {\n\n\t\t\t\tif ( 6 === login_code.length ) {\n\t\t\t\t\tthis.attempt_to_login();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t}\n\n\thandle_login_form_digit_backspace( digit, event ) {\n\n\t\tvar select_all_pressed = false;\n\n\t\tif ( event.keyCode !== 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If cntrl+a has been pushed, select and remove all\n\t\tif ( select_all_pressed ) {\n\t\t\t// Clear all entered values in the login code inputs\n\t\t\tthis.setState( {\n\t\t\t\tlogin_code: '',\n\t\t\t\tlogin_code_digit_1: '',\n\t\t\t\tlogin_code_digit_2: '',\n\t\t\t\tlogin_code_digit_3: '',\n\t\t\t\tlogin_code_digit_4: '',\n\t\t\t\tlogin_code_digit_5: '',\n\t\t\t\tlogin_code_digit_6: '',\n\t\t\t}, () => {\n\n\t\t\t\t// Refocus on the first digit\n\t\t\t\tthis.login_code_digit_1.focus();\n\n\t\t\t} );\n\t\t} else {\n\n\t\t\t// If there's still a value in this field, don't switch fields.\n\t\t\tif ( this.state['login_code_digit_' + digit] ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar previous_digit = digit - 1;\n\n\t\t\t// If there's a previous digit, focus on it\n\t\t\tif ( this['login_code_digit_' + previous_digit] ) {\n\t\t\t\tthis['login_code_digit_' + previous_digit].focus();\n\t\t\t}\n\t\t}\n\t}\n\n\thandle_login_form_digit_focus( digit, event ) {\n\n\t\t// If the form is in a state of error, don't do anything upon focus.\n\t\tif ( this.state.login_error_message && document.activeElement === this.login_code_digit_6 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tlogin_error_message: null\n\t\t} );\n\n\t\tthis.setState( {\n\t\t\t['login_code_digit_' + digit]: ''\n\t\t} );\n\n\t}\n\n\trender_email_field() {\n\n\t\treturn(\n\t\t\t<Tip_Jar_WP_Email_Field\n\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\tstate_validation_variable_name={ 'email_validated' }\n\t\t\t\tstate_value_variable_name={ 'email_value' }\n\t\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\tis_validated={ this.state.email_validated }\n\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.email_for_login_code }\n\t\t\t\tinitial_value={ this.props.main_component.state.current_transaction_info ? this.props.main_component.state.current_transaction_info.email : ''  }\n\n\t\t\t\ttype=\"email\"\n\t\t\t\tclass_name={ 'tip-jar-wp-email' }\n\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.email_for_login_code.placeholder_text }\n\t\t\t\tname=\"email\"\n\t\t\t\tediting_key={ 'strings/input_field_instructions/email/[current_key_here]/instruction_message' }\n\t\t\t/>\n\t\t)\n\t}\n\n\trender_login_error_field() {\n\n\t\t// Handle pre-attempt form errors\n\t\tif ( this.state.form_has_any_error ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'tip-jar-wp-payment-error-message'}>{ this.props.main_component.state.unique_settings.strings.login_form_has_an_error }</div>\n\t\t\t)\n\t\t} else if ( this.state.login_error_message ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'tip-jar-wp-payment-error-message'}>{ this.state.login_error_message }</div>\n\t\t\t)\n\t\t} else {\n\t\t\treturn( '' )\n\t\t}\n\t}\n\n\trender_login_submit_button_field() {\n\n\t\tvar button_class;\n\t\tvar button_text;\n\n\t\tif ( 'login_form' == this.state.current_visual_state ) {\n\t\t\tbutton_class = '';\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.login_button_text;\n\t\t}\n\t\tif ( 'loading' == this.state.current_visual_state ) {\n\t\t\tbutton_class = ' tip-jar-wp-btn-attempting-payment';\n\t\t\tbutton_text = <Tip_Jar_WP_Spinner />;\n\t\t}\n\t\tif ( 'login_attempt_succeeded' == this.state.current_visual_state ) {\n\t\t\tbutton_class = ' tip-jar-wp-btn-success';\n\t\t\tbutton_text = <span><Tip_Jar_WP_Checkmark /></span>;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t<button type=\"submit\" className={ 'tip-jar-wp-pay-button' + button_class }>{ button_text }</button>\n\t\t\t</div>\n\t\t)\n\t}\n\n\tget_current_view_class( views_in_question ) {\n\n\t\tvar currently_in_view_class_name = 'tip-jar-wp-current-view';\n\t\tvar hidden_class_name = 'tip-jar-wp-hidden-view';\n\t\tvar current_visual_state = this.state.current_visual_state;\n\n\t\t// If the current visual state matches one of the view states we are getting the class for\n\t\tif( views_in_question.indexOf( current_visual_state ) != -1 ) {\n\n\t\t\treturn ' ' + currently_in_view_class_name;\n\n\t\t} else {\n\n\t\t\treturn ' ' + hidden_class_name;\n\n\t\t}\n\n\t}\n\n\trender() {\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={ 'tip-jar-wp-login-form-loading' + this.get_current_view_class( [ 'loading' ] ) }>\n\t\t\t\t\t<Tip_Jar_WP_Spinner color_mode=\"tip-jar-wp-spinner-dark\" />\n\t\t\t\t</div>\n\t\t\t\t<div className={ 'tip-jar-wp-login-form' + this.get_current_view_class( [ 'login_form' ] ) }>\n\t\t\t\t\t<form onSubmit={this.handle_login_form_submit}>\n\t\t\t\t\t\t{ this.render_login_field( 'email' ) }\n\t\t\t\t\t\t{ this.render_login_field( 'login_error' ) }\n\t\t\t\t\t\t{ this.render_login_field( 'login_submit_button') }\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t\t<div className={ 'tip-jar-wp-login-code-input' + this.get_current_view_class( [ 'login_code_input' ] ) }>\n\t\t\t\t\t\t{ this.render_login_code_fields() }\n\t\t\t\t\t\t{ this.render_login_field( 'login_error' ) }\n\t\t\t\t</div>\n\t\t\t\t<div className={ 'tip-jar-wp-login-success' + this.get_current_view_class( [ 'login_attempt_succeeded' ] ) }>\n\t\t\t\t\t<Tip_Jar_WP_Checkmark />\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\nexport default Tip_Jar_WP_Manage_Payments;\n","import Tip_Jar_WP_List_View from './tip-jar-wp-list-view.js'\nvar tip_jar_wp_vars = tip_jar_wp_js_vars.tip_form_vars;\n\nwindow.Tip_Jar_WP_Transactions = class Tip_Jar_WP_Transactions extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrent_visual_state: 'none',\n\t\t\ttotal_items: 0,\n\t\t\tcurrent_transaction_info: null\n\t\t};\n\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\t// If the user is not logged in, show the login form\n\t\tif ( ! this.props.main_component.state.user_logged_in ) {\n\n\t\t\tif ( 'login' != this.state.current_visual_state ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrent_visual_state: 'login'\n\t\t\t\t} );\n\t\t\t}\n\n\t\t}\n\n\t\t// If the user is logged in, show the transactions screen\n\t\telse {\n\n\t\t\t// Prevent an infinite loop\n\t\t\tif ( 'transactions' != this.state.current_visual_state && 'fetching_data' != this.state.current_visual_state ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrent_visual_state: 'transactions'\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// If no transactions have been loaded from the server, load some\n\t\t\tif ( 'transactions' == this.state.current_visual_state && ! this.state.rows ) {\n\t\t\t\tthis.get_transactions( 1, 10, '' );\n\t\t\t}\n\n\t\t}\n\n\t\t// If the 3rd level in the URL exists, (this could likely be more robust) set the current item to that\n\t\tif (\n\t\t\tObject.keys(this.props.main_component.state.all_current_visual_states)[0] &&\n\t\t\tthis.props.main_component.state.all_current_visual_states['manage_payments'] &&\n\t\t\tObject.keys(this.props.main_component.state.all_current_visual_states['manage_payments'])[0]\n\t\t) {\n\t\t\tvar second_slug = Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'])[0];\n\n\t\t\tif ( 'transaction' == second_slug ) {\n\t\t\t\tif( Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'][second_slug])[0] ) {\n\t\t\t\t\tvar third_slug = Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'][second_slug])[0];\n\n\t\t\t\t\t// If the current single item ID does not match the item ID in the URL\n\t\t\t\t\tif ( ! this.props.main_component.state.current_transaction_info ) {\n\t\t\t\t\t\tthis.get_transaction( third_slug );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.props.main_component.state.current_transaction_info && third_slug !== this.props.main_component.state.current_transaction_info.transaction_id ) {\n\t\t\t\t\t\tthis.get_transaction( third_slug );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\tget_transactions( current_page, items_per_page, search_term ) {\n\n\t\tvar this_component = this;\n\n\t\tthis.setState( {\n\t\t\tcurrent_visual_state: 'fetching_data'\n\t\t});\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'tip_jar_wp_get_transactions' );\n\t\tpostData.append('tip_jar_wp_current_page', current_page);\n\t\tpostData.append('tip_jar_wp_items_per_page', items_per_page);\n\t\tpostData.append('tip_jar_wp_search_term', search_term);\n\t\tpostData.append('tip_jar_wp_get_transactions_nonce', this.props.main_component.state.frontend_nonces.get_transactions_nonce);\n\n\t\t// Get the transactions defined by the paramaters in the state\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_get_transactions', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t// Remove transactions since none were found\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tcolumns: null,\n\t\t\t\t\t\trows: null,\n\t\t\t\t\t\ttotal_items: 0\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Reset the check user nonce\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_visual_state: 'transactions',\n\t\t\t\t\t\t\t\t\tcolumns: data.columns,\n\t\t\t\t\t\t\t\t\trows: data.rows,\n\t\t\t\t\t\t\t\t\ttotal_items: data.total_items\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Remove transactions since none were found\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcolumns: null,\n\t\t\t\t\t\t\t\trows: null,\n\t\t\t\t\t\t\t\ttotal_items: 0\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\tget_transaction( transaction_id ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tvar this_component = this;\n\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', 'tip_jar_wp_get_transaction' );\n\t\t\tpostData.append('tip_jar_wp_transaction_id', transaction_id);\n\t\t\tpostData.append('tip_jar_wp_get_transaction_nonce', this.props.main_component.state.frontend_nonces.get_transaction_nonce);\n\n\t\t\t// Get the transactions defined by the paramaters in the state\n\t\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_get_transaction', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode: \"same-origin\",\n\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\tbody: postData\n\t\t\t} ).then(\n\t\t\t\t( response ) => {\n\t\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\tcurrent_transaction_info: null\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then(\n\t\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\t\tcurrent_transaction_info: data.transaction_info,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\t\tcurrent_transaction_info: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t).catch(\n\t\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\tfunction( err ) {\n\t\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t\t\treject();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t);\n\n\t\t});\n\n\t}\n\n\ton_row_click( row, event ) {\n\n\t\tthis.get_transaction( row.id.value ).then( () => {\n\t\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\t\tmanage_payments: {\n\t\t\t\t\ttransaction: {\n\t\t\t\t\t\t[row.id.value]: {}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t}\n\n\trender() {\n\n\t\tif ( 'none' == this.state.current_visual_state ) {\n\t\t\treturn ( '' );\n\t\t} else {\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className={ 'tip-jar-wp-login-view ' + tip_jar_wp_get_current_view_class( this, ['login'] ) }>\n\t\t\t\t\t\t<Tip_Jar_WP_Login\n\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.props.check_if_user_is_logged_in }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ 'tip-jar-wp-manage-transactions-view ' + tip_jar_wp_get_current_view_class( this, ['transactions','fetching_data'] ) }>\n\t\t\t\t\t\t\t<Tip_Jar_WP_List_View\n\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\tcurrent_visual_state={ this.state.current_visual_state }\n\t\t\t\t\t\t\t\trows={ this.state.rows }\n\t\t\t\t\t\t\t\tcolumns={ this.state.columns }\n\t\t\t\t\t\t\t\ttotal_items={ this.state.total_items }\n\t\t\t\t\t\t\t\tget_rows_and_columns={ this.get_transactions.bind( this ) }\n\t\t\t\t\t\t\t\tcurrent_visual_state={ this.state.current_visual_state }\n\t\t\t\t\t\t\t\ton_row_click={ this.on_row_click.bind( this ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t}\n}\nexport default Tip_Jar_WP_Transactions;\n","import Tip_Jar_WP_List_View from './tip-jar-wp-list-view.js'\nvar tip_jar_wp_vars = tip_jar_wp_js_vars.tip_form_vars;\n\nwindow.Tip_Jar_WP_Arrangements = class Tip_Jar_WP_Arrangements extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrent_visual_state: 'none',\n\t\t\ttotal_items: 0,\n\t\t\tcurrent_arrangement_info: null,\n\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\tfetching_arrangements: false,\n\t\t\tfetching_arrangement: false,\n\t\t};\n\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.check_if_user_is_logged_in();\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\t// If the user is not logged in, show the login form\n\t\tif ( ! this.props.main_component.state.user_logged_in ) {\n\n\t\t\tif ( 'login' != this.state.current_visual_state ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrent_visual_state: 'login'\n\t\t\t\t} );\n\t\t\t}\n\n\t\t}\n\n\t\t// If the user is logged in, show the arrangements screen\n\t\telse {\n\n\t\t\t// Prevent an infinite loop\n\t\t\tif ( 'arrangements' !== this.state.current_visual_state && 'fetching_data' != this.state.current_visual_state ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrent_visual_state: 'arrangements'\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// If no arrangements have been loaded from the server, load some\n\t\t\tif ( 'arrangements' == this.state.current_visual_state && ! this.state.rows ) {\n\t\t\t\tthis.get_arrangements( 1, 10, '' );\n\t\t\t}\n\n\t\t}\n\n\t\t// If the main component is telling us to reload the arrangements\n\t\tif ( this.props.main_component.state.reload_arrangements ) {\n\t\t\tthis.props.main_component.setState( {\n\t\t\t\treload_arrangements: false\n\t\t\t}, () => {\n\t\t\t\tthis.get_arrangements( 1, 10, '' );\n\t\t\t} );\n\t\t}\n\n\t\t// If the 3rd level in the URL exists, (this could likely be more robust) set the current item to that\n\t\tif (\n\t\t\tObject.keys(this.props.main_component.state.all_current_visual_states)[0] &&\n\t\t\tthis.props.main_component.state.all_current_visual_states['manage_payments'] &&\n\t\t\tObject.keys(this.props.main_component.state.all_current_visual_states['manage_payments'])[0]\n\t\t) {\n\t\t\tvar second_slug = Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'])[0];\n\n\t\t\tif ( 'arrangement' == second_slug ) {\n\t\t\t\tif( Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'][second_slug])[0] ) {\n\t\t\t\t\tvar third_slug = Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'][second_slug])[0];\n\n\t\t\t\t\t// If the current single item ID does not match the item ID in the URL\n\t\t\t\t\tif ( ! this.props.main_component.state.current_arrangement_info ) {\n\t\t\t\t\t\tthis.get_arrangement( third_slug );\n\t\t\t\t\t}\n\n\t\t\t\t\telse if ( this.props.main_component.state.current_arrangement_info && third_slug !== this.props.main_component.state.current_arrangement_info.id ) {\n\t\t\t\t\t\t//this.get_arrangement( third_slug );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\tget_arrangements( current_page, items_per_page, search_term ) {\n\n\t\t// If we are already fetching arrangements, don't fetch more again.\n\t\tif ( this.state.fetching_arrangements ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar this_component = this;\n\n\t\tthis.setState( {\n\t\t\tcurrent_visual_state: 'fetching_data',\n\t\t\tfetching_arrangements: true,\n\t\t});\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'tip_jar_wp_get_arrangements' );\n\t\tpostData.append('tip_jar_wp_current_page', current_page);\n\t\tpostData.append('tip_jar_wp_items_per_page', items_per_page);\n\t\tpostData.append('tip_jar_wp_search_term', search_term);\n\t\tpostData.append('tip_jar_wp_get_arrangements_nonce', this.props.main_component.state.frontend_nonces.get_arrangements_nonce);\n\n\t\t// Get the arrangements defined by the paramaters in the state\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_get_arrangements', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t// Remove arrangements since none were found\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tcolumns: null,\n\t\t\t\t\t\trows: null,\n\t\t\t\t\t\ttotal_items: 0,\n\t\t\t\t\t\tfetching_arrangements: false,\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Reset the check user nonce\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\tfetching_arrangements: false,\n\t\t\t\t\t\t\t\t\tcurrent_visual_state: 'arrangements',\n\t\t\t\t\t\t\t\t\tcolumns: data.columns,\n\t\t\t\t\t\t\t\t\trows: data.rows,\n\t\t\t\t\t\t\t\t\ttotal_items: data.total_items\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Remove arrangements since none were found\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tfetching_arrangements: false,\n\t\t\t\t\t\t\t\tcolumns: null,\n\t\t\t\t\t\t\t\trows: null,\n\t\t\t\t\t\t\t\ttotal_items: 0\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\tget_arrangement( arrangement_id ) {\n\n\t\t// If we are already fetching arrangements, don't fetch more again.\n\t\tif ( this.state.fetching_arrangement ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tthis.setState( {\n\t\t\t\tfetching_arrangement: true,\n\t\t\t} );\n\n\t\t\tvar this_component = this;\n\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', 'tip_jar_wp_get_arrangement' );\n\t\t\tpostData.append('tip_jar_wp_arrangement_id', arrangement_id);\n\t\t\tpostData.append('tip_jar_wp_get_arrangement_nonce', this.props.main_component.state.frontend_nonces.get_arrangement_nonce);\n\n\t\t\t// Get the arrangements defined by the paramaters in the state\n\t\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_get_arrangement', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode: \"same-origin\",\n\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\tbody: postData\n\t\t\t} ).then(\n\t\t\t\t( response ) => {\n\t\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\tcurrent_arrangement_info: null,\n\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then(\n\t\t\t\t\t\t( data ) => {\n\t\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_info: data.arrangement_info,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\t\tthis.get_arrangement_payment_method( arrangement_id )\n\t\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_info: null,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t).catch(\n\t\t\t\t\t\t( err ) => {\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\t( err ) => {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t} );\n\t\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t\t\treject();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t);\n\n\t\t});\n\n\t}\n\n\tget_arrangement_payment_method( arrangement_id ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tvar this_component = this;\n\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', 'tip_jar_wp_get_arrangement_payment_method_endpoint' );\n\t\t\tpostData.append('tip_jar_wp_arrangement_id', arrangement_id);\n\t\t\tpostData.append('tip_jar_wp_get_arrangement_payment_method_nonce', this.props.main_component.state.frontend_nonces.get_arrangement_payment_method_nonce);\n\n\t\t\t// Get the arrangements defined by the paramaters in the state\n\t\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_get_arrangement_payment_method_endpoint', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode: \"same-origin\",\n\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\tbody: postData\n\t\t\t} ).then(\n\t\t\t\t( response ) => {\n\t\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then(\n\t\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: data.payment_method_data\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: 'none'\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t).catch(\n\t\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\tfunction( err ) {\n\t\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t\t\treject();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t);\n\n\t\t});\n\n\t}\n\n\ton_row_click( row, event ) {\n\n\t\tthis.get_arrangement( row.id.value ).then( () => {\n\t\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\t\tmanage_payments: {\n\t\t\t\t\tarrangement: {\n\t\t\t\t\t\t[row.id.value]: {}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t}\n\n\trender() {\n\n\t\tif ( 'none' == this.state.current_visual_state ) {\n\t\t\treturn ( '' );\n\t\t} else {\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className={ 'tip-jar-wp-login-view ' + tip_jar_wp_get_current_view_class( this, ['login'] ) }>\n\t\t\t\t\t\t<Tip_Jar_WP_Login\n\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.props.check_if_user_is_logged_in }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ 'tip-jar-wp-manage-arrangements-view ' + tip_jar_wp_get_current_view_class( this, ['arrangements','fetching_data'] ) }>\n\t\t\t\t\t\t\t<Tip_Jar_WP_List_View\n\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\tcurrent_visual_state={ this.state.current_visual_state }\n\t\t\t\t\t\t\t\trows={ this.state.rows }\n\t\t\t\t\t\t\t\tcolumns={ this.state.columns }\n\t\t\t\t\t\t\t\ttotal_items={ this.state.total_items }\n\t\t\t\t\t\t\t\tget_rows_and_columns={ this.get_arrangements.bind( this ) }\n\t\t\t\t\t\t\t\tcurrent_visual_state={ this.state.current_visual_state }\n\t\t\t\t\t\t\t\ton_row_click={ this.on_row_click.bind( this ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t}\n}\nexport default Tip_Jar_WP_Arrangements;\n","import {loadStripe} from '@stripe/stripe-js';\nimport {Elements} from '@stripe/react-stripe-js';\nimport {ElementsConsumer} from '@stripe/react-stripe-js';\n\nwindow.Tip_Jar_WP_Arrangement = class Tip_Jar_WP_Arrangement extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tarrangement_cancel_intention_count: 0,\n\t\t\tcard_form_visible: false,\n\t\t\tsca_authentication_status: 'initial',\n\t\t\tstripe: loadStripe(this.props.main_component.state.dynamic_settings.stripe_api_key)\n\t\t};\n\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\tif ( ! this.props.main_component.state.current_arrangement_payment_method && this.state.card_form_visible ) {\n\t\t\tthis.setState( {\n\t\t\t\tcard_form_visible: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\thandle_back_to_plans_click( event ) {\n\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\tmanage_payments: {\n\t\t\t\tarrangements: {}\n\t\t\t}\n\t\t}, false );\n\t}\n\n\ttoggle_card_form_visibility( event ) {\n\t\tif ( this.state.card_form_visible ) {\n\t\t\tthis.setState( {\n\t\t\t\tcard_form_visible: false,\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.setState( {\n\t\t\t\tcard_form_visible: true,\n\t\t\t} );\n\t\t}\n\t}\n\n\tget_arrangement_payment_method( arrangement_id ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tvar this_component = this;\n\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', 'tip_jar_wp_get_arrangement_payment_method_endpoint' );\n\t\t\tpostData.append('tip_jar_wp_arrangement_id', arrangement_id);\n\t\t\tpostData.append('tip_jar_wp_get_arrangement_payment_method_nonce', this.props.main_component.state.frontend_nonces.get_arrangement_payment_method_nonce);\n\n\t\t\t// Get the arrangements defined by the paramaters in the state\n\t\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_get_arrangement_payment_method_endpoint', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode: \"same-origin\",\n\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\tbody: postData\n\t\t\t} ).then(\n\t\t\t\t( response ) => {\n\t\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\tcurrent_arrangement_payment_method: 'none'\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then(\n\t\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: data.payment_method_data\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: 'none'\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t).catch(\n\t\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\tfunction( err ) {\n\t\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t\t\treject();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t);\n\n\t\t});\n\n\t}\n\n\tget_arrangement( arrangement_id ) {\n\n\t\t// If we are already fetching arrangements, don't fetch more again.\n\t\tif ( this.state.fetching_arrangement ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tthis.setState( {\n\t\t\t\tfetching_arrangement: true,\n\t\t\t} );\n\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', 'tip_jar_wp_get_arrangement' );\n\t\t\tpostData.append('tip_jar_wp_arrangement_id', arrangement_id);\n\t\t\tpostData.append('tip_jar_wp_get_arrangement_nonce', this.props.main_component.state.frontend_nonces.get_arrangement_nonce);\n\n\t\t\t// Get the arrangements defined by the paramaters in the state\n\t\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_get_arrangement', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode: \"same-origin\",\n\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\tbody: postData\n\t\t\t} ).then(\n\t\t\t\t( response ) => {\n\t\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\tcurrent_arrangement_info: null,\n\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then(\n\t\t\t\t\t\t( data ) => {\n\t\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_info: data.arrangement_info,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\t\tthis.get_arrangement_payment_method( arrangement_id )\n\t\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_info: null,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t).catch(\n\t\t\t\t\t\t( err ) => {\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\t( err ) => {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t} );\n\t\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t\t\treject();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t);\n\n\t\t});\n\n\t}\n\n\tcancel_arrangement() {\n\n\t\t// Double check with the user to make sure they meant to cancel\n\t\tif ( 0 == this.state.arrangement_cancel_intention_count ) {\n\n\t\t\tthis.setState( {\n\t\t\t\tarrangement_cancel_intention_count: 1\n\t\t\t} );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Get the current arrangement\n\t\tvar current_arrangement_info = this.props.main_component.state.current_arrangement_info;\n\n\t\t// Update the recurring status of that arrangement to \"cancelling\"\n\t\tcurrent_arrangement_info.recurring_status = 'cancelling';\n\n\t\t// Set the state to be cancelling\n\t\tthis.props.main_component.setState( {\n\t\t\tcurrent_arrangement_info: current_arrangement_info\n\t\t} );\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'tip_jar_wp_cancel_arrangement' );\n\t\tpostData.append('tip_jar_wp_arrangement_id', this.props.main_component.state.current_arrangement_info.id );\n\t\tpostData.append('tip_jar_wp_cancel_arrangement_nonce', this.props.main_component.state.frontend_nonces.cancel_arrangement_nonce );\n\n\t\t// Cancel the arrangement in question\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_cancel_arrangement', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\t( response ) => {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t// We were unable to cancel the arrangement\n\n\t\t\t\t\t// Get the current arrangement\n\t\t\t\t\tcurrent_arrangement_info = this.props.main_component.state.current_arrangement_info;\n\n\t\t\t\t\t// Update the recurring status of that arrangement to \"cancelling\"\n\t\t\t\t\tcurrent_arrangement_info.recurring_status = 'failed_to_cancel';\n\n\t\t\t\t\t// Update the arrangement from the fetched data\n\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\tcurrent_arrangement_info: data.current_arrangement_info\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\t( data ) => {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Reset the check user nonce\n\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t// Set the current arrangement info based on the updated data\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_info: data.arrangement_info,\n\t\t\t\t\t\t\t\t\tarrangement_cancel_intention_count: 0\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t// Reload the arrangements so that \"cancelled\" shows up in the column for this arrangement\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\treload_arrangements: true\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// We were unable to cancel the arrangement\n\n\t\t\t\t\t\t\t// Get the current arrangement\n\t\t\t\t\t\t\tcurrent_arrangement_info = this.props.main_component.state.current_arrangement_info;\n\n\t\t\t\t\t\t\t// Update the recurring status of that arrangement to \"cancelling\"\n\t\t\t\t\t\t\tcurrent_arrangement_info.recurring_status = 'failed_to_cancel';\n\n\t\t\t\t\t\t\t// Set the state to be cancelling\n\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_arrangement_info: current_arrangement_info\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\tif ( 'not_logged_in' == data.error_code ) {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\t( err ) => {\n\n\t\t\t\t\t\t// We were unable to cancel the arrangement\n\n\t\t\t\t\t\t// Get the current arrangement\n\t\t\t\t\t\tcurrent_arrangement_info = this.props.main_component.state.current_arrangement_info;\n\n\t\t\t\t\t\t// Update the recurring status of that arrangement to \"cancelling\"\n\t\t\t\t\t\tcurrent_arrangement_info.recurring_status = 'failed_to_cancel';\n\n\t\t\t\t\t\t// Set the state to be cancelling\n\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\tcurrent_arrangement_info: current_arrangement_info\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\t( err ) => {\n\n\t\t\t\t// We were unable to cancel the arrangement\n\n\t\t\t\t// Get the current arrangement\n\t\t\t\tcurrent_arrangement_info = this.props.main_component.state.current_arrangement_info;\n\n\t\t\t\t// Update the recurring status of that arrangement to \"cancelling\"\n\t\t\t\tcurrent_arrangement_info.recurring_status = 'failed_to_cancel';\n\n\t\t\t\t// Set the state to be cancelling\n\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\tcurrent_arrangement_info: current_arrangement_info\n\t\t\t\t} );\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\t}\n\n\trender_authenticate_sca_button() {\n\n\t\tif ( this.state.card_form_visible ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn(\n\n\t\t\t\t<Elements stripe={this.state.stripe}>\n\t\t\t\t\t<TipJarWPAuthenticatePaymentButton\n\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\tTip_Jar_WP_Arrangement={ this }\n\t\t\t\t\t\tget_arrangement={ this.get_arrangement.bind( this ) }\n\t\t\t\t\t/>\n\t\t\t\t</Elements>\n\n\t\t);\n\t}\n\n\trender_cancel_button() {\n\n\t\t// Don't show this if we are updating the card attached to the plan.\n\t\tif ( this.state.card_form_visible ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tvar button_text;\n\n\t\t// If the webhook has not arrived, show \"Unable to cancel, webhook failed\" on the button.\n\t\tif ( ! this.props.main_component.state.current_arrangement_info.webhook_succeeded ) {\n\t\t\treturn ( <button type=\"button\" className=\"tip-jar-wp-arrangement-action-cancel\">{ this.props.main_component.state.unique_settings.strings.arrangement_action_cant_cancel }</button> );\n\t\t}\n\n\t\tif ( 0 == this.state.arrangement_cancel_intention_count ) {\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.arrangement_action_cancel;\n\t\t}\n\n\t\tif ( 1 == this.state.arrangement_cancel_intention_count ) {\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.arrangement_action_cancel_double;\n\t\t}\n\n\t\tif ( 'failed_to_cancel' == this.props.main_component.state.current_arrangement_info.recurring_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"tip-jar-wp-receipt-action-button\">\n\t\t\t\t\t<a className=\"tip-jar-wp-arrangement-action-cancel\">{ this.props.main_component.state.unique_settings.strings.arrangement_failed_to_cancel }</a>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif ( 'cancelling' == this.props.main_component.state.current_arrangement_info.recurring_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"tip-jar-wp-receipt-action-button\">\n\t\t\t\t\t<a className=\"tip-jar-wp-arrangement-action-cancel\">{ this.props.main_component.state.unique_settings.strings.arrangement_cancelling }</a>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif ( 'cancelled' == this.props.main_component.state.current_arrangement_info.recurring_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"tip-jar-wp-receipt-action-button\">\n\t\t\t\t\t<a className=\"tip-jar-wp-arrangement-action-cancel\">{ this.props.main_component.state.unique_settings.strings.arrangement_cancelled }</a>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn(\n\t\t\t\t<div className=\"tip-jar-wp-receipt-action-button\">\n\t\t\t\t\t<a className=\"tip-jar-wp-arrangement-action-cancel\" onClick={ this.cancel_arrangement.bind( this ) }>{ button_text }</a>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n\n\trender_renewal_date() {\n\n\t\tif ( 'cancelled' == this.props.main_component.state.current_arrangement_info.recurring_status ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"tip-jar-wp-arrangement-renewal-date\">\n\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title tip-jar-wp-arrangement-renewal-date-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_renewal_title + ': ' }</span>\n\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value tip-jar-wp-arrangement-renewal-date-value\">{ tip_jar_wp_format_date( this.props.main_component.state.current_arrangement_info.renewal_date ) }</span>\n\t\t\t</div>\n\t\t);\n\n\t}\n\n\tformat_amount() {\n\n\t\tvar cents = this.props.main_component.state.current_arrangement_info.amount;\n\t\tvar currency = this.props.main_component.state.current_arrangement_info.currency;\n\t\tvar is_zero_decimal_currency = this.props.main_component.state.current_arrangement_info.is_zero_decimal_currency;\n\t\tvar string_after = this.props.main_component.state.current_arrangement_info.string_after + ' (' + currency.toUpperCase() + ')';\n\n\t\treturn tip_jar_wp_format_money( cents, currency, is_zero_decimal_currency, string_after );\n\n\t}\n\n\trender_payment_method() {\n\n\t\tif ( ! this.props.main_component.state.current_arrangement_payment_method ) {\n\t\t\treturn <Tip_Jar_WP_Spinner color_mode=\"tip-jar-wp-spinner-dark\" />;\n\t\t}\n\n\t\tif ( 'none' == this.props.main_component.state.current_arrangement_payment_method ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"tip-jar-wp-payment-method\">\n\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title tip-jar-wp-arrangement-id-title\">\n\t\t\t\t\t\t{ this.props.main_component.state.unique_settings.strings.arrangement_payment_method_title + ': ' }\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value tip-jar-wp-arrangement-id-value\">\n\t\t\t\t\t\t<span className=\"tip-jar-wp-inline-card\">\n\t\t\t\t\t\t\t{ <Tip_Jar_WP_Card_Icon brand={ this.props.main_component.state.current_arrangement_payment_method.card.brand } /> }\n\t\t\t\t\t\t\t<div className=\"tip-jar-wp-inline-card-number\">{ ' ' + this.props.main_component.state.current_arrangement_payment_method.card.last4 }</div>\n\t\t\t\t\t\t\t<div className=\"tip-jar-wp-inline-update-button\">\n\t\t\t\t\t\t\t\t<button className=\"tip-jar-wp-text-button\" onClick={ this.toggle_card_form_visibility.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.update_payment_method_verb }</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\trender_payment_method_update_form() {\n\n\t\tif ( this.state.card_form_visible ) {\n\t\t\treturn(\n\t\t\t\t<Elements stripe={this.state.stripe}>\n\t\t\t\t\t<TipJarWPUpdateCardForm\n\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\tTip_Jar_WP_Arrangement={ this }\n\t\t\t\t\t\tget_arrangement={ this.get_arrangement.bind( this ) }\n\t\t\t\t\t/>\n\t\t\t\t</Elements>\n\t\t\t);\n\t\t}\n\n\t}\n\n\trender() {\n\n\t\tif ( ! this.props.main_component.state.current_arrangement_info ) {\n\t\t\treturn ( <Tip_Jar_WP_Spinner /> );\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"tip-jar-wp-arrangement\">\n\t\t\t\t<div className={ 'tip-jar-wp-back-button-container' }>\n\t\t\t\t\t<a onClick={ this.handle_back_to_plans_click.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.back_to_plans }</a>\n\t\t\t\t</div>\n\t\t\t\t<div className={ 'tip-jar-wp-receipt-title' }>{ this.props.main_component.state.unique_settings.strings.arrangement_details }</div>\n\t\t\t\t<div className=\"tip-jar-wp-arrangement-id\">\n\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title tip-jar-wp-arrangement-id-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_id_title + ': ' }</span>\n\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value tip-jar-wp-arrangement-id-value\">{ this.props.main_component.state.current_arrangement_info.id }</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-arrangement-status\">\n\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title tip-jar-wp-arrangement-plan-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_amount_title + ': ' }</span>\n\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value tip-jar-wp-arrangement-plan-value\">{ this.props.main_component.state.current_arrangement_info.recurring_status_visible }</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-arrangement-interval\">\n\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-title tip-jar-wp-arrangement-plan-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_amount_title + ': ' }</span>\n\t\t\t\t\t<span className=\"tip-jar-wp-receipt-line-item-value tip-jar-wp-arrangement-plan-value\">{ this.format_amount() }</span>\n\t\t\t\t</div>\n\t\t\t\t{ this.render_renewal_date() }\n\t\t\t\t{ this.render_payment_method() }\n\t\t\t\t<div className=\"tip-jar-wp-arrangement-actions\">\n\t\t\t\t\t{ this.render_payment_method_update_form() }\n\t\t\t\t\t{ this.render_authenticate_sca_button() }\n\t\t\t\t\t{ this.render_cancel_button() }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\nexport default Tip_Jar_WP_Arrangement;\n\nclass Tip_Jar_WP_Authenticate_Payment_Button extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tsca_authentication_status: 'initial',\n\t\t};\n\n\t}\n\n\n\tattempt_payment_intent_confirmation() {\n\n\t\tthis.setState( {\n\t\t\tsca_authentication_status: 'authorizing',\n\t\t} );\n\n\t\t// Pass the PaymentIntent's client secret off to Stripe\n\t\tthis.props.stripe.confirmPaymentIntent(\n\t\t\tthis.props.main_component.state.current_arrangement_info.pending_invoice.payment_intent.client_secret,\n\t\t\t{\n\t\t\t\tpayment_method: this.props.main_component.state.current_arrangement_info.pending_invoice.payment_intent.payment_method,\n\t\t\t}\n\t\t).then( ( payment_intent_result ) => {\n\n\t\t\t// If the Payment Intent was unable to be confirmed\n\t\t\tif ( payment_intent_result.error ) {\n\n\t\t\t\tconsole.log( payment_intent_result.error );\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tsca_authentication_status: 'failed_to_authorize',\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\t// Success with no 3DS\n\t\t\t\tif ('succeeded' === payment_intent_result.paymentIntent.status) {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tsca_authentication_status: 'success',\n\t\t\t\t\t}, () => {\n\t\t\t\t\t\tthis.props.get_arrangement( this.props.main_component.state.current_arrangement_info.id );\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\n\t\t\t\t\t// It didn't go through without 3DS so try it as a card payment so we can use Stripe simpified 3DS\n\t\t\t\t\t// We got a payment intent from Stripe, so process it now\n\t\t\t\t\tthis.props.stripe.handleCardPayment(\n\t\t\t\t\t\tthis.props.main_component.state.current_arrangement_info.pending_invoice.payment_intent.client_secret,\n\t\t\t\t\t\t{}\n\t\t\t\t\t).then( (payment_intent_result) => {\n\t\t\t\t\t\t// If the response from handleCardPayment was no good\n\t\t\t\t\t\tif (payment_intent_result.error) {\n\n\t\t\t\t\t\t\t// Display error.message in the UI.\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tsca_authentication_status: 'failed_to_authorize',\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// The PaymentIntent was successful\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\tsca_authentication_status: 'success',\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis.props.get_arrangement( this.props.main_component.state.current_arrangement_info.id );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\trender() {\n\n\t\t// Don't show this if there is no payment intent to authorize\n\t\tif ( ! this.props.main_component.state.current_arrangement_info.pending_invoice ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tvar button_text;\n\n\t\tif ( 'failed_to_authorize' == this.state.sca_authentication_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"tip-jar-wp-receipt-action-button\">\n\t\t\t\t\t<div>{  this.props.main_component.state.unique_settings.strings.sca_auth_description }</div>\n\t\t\t\t\t<button className=\"tip-jar-wp-receipt-line-item-action tip-jar-wp-arrangement-action-authenticate\" onClick={ this.attempt_payment_intent_confirmation.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.sca_auth_failed }</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif ( 'authorizing' == this.state.sca_authentication_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"tip-jar-wp-receipt-action-button\">\n\t\t\t\t\t<div>{  this.props.main_component.state.unique_settings.strings.sca_auth_description }</div>\n\t\t\t\t\t<button className=\"tip-jar-wp-receipt-line-item-action tip-jar-wp-arrangement-action-authenticate\">{ this.props.main_component.state.unique_settings.strings.sca_authing_verb }</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif ( 'initial' == this.state.sca_authentication_status ) {\n\n\t\t\tvar invoice = this.props.main_component.state.current_arrangement_info.pending_invoice.invoice;\n\t\t\tvar formatted_amount = tip_jar_wp_format_money( invoice.total, invoice.currency, this.props.main_component.state.current_arrangement_info.is_zero_decimal_currency, '' );\n\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className=\"tip-jar-wp-receipt-action-button\">\n\t\t\t\t\t\t<div>{  this.props.main_component.state.unique_settings.strings.sca_auth_description }</div>\n\t\t\t\t\t\t<button className=\"tip-jar-wp-receipt-line-item-action tip-jar-wp-arrangement-action-authenticate\" onClick={ this.attempt_payment_intent_confirmation.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.sca_auth_verb + ' - ' + formatted_amount }</button>\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\n\t\tif ( 'success' == this.state.sca_authentication_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"tip-jar-wp-receipt-action-button\">\n\t\t\t\t\t<div>{ this.props.main_component.state.unique_settings.strings.sca_authed_verb }</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n}\n\nclass Tip_Jar_WP_Update_Card_Form extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tstatus_of_payment_method_updating: 'initial',\n\t\t\tform_validation_attempted: false,\n\t\t\tstripe_elements_fields_complete: false,\n\t\t\tstripe_card_error_code: '',\n\t\t};\n\n\t}\n\n\tupdate_payment_method_for_arrangement() {\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'tip_jar_wp_update_arrangement' );\n\t\tpostData.append('tip_jar_wp_arrangement_id', this.props.main_component.state.current_arrangement_info.id );\n\t\tpostData.append('tip_jar_wp_stripe_payment_method_id', this.state.stripe_payment_method.id);\n\t\tpostData.append('tip_jar_wp_update_arrangement_nonce', this.props.main_component.state.frontend_nonces.update_arrangement_nonce );\n\n\t\t// Update the payment method to use for this arrangement's renewals.\n\t\tfetch( tip_jar_wp_js_vars.ajaxurl + '?tip_jar_wp_update_arrangement', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\t( response ) => {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update'\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\t( data ) => {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tstatus_of_payment_method_updating: 'success'\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t// Reload the card attached to the arrangement and update it visually.\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: data.payment_method\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tthis.props.Tip_Jar_WP_Arrangement.setState( {\n\t\t\t\t\t\t\t\t\t\t\tcard_form_visible: false,\n\t\t\t\t\t\t\t\t\t\t\tstatus_of_payment_method_updating: 'initial',\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update'\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\t( err ) => {\n\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update'\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\t( err ) => {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update'\n\t\t\t\t} );\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\thandleCreditCardSubmit( event ){\n\n\t\tevent.preventDefault();\n\n\t\tthis.setState( {\n\t\t\tstatus_of_payment_method_updating: 'updating'\n\t\t});\n\n\t\t// Create a stripe payment_method using the submitted info\n\t\tthis.create_stripe_payment_method().then( () => {\n\n\t\t\t// Validate the fields\n\t\t\tvar allow_form_to_be_submitted = this.validate_form( true );\n\n\t\t\t// Prevent the form submission if a field didn't validate\n\t\t\tif ( ! allow_form_to_be_submitted ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update',\n\t\t\t\t}, () => {\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\tthis.update_payment_method_for_arrangement();\n\t\t\t}\n\n\t\t} ).catch((err) => {\n\n\t\t\tthis.setState( {\n\t\t\t\tstripe_card_error_code: err,\n\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update',\n\t\t\t}, () => {\n\t\t\t\tconsole.log( err );\n\t\t\t});\n\n\t\t\t// Validate the fields\n\t\t\tvar allow_form_to_be_submitted = this.validate_form( true );\n\n\t\t\t// Prevent the form submission if a field didn't validate\n\t\t\treturn false;\n\n\t\t} );\n\n\t}\n\n\tvalidate_form( modify_state = true ) {\n\n\t\tvar all_fields_validate = true;\n\n\t\t// Credit Card form specific fields\n\t\tif ( 'credit_card' == this.state.payment_mode ) {\n\n\t\t\t// Name field\n\t\t\tif ( ! this.state.name_validated ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t\t// Email field\n\t\t\tif ( ! this.state.email_validated ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t\t// Stripe all in one field\n\t\t\tif ( ! this.state.stripe_payment_method ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t}\n\n\t\tif ( modify_state ) {\n\n\t\t\tthis.setState( {\n\t\t\t\tform_validation_attempted: true\n\t\t\t} );\n\n\t\t\tif ( ! all_fields_validate ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: true,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: false,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\tcreate_stripe_payment_method() {\n\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\n\t\t\tvar this_component = this;\n\n\t\t\t// Set the validation of this field\n\t\t\tthis.props.stripe.createPaymentMethod(\n\t\t\t\t{\n\t\t\t\t\ttype: 'card',\n\t\t\t\t\tcard: this.state.cardElement,\n\t\t\t\t\tbilling_details: {\n\t\t\t\t\t\taddress: {\n\t\t\t\t\t\t\tpostal_code: this.state.postal_code\n\t\t\t\t\t\t},\n\t\t\t\t\t\temail: this.state.email_value,\n\t\t\t\t\t\tname: this.props.name_value,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t).then(function(result) {\n\t\t\t\tif (result.error) {\n\n\t\t\t\t\t// Show error in payment form\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tstripe_payment_method: null,\n\t\t\t\t\t\tstripe_card_error_code: result.error.code\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\treject(result.error.code);\n\t\t\t\t\t\treturn result.error;\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tstripe_payment_method: result.paymentMethod,\n\t\t\t\t\t\tstripe_card_error_code: 'success'\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\tresolve( result.paymentMethod );\n\t\t\t\t\t\treturn result.paymentMethod;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t};\n\n\trender_complete_payment_button_field() {\n\n\t\tvar button_class;\n\t\tvar button_text;\n\n\t\tif ( 'initial' == this.state.status_of_payment_method_updating ) {\n\t\t\tbutton_class = '';\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.update_payment_method_verb;\n\t\t}\n\t\tif ( 'updating' == this.state.status_of_payment_method_updating ) {\n\t\t\tbutton_class = ' tip-jar-wp-btn-attempting-payment';\n\t\t\tbutton_text = <Tip_Jar_WP_Spinner />;\n\t\t}\n\t\tif ( 'success' == this.state.status_of_payment_method_updating ) {\n\t\t\tbutton_class = ' tip-jar-wp-btn-success';\n\t\t\tbutton_text = <span><Tip_Jar_WP_Checkmark /></span>;\n\t\t}\n\t\tif ( 'unable_to_update' == this.state.status_of_payment_method_updating ) {\n\t\t\tbutton_class = ' tip-jar-wp-btn-error';\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.complete_payment_button_error_text;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<button type=\"button\" onClick={this.handleCreditCardSubmit.bind( this )} className={ 'tip-jar-wp-pay-button' + button_class }>{ button_text }</button>\n\t\t\t</div>\n\t\t)\n\t}\n\n\tset_validation_and_value_of_field( state_validation_variable, is_validated, state_value_variable = null, state_value = null ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tif ( null == state_value_variable ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t},  () => {\n\t\t\t\t\tresolve( this.state );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t\t[state_value_variable]: state_value,\n\t\t\t\t}, () => {\n\t\t\t\t\tresolve( this.state );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t} );\n\t}\n\n\trender() {\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"tip-jar-wp-payment-field-container\">\n\t\t\t\t\t<div className=\"tip-jar-wp-payment-field\">\n\t\t\t\t\t\t<Tip_Jar_WP_Input_Field\n\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\tstate_validation_variable_name={ 'name_validated' }\n\t\t\t\t\t\t\tstate_value_variable_name={ 'name_value' }\n\t\t\t\t\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\t\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\t\t\t\tis_validated={ this.state.name_validated }\n\t\t\t\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.name }\n\t\t\t\t\t\t\tinitial_value={ this.props.main_component.state.unique_settings.strings.current_user_name }\n\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass_name={ 'tip-jar-wp-name' }\n\t\t\t\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.name.placeholder_text }\n\t\t\t\t\t\t\tname=\"tip-amount\"\n\t\t\t\t\t\t\tdisabled={ false }\n\t\t\t\t\t\t\tediting_key={ 'strings/input_field_instructions/name/[current_key_here]/instruction_message' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-payment-field-container\">\n\t\t\t\t\t<div className=\"tip-jar-wp-payment-field\">\n\t\t\t\t\t\t<Tip_Jar_WP_Stripe_All_In_One_Field\n\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\tcard_form={ this }\n\t\t\t\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\t\t\t\tvalidate_form={ null }\n\t\t\t\t\t\t\tstripe_card_error_code={ this.state.stripe_card_error_code }\n\t\t\t\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.stripe_all_in_one }\n\t\t\t\t\t\t\tstripe={ this.props.stripe }\n\t\t\t\t\t\t\tdisabled={ false }\n\t\t\t\t\t\t\tmobile_mode={ window.innerWidth > 600 ? false : true}\n\t\t\t\t\t\t\tzip_code_placeholder={ this.props.main_component.state.unique_settings.strings.zip_code_placeholder }\n\t\t\t\t\t\t\tcreate_stripe_source={ this.create_stripe_payment_method }\n\t\t\t\t\t\t\tediting_key={ 'strings/input_field_instructions/stripe_all_in_one/[current_key_here]/instruction_message' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tip-jar-wp-payment-field-container\">\n\t\t\t\t\t<div className=\"tip-jar-wp-payment-field\">\n\t\t\t\t\t\t{ this.render_complete_payment_button_field() }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nconst TipJarWPUpdateCardForm = ( props) => (\n  <ElementsConsumer>\n    {({stripe, elements}) => (\n      <Tip_Jar_WP_Update_Card_Form stripe={stripe} elements={elements} main_component={ props.main_component } Tip_Jar_WP_Arrangement={ props.Tip_Jar_WP_Arrangement } />\n    )}\n  </ElementsConsumer>\n);\nconst TipJarWPAuthenticatePaymentButton = ( props ) => (\n  <ElementsConsumer>\n    {({stripe, elements}) => (\n      <Tip_Jar_WP_Authenticate_Payment_Button stripe={stripe} elements={elements} main_component={ props.main_component } Tip_Jar_WP_Arrangement={ props.Tip_Jar_WP_Arrangement } />\n    )}\n  </ElementsConsumer>\n);\n","window.Tip_Jar_WP_Spinner = class Tip_Jar_WP_Spinner extends React.Component{\n\n\t\tget_color_mode_class() {\n\n\t\t\tif ( this.props.color_mode ) {\n\t\t\t\treturn ( ' ' + this.props.color_mode );\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t  render(){\n        return(\n\t\t\t\t\t<div className={ \"tip-jar-wp-spinner-container\" }>\n\t\t\t\t\t\t<div className={ \"tip-jar-wp-spinner\" + this.get_color_mode_class() }>\n              <div className=\"tip-jar-wp-double-bounce1\"></div>\n              <div className=\"tip-jar-wp-double-bounce2\"></div>\n            </div>\n\t\t\t\t\t</div>\n        )\n    }\n}\nexport default Tip_Jar_WP_Spinner;\n","window.Tip_Jar_WP_Checkmark = class Tip_Jar_WP_Checkmark extends React.Component{\n    render(){\n        return(\n            <svg className=\"tip-jar-wp-checkmark-svg\" xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"100\" viewBox=\"0 0 200 200\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <circle className=\"tip-jar-wp-checkmark--circle\" cx=\"100\" cy=\"100\" r=\"84.615\" fill=\"#4BB543\"/>\n                    <polyline className=\"tip-jar-wp-checkmark--check\" stroke=\"#FFF\"  points=\"76.923 130.769 123.077 130.769 123.077 38.462\" transform=\"rotate(42 100 84.615)\"/>\n                </g>\n            </svg>\n        )\n    }\n}\nexport default Tip_Jar_WP_Checkmark;\n","window.Tip_Jar_WP_Modal = class Tip_Jar_WP_Modal extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\thas_mounted: false,\n\t\t\tmodal_open: false\n\t\t}\n\n\t\tthis.handle_key_press = this.handle_key_press.bind( this );\n\t\tthis.toggle_modal = this.toggle_modal.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.handle_open_status_based_on_url();\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\tif ( ! this.state.modal_open ) {\n\t\t\t// Remove a listener for the ESC key when the modal is closed\n\t\t\tdocument.removeEventListener(\"keydown\", this.handle_key_press, false);\n\t\t} else {\n\n\t\t\tif ( ! this.state.has_mounted ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\thas_mounted: true\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Add a listener for the ESC key when the modal is open\n\t\t\tdocument.addEventListener(\"keydown\", this.handle_key_press, false);\n\t\t}\n\n\t\tthis.handle_open_status_based_on_url();\n\t}\n\n\thandle_open_status_based_on_url() {\n\n\t\t// If a modal is open based on the setting in the main component\n\t\tif ( this.props.main_component && this.props.main_component.state.modal_visual_state ) {\n\t\t\t// Check if that modal is us!\n\t\t\tif ( this.props.slug == Object.keys(this.props.main_component.state.modal_visual_state)[0] ) {\n\t\t\t\t// Open this modal if it isn't already open\n\t\t\t\tif ( ! this.state.modal_open ) {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tmodal_open:  true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If the current modal in the URL is not us, close this one.\n\t\t\telse {\n\t\t\t\tif ( this.state.modal_open ) {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tmodal_open:  false\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget_modal_visible_class() {\n\t\tif ( this.state.modal_open ) {\n\t\t\treturn ' tip-jar-wp-modal-open';\n\t\t} else {\n\t\t\treturn ' tip-jar-wp-modal-closed';\n\t\t}\n\t}\n\n\thandle_key_press( event ) {\n\n\t\tif( event.keyCode === 27 ) {\n\t\t\tthis.toggle_modal( this.state );\n\t\t}\n\n\t}\n\n\ttoggle_modal( state ) {\n\n\t\t// If the modal is open, close it\n\t\tif ( state.modal_open ) {\n\t\t\tthis.props.main_component.set_all_current_visual_states( false, {} );\n\t\t} else {\n\t\t\tthis.props.main_component.set_all_current_visual_states( false, {\n\t\t\t\t[this.props.slug]: {}\n\t\t\t} );\n\t\t}\n\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className={ 'tip-jar-wp-modal-background tip-jar-wp-modal' + this.get_modal_visible_class() }>\n\t\t\t\t<div className={ 'tip-jar-wp-modal-outside-click-to-close' } onClick={ this.toggle_modal.bind( null, this.state ) } />\n\t\t\t\t<div className={ 'tip-jar-wp-modal-relative' }>\n\t\t\t\t\t<div className={ 'tip-jar-wp-modal-absolute' }>\n\t\t\t\t\t\t<div className={ 'tip-jar-wp-modal-inner' }>\n\t\t\t\t\t\t\t{ this.props.modal_contents }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default Tip_Jar_WP_Modal;\n"],"sourceRoot":""}